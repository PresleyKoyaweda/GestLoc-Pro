var xm=Object.defineProperty;var ym=(t,e,s)=>e in t?xm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Bo=(t,e,s)=>ym(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();var Xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function bm(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),s}var Sd={exports:{}},Ii={},Cd={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pn=Symbol.for("react.element"),jm=Symbol.for("react.portal"),wm=Symbol.for("react.fragment"),Nm=Symbol.for("react.strict_mode"),_m=Symbol.for("react.profiler"),km=Symbol.for("react.provider"),Sm=Symbol.for("react.context"),Cm=Symbol.for("react.forward_ref"),Pm=Symbol.for("react.suspense"),Em=Symbol.for("react.memo"),Im=Symbol.for("react.lazy"),Vo=Symbol.iterator;function Dm(t){return t===null||typeof t!="object"?null:(t=Vo&&t[Vo]||t["@@iterator"],typeof t=="function"?t:null)}var Pd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ed=Object.assign,Id={};function gr(t,e,s){this.props=t,this.context=e,this.refs=Id,this.updater=s||Pd}gr.prototype.isReactComponent={};gr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Dd(){}Dd.prototype=gr.prototype;function Fl(t,e,s){this.props=t,this.context=e,this.refs=Id,this.updater=s||Pd}var zl=Fl.prototype=new Dd;zl.constructor=Fl;Ed(zl,gr.prototype);zl.isPureReactComponent=!0;var qo=Array.isArray,Td=Object.prototype.hasOwnProperty,Bl={current:null},Ad={key:!0,ref:!0,__self:!0,__source:!0};function Rd(t,e,s){var n,i={},a=null,l=null;if(e!=null)for(n in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(a=""+e.key),e)Td.call(e,n)&&!Ad.hasOwnProperty(n)&&(i[n]=e[n]);var c=arguments.length-2;if(c===1)i.children=s;else if(1<c){for(var o=Array(c),d=0;d<c;d++)o[d]=arguments[d+2];i.children=o}if(t&&t.defaultProps)for(n in c=t.defaultProps,c)i[n]===void 0&&(i[n]=c[n]);return{$$typeof:pn,type:t,key:a,ref:l,props:i,_owner:Bl.current}}function Tm(t,e){return{$$typeof:pn,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vl(t){return typeof t=="object"&&t!==null&&t.$$typeof===pn}function Am(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var Ho=/\/+/g;function sa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Am(""+t.key):e.toString(36)}function Hn(t,e,s,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case pn:case jm:l=!0}}if(l)return l=t,i=i(l),t=n===""?"."+sa(l,0):n,qo(i)?(s="",t!=null&&(s=t.replace(Ho,"$&/")+"/"),Hn(i,e,s,"",function(d){return d})):i!=null&&(Vl(i)&&(i=Tm(i,s+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Ho,"$&/")+"/")+t)),e.push(i)),1;if(l=0,n=n===""?".":n+":",qo(t))for(var c=0;c<t.length;c++){a=t[c];var o=n+sa(a,c);l+=Hn(a,e,s,o,i)}else if(o=Dm(t),typeof o=="function")for(t=o.call(t),c=0;!(a=t.next()).done;)a=a.value,o=n+sa(a,c++),l+=Hn(a,e,s,o,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function kn(t,e,s){if(t==null)return t;var n=[],i=0;return Hn(t,n,"","",function(a){return e.call(s,a,i++)}),n}function Rm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ie={current:null},Wn={transition:null},$m={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:Wn,ReactCurrentOwner:Bl};function $d(){throw Error("act(...) is not supported in production builds of React.")}K.Children={map:kn,forEach:function(t,e,s){kn(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return kn(t,function(){e++}),e},toArray:function(t){return kn(t,function(e){return e})||[]},only:function(t){if(!Vl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};K.Component=gr;K.Fragment=wm;K.Profiler=_m;K.PureComponent=Fl;K.StrictMode=Nm;K.Suspense=Pm;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$m;K.act=$d;K.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Ed({},t.props),i=t.key,a=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,l=Bl.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(o in e)Td.call(e,o)&&!Ad.hasOwnProperty(o)&&(n[o]=e[o]===void 0&&c!==void 0?c[o]:e[o])}var o=arguments.length-2;if(o===1)n.children=s;else if(1<o){c=Array(o);for(var d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}return{$$typeof:pn,type:t.type,key:i,ref:a,props:n,_owner:l}};K.createContext=function(t){return t={$$typeof:Sm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:km,_context:t},t.Consumer=t};K.createElement=Rd;K.createFactory=function(t){var e=Rd.bind(null,t);return e.type=t,e};K.createRef=function(){return{current:null}};K.forwardRef=function(t){return{$$typeof:Cm,render:t}};K.isValidElement=Vl;K.lazy=function(t){return{$$typeof:Im,_payload:{_status:-1,_result:t},_init:Rm}};K.memo=function(t,e){return{$$typeof:Em,type:t,compare:e===void 0?null:e}};K.startTransition=function(t){var e=Wn.transition;Wn.transition={};try{t()}finally{Wn.transition=e}};K.unstable_act=$d;K.useCallback=function(t,e){return Ie.current.useCallback(t,e)};K.useContext=function(t){return Ie.current.useContext(t)};K.useDebugValue=function(){};K.useDeferredValue=function(t){return Ie.current.useDeferredValue(t)};K.useEffect=function(t,e){return Ie.current.useEffect(t,e)};K.useId=function(){return Ie.current.useId()};K.useImperativeHandle=function(t,e,s){return Ie.current.useImperativeHandle(t,e,s)};K.useInsertionEffect=function(t,e){return Ie.current.useInsertionEffect(t,e)};K.useLayoutEffect=function(t,e){return Ie.current.useLayoutEffect(t,e)};K.useMemo=function(t,e){return Ie.current.useMemo(t,e)};K.useReducer=function(t,e,s){return Ie.current.useReducer(t,e,s)};K.useRef=function(t){return Ie.current.useRef(t)};K.useState=function(t){return Ie.current.useState(t)};K.useSyncExternalStore=function(t,e,s){return Ie.current.useSyncExternalStore(t,e,s)};K.useTransition=function(){return Ie.current.useTransition()};K.version="18.3.1";Cd.exports=K;var $=Cd.exports;const us=vm($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm=$,Om=Symbol.for("react.element"),Mm=Symbol.for("react.fragment"),Um=Object.prototype.hasOwnProperty,Fm=Lm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zm={key:!0,ref:!0,__self:!0,__source:!0};function Ld(t,e,s){var n,i={},a=null,l=null;s!==void 0&&(a=""+s),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(n in e)Um.call(e,n)&&!zm.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Om,type:t,key:a,ref:l,props:i,_owner:Fm.current}}Ii.Fragment=Mm;Ii.jsx=Ld;Ii.jsxs=Ld;Sd.exports=Ii;var r=Sd.exports,Od={exports:{}},We={},Md={exports:{}},Ud={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,T){var M=P.length;P.push(T);e:for(;0<M;){var q=M-1>>>1,V=P[q];if(0<i(V,T))P[q]=T,P[M]=V,M=q;else break e}}function s(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var T=P[0],M=P.pop();if(M!==T){P[0]=M;e:for(var q=0,V=P.length,C=V>>>1;q<C;){var O=2*(q+1)-1,Y=P[O],je=O+1,Ds=P[je];if(0>i(Y,M))je<V&&0>i(Ds,Y)?(P[q]=Ds,P[je]=M,q=je):(P[q]=Y,P[O]=M,q=O);else if(je<V&&0>i(Ds,M))P[q]=Ds,P[je]=M,q=je;else break e}}return T}function i(P,T){var M=P.sortIndex-T.sortIndex;return M!==0?M:P.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var o=[],d=[],u=1,p=null,x=3,y=!1,b=!1,N=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(P){for(var T=s(d);T!==null;){if(T.callback===null)n(d);else if(T.startTime<=P)n(d),T.sortIndex=T.expirationTime,e(o,T);else break;T=s(d)}}function g(P){if(N=!1,f(P),!b)if(s(o)!==null)b=!0,re(w);else{var T=s(d);T!==null&&S(g,T.startTime-P)}}function w(P,T){b=!1,N&&(N=!1,m(k),k=-1),y=!0;var M=x;try{for(f(T),p=s(o);p!==null&&(!(p.expirationTime>T)||P&&!F());){var q=p.callback;if(typeof q=="function"){p.callback=null,x=p.priorityLevel;var V=q(p.expirationTime<=T);T=t.unstable_now(),typeof V=="function"?p.callback=V:p===s(o)&&n(o),f(T)}else n(o);p=s(o)}if(p!==null)var C=!0;else{var O=s(d);O!==null&&S(g,O.startTime-T),C=!1}return C}finally{p=null,x=M,y=!1}}var j=!1,_=null,k=-1,E=5,D=-1;function F(){return!(t.unstable_now()-D<E)}function W(){if(_!==null){var P=t.unstable_now();D=P;var T=!0;try{T=_(!0,P)}finally{T?I():(j=!1,_=null)}}else j=!1}var I;if(typeof h=="function")I=function(){h(W)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,B=A.port2;A.port1.onmessage=W,I=function(){B.postMessage(null)}}else I=function(){v(W,0)};function re(P){_=P,j||(j=!0,I())}function S(P,T){k=v(function(){P(t.unstable_now())},T)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){b||y||(b=!0,re(w))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return s(o)},t.unstable_next=function(P){switch(x){case 1:case 2:case 3:var T=3;break;default:T=x}var M=x;x=T;try{return P()}finally{x=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,T){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var M=x;x=P;try{return T()}finally{x=M}},t.unstable_scheduleCallback=function(P,T,M){var q=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?q+M:q):M=q,P){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=M+V,P={id:u++,callback:T,priorityLevel:P,startTime:M,expirationTime:V,sortIndex:-1},M>q?(P.sortIndex=M,e(d,P),s(o)===null&&P===s(d)&&(N?(m(k),k=-1):N=!0,S(g,M-q))):(P.sortIndex=V,e(o,P),b||y||(b=!0,re(w))),P},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(P){var T=x;return function(){var M=x;x=T;try{return P.apply(this,arguments)}finally{x=M}}}})(Ud);Md.exports=Ud;var Bm=Md.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm=$,qe=Bm;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Fd=new Set,Kr={};function Ss(t,e){lr(t,e),lr(t+"Capture",e)}function lr(t,e){for(Kr[t]=e,t=0;t<e.length;t++)Fd.add(e[t])}var _t=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),La=Object.prototype.hasOwnProperty,qm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wo={},Go={};function Hm(t){return La.call(Go,t)?!0:La.call(Wo,t)?!1:qm.test(t)?Go[t]=!0:(Wo[t]=!0,!1)}function Wm(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Gm(t,e,s,n){if(e===null||typeof e>"u"||Wm(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function De(t,e,s,n,i,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=l}var be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){be[t]=new De(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];be[e]=new De(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){be[t]=new De(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){be[t]=new De(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){be[t]=new De(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){be[t]=new De(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){be[t]=new De(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){be[t]=new De(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){be[t]=new De(t,5,!1,t.toLowerCase(),null,!1,!1)});var ql=/[\-:]([a-z])/g;function Hl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ql,Hl);be[e]=new De(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ql,Hl);be[e]=new De(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ql,Hl);be[e]=new De(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){be[t]=new De(t,1,!1,t.toLowerCase(),null,!1,!1)});be.xlinkHref=new De("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){be[t]=new De(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wl(t,e,s,n){var i=be.hasOwnProperty(e)?be[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Gm(e,s,i,n)&&(s=null),n||i===null?Hm(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):i.mustUseProperty?t[i.propertyName]=s===null?i.type===3?!1:"":s:(e=i.attributeName,n=i.attributeNamespace,s===null?t.removeAttribute(e):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var It=Vm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sn=Symbol.for("react.element"),zs=Symbol.for("react.portal"),Bs=Symbol.for("react.fragment"),Gl=Symbol.for("react.strict_mode"),Oa=Symbol.for("react.profiler"),zd=Symbol.for("react.provider"),Bd=Symbol.for("react.context"),Kl=Symbol.for("react.forward_ref"),Ma=Symbol.for("react.suspense"),Ua=Symbol.for("react.suspense_list"),Jl=Symbol.for("react.memo"),Rt=Symbol.for("react.lazy"),Vd=Symbol.for("react.offscreen"),Ko=Symbol.iterator;function wr(t){return t===null||typeof t!="object"?null:(t=Ko&&t[Ko]||t["@@iterator"],typeof t=="function"?t:null)}var ae=Object.assign,ra;function Tr(t){if(ra===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);ra=e&&e[1]||""}return`
`+ra+t}var na=!1;function ia(t,e){if(!t||na)return"";na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=n.stack.split(`
`),l=i.length-1,c=a.length-1;1<=l&&0<=c&&i[l]!==a[c];)c--;for(;1<=l&&0<=c;l--,c--)if(i[l]!==a[c]){if(l!==1||c!==1)do if(l--,c--,0>c||i[l]!==a[c]){var o=`
`+i[l].replace(" at new "," at ");return t.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",t.displayName)),o}while(1<=l&&0<=c);break}}}finally{na=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Tr(t):""}function Km(t){switch(t.tag){case 5:return Tr(t.type);case 16:return Tr("Lazy");case 13:return Tr("Suspense");case 19:return Tr("SuspenseList");case 0:case 2:case 15:return t=ia(t.type,!1),t;case 11:return t=ia(t.type.render,!1),t;case 1:return t=ia(t.type,!0),t;default:return""}}function Fa(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bs:return"Fragment";case zs:return"Portal";case Oa:return"Profiler";case Gl:return"StrictMode";case Ma:return"Suspense";case Ua:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Bd:return(t.displayName||"Context")+".Consumer";case zd:return(t._context.displayName||"Context")+".Provider";case Kl:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jl:return e=t.displayName||null,e!==null?e:Fa(t.type)||"Memo";case Rt:e=t._payload,t=t._init;try{return Fa(t(e))}catch{}}return null}function Jm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fa(e);case 8:return e===Gl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Qm(t){var e=qd(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,a=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){n=""+l,a.call(this,l)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cn(t){t._valueTracker||(t._valueTracker=Qm(t))}function Hd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=qd(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function ri(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function za(t,e){var s=e.checked;return ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Jo(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=Yt(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Wd(t,e){e=e.checked,e!=null&&Wl(t,"checked",e,!1)}function Ba(t,e){Wd(t,e);var s=Yt(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Va(t,e.type,s):e.hasOwnProperty("defaultValue")&&Va(t,e.type,Yt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qo(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Va(t,e,s){(e!=="number"||ri(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Ar=Array.isArray;function tr(t,e,s,n){if(t=t.options,e){e={};for(var i=0;i<s.length;i++)e["$"+s[i]]=!0;for(s=0;s<t.length;s++)i=e.hasOwnProperty("$"+t[s].value),t[s].selected!==i&&(t[s].selected=i),i&&n&&(t[s].defaultSelected=!0)}else{for(s=""+Yt(s),e=null,i=0;i<t.length;i++){if(t[i].value===s){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function qa(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yo(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(R(92));if(Ar(s)){if(1<s.length)throw Error(R(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:Yt(s)}}function Gd(t,e){var s=Yt(e.value),n=Yt(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function Xo(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Kd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ha(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Kd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pn,Jd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pn=Pn||document.createElement("div"),Pn.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jr(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var Or={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ym=["Webkit","ms","Moz","O"];Object.keys(Or).forEach(function(t){Ym.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Or[e]=Or[t]})});function Qd(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||Or.hasOwnProperty(t)&&Or[t]?(""+e).trim():e+"px"}function Yd(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,i=Qd(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,i):t[s]=i}}var Xm=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wa(t,e){if(e){if(Xm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function Ga(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ka=null;function Ql(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ja=null,sr=null,rr=null;function Zo(t){if(t=yn(t)){if(typeof Ja!="function")throw Error(R(280));var e=t.stateNode;e&&(e=$i(e),Ja(t.stateNode,t.type,e))}}function Xd(t){sr?rr?rr.push(t):rr=[t]:sr=t}function Zd(){if(sr){var t=sr,e=rr;if(rr=sr=null,Zo(t),e)for(t=0;t<e.length;t++)Zo(e[t])}}function eu(t,e){return t(e)}function tu(){}var aa=!1;function su(t,e,s){if(aa)return t(e,s);aa=!0;try{return eu(t,e,s)}finally{aa=!1,(sr!==null||rr!==null)&&(tu(),Zd())}}function Qr(t,e){var s=t.stateNode;if(s===null)return null;var n=$i(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(R(231,e,typeof s));return s}var Qa=!1;if(_t)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){Qa=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{Qa=!1}function Zm(t,e,s,n,i,a,l,c,o){var d=Array.prototype.slice.call(arguments,3);try{e.apply(s,d)}catch(u){this.onError(u)}}var Mr=!1,ni=null,ii=!1,Ya=null,ef={onError:function(t){Mr=!0,ni=t}};function tf(t,e,s,n,i,a,l,c,o){Mr=!1,ni=null,Zm.apply(ef,arguments)}function sf(t,e,s,n,i,a,l,c,o){if(tf.apply(this,arguments),Mr){if(Mr){var d=ni;Mr=!1,ni=null}else throw Error(R(198));ii||(ii=!0,Ya=d)}}function Cs(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function ru(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ec(t){if(Cs(t)!==t)throw Error(R(188))}function rf(t){var e=t.alternate;if(!e){if(e=Cs(t),e===null)throw Error(R(188));return e!==t?null:t}for(var s=t,n=e;;){var i=s.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){s=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===s)return ec(i),t;if(a===n)return ec(i),e;a=a.sibling}throw Error(R(188))}if(s.return!==n.return)s=i,n=a;else{for(var l=!1,c=i.child;c;){if(c===s){l=!0,s=i,n=a;break}if(c===n){l=!0,n=i,s=a;break}c=c.sibling}if(!l){for(c=a.child;c;){if(c===s){l=!0,s=a,n=i;break}if(c===n){l=!0,n=a,s=i;break}c=c.sibling}if(!l)throw Error(R(189))}}if(s.alternate!==n)throw Error(R(190))}if(s.tag!==3)throw Error(R(188));return s.stateNode.current===s?t:e}function nu(t){return t=rf(t),t!==null?iu(t):null}function iu(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=iu(t);if(e!==null)return e;t=t.sibling}return null}var au=qe.unstable_scheduleCallback,tc=qe.unstable_cancelCallback,nf=qe.unstable_shouldYield,af=qe.unstable_requestPaint,ce=qe.unstable_now,lf=qe.unstable_getCurrentPriorityLevel,Yl=qe.unstable_ImmediatePriority,lu=qe.unstable_UserBlockingPriority,ai=qe.unstable_NormalPriority,of=qe.unstable_LowPriority,ou=qe.unstable_IdlePriority,Di=null,mt=null;function cf(t){if(mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(Di,t,void 0,(t.current.flags&128)===128)}catch{}}var lt=Math.clz32?Math.clz32:hf,df=Math.log,uf=Math.LN2;function hf(t){return t>>>=0,t===0?32:31-(df(t)/uf|0)|0}var En=64,In=4194304;function Rr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function li(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,l=s&268435455;if(l!==0){var c=l&~i;c!==0?n=Rr(c):(a&=l,a!==0&&(n=Rr(a)))}else l=s&~i,l!==0?n=Rr(l):a!==0&&(n=Rr(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-lt(e),i=1<<s,n|=t[s],e&=~i;return n}function mf(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ff(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-lt(a),c=1<<l,o=i[l];o===-1?(!(c&s)||c&n)&&(i[l]=mf(c,e)):o<=e&&(t.expiredLanes|=c),a&=~c}}function Xa(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function cu(){var t=En;return En<<=1,!(En&4194240)&&(En=64),t}function la(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function gn(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-lt(e),t[e]=s}function pf(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var i=31-lt(s),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,s&=~a}}function Xl(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-lt(s),i=1<<n;i&e|t[n]&e&&(t[n]|=e),s&=~i}}var Q=0;function du(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uu,Zl,hu,mu,fu,Za=!1,Dn=[],Vt=null,qt=null,Ht=null,Yr=new Map,Xr=new Map,Ot=[],gf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sc(t,e){switch(t){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":qt=null;break;case"mouseover":case"mouseout":Ht=null;break;case"pointerover":case"pointerout":Yr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xr.delete(e.pointerId)}}function _r(t,e,s,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=yn(e),e!==null&&Zl(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function xf(t,e,s,n,i){switch(e){case"focusin":return Vt=_r(Vt,t,e,s,n,i),!0;case"dragenter":return qt=_r(qt,t,e,s,n,i),!0;case"mouseover":return Ht=_r(Ht,t,e,s,n,i),!0;case"pointerover":var a=i.pointerId;return Yr.set(a,_r(Yr.get(a)||null,t,e,s,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Xr.set(a,_r(Xr.get(a)||null,t,e,s,n,i)),!0}return!1}function pu(t){var e=hs(t.target);if(e!==null){var s=Cs(e);if(s!==null){if(e=s.tag,e===13){if(e=ru(s),e!==null){t.blockedOn=e,fu(t.priority,function(){hu(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gn(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=el(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);Ka=n,s.target.dispatchEvent(n),Ka=null}else return e=yn(s),e!==null&&Zl(e),t.blockedOn=s,!1;e.shift()}return!0}function rc(t,e,s){Gn(t)&&s.delete(e)}function yf(){Za=!1,Vt!==null&&Gn(Vt)&&(Vt=null),qt!==null&&Gn(qt)&&(qt=null),Ht!==null&&Gn(Ht)&&(Ht=null),Yr.forEach(rc),Xr.forEach(rc)}function kr(t,e){t.blockedOn===e&&(t.blockedOn=null,Za||(Za=!0,qe.unstable_scheduleCallback(qe.unstable_NormalPriority,yf)))}function Zr(t){function e(i){return kr(i,t)}if(0<Dn.length){kr(Dn[0],t);for(var s=1;s<Dn.length;s++){var n=Dn[s];n.blockedOn===t&&(n.blockedOn=null)}}for(Vt!==null&&kr(Vt,t),qt!==null&&kr(qt,t),Ht!==null&&kr(Ht,t),Yr.forEach(e),Xr.forEach(e),s=0;s<Ot.length;s++)n=Ot[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ot.length&&(s=Ot[0],s.blockedOn===null);)pu(s),s.blockedOn===null&&Ot.shift()}var nr=It.ReactCurrentBatchConfig,oi=!0;function vf(t,e,s,n){var i=Q,a=nr.transition;nr.transition=null;try{Q=1,eo(t,e,s,n)}finally{Q=i,nr.transition=a}}function bf(t,e,s,n){var i=Q,a=nr.transition;nr.transition=null;try{Q=4,eo(t,e,s,n)}finally{Q=i,nr.transition=a}}function eo(t,e,s,n){if(oi){var i=el(t,e,s,n);if(i===null)xa(t,e,n,ci,s),sc(t,n);else if(xf(i,t,e,s,n))n.stopPropagation();else if(sc(t,n),e&4&&-1<gf.indexOf(t)){for(;i!==null;){var a=yn(i);if(a!==null&&uu(a),a=el(t,e,s,n),a===null&&xa(t,e,n,ci,s),a===i)break;i=a}i!==null&&n.stopPropagation()}else xa(t,e,n,null,s)}}var ci=null;function el(t,e,s,n){if(ci=null,t=Ql(n),t=hs(t),t!==null)if(e=Cs(t),e===null)t=null;else if(s=e.tag,s===13){if(t=ru(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ci=t,null}function gu(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lf()){case Yl:return 1;case lu:return 4;case ai:case of:return 16;case ou:return 536870912;default:return 16}default:return 16}}var Ft=null,to=null,Kn=null;function xu(){if(Kn)return Kn;var t,e=to,s=e.length,n,i="value"in Ft?Ft.value:Ft.textContent,a=i.length;for(t=0;t<s&&e[t]===i[t];t++);var l=s-t;for(n=1;n<=l&&e[s-n]===i[a-n];n++);return Kn=i.slice(t,1<n?1-n:void 0)}function Jn(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Tn(){return!0}function nc(){return!1}function Ge(t){function e(s,n,i,a,l){this._reactName=s,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(s=t[c],this[c]=s?s(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Tn:nc,this.isPropagationStopped=nc,this}return ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Tn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Tn)},persist:function(){},isPersistent:Tn}),e}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},so=Ge(xr),xn=ae({},xr,{view:0,detail:0}),jf=Ge(xn),oa,ca,Sr,Ti=ae({},xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ro,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sr&&(Sr&&t.type==="mousemove"?(oa=t.screenX-Sr.screenX,ca=t.screenY-Sr.screenY):ca=oa=0,Sr=t),oa)},movementY:function(t){return"movementY"in t?t.movementY:ca}}),ic=Ge(Ti),wf=ae({},Ti,{dataTransfer:0}),Nf=Ge(wf),_f=ae({},xn,{relatedTarget:0}),da=Ge(_f),kf=ae({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),Sf=Ge(kf),Cf=ae({},xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Pf=Ge(Cf),Ef=ae({},xr,{data:0}),ac=Ge(Ef),If={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Df={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Af(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Tf[t])?!!e[t]:!1}function ro(){return Af}var Rf=ae({},xn,{key:function(t){if(t.key){var e=If[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Df[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ro,charCode:function(t){return t.type==="keypress"?Jn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$f=Ge(Rf),Lf=ae({},Ti,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lc=Ge(Lf),Of=ae({},xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ro}),Mf=Ge(Of),Uf=ae({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ff=Ge(Uf),zf=ae({},Ti,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Bf=Ge(zf),Vf=[9,13,27,32],no=_t&&"CompositionEvent"in window,Ur=null;_t&&"documentMode"in document&&(Ur=document.documentMode);var qf=_t&&"TextEvent"in window&&!Ur,yu=_t&&(!no||Ur&&8<Ur&&11>=Ur),oc=" ",cc=!1;function vu(t,e){switch(t){case"keyup":return Vf.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vs=!1;function Hf(t,e){switch(t){case"compositionend":return bu(e);case"keypress":return e.which!==32?null:(cc=!0,oc);case"textInput":return t=e.data,t===oc&&cc?null:t;default:return null}}function Wf(t,e){if(Vs)return t==="compositionend"||!no&&vu(t,e)?(t=xu(),Kn=to=Ft=null,Vs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yu&&e.locale!=="ko"?null:e.data;default:return null}}var Gf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Gf[t.type]:e==="textarea"}function ju(t,e,s,n){Xd(n),e=di(e,"onChange"),0<e.length&&(s=new so("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var Fr=null,en=null;function Kf(t){Tu(t,0)}function Ai(t){var e=Ws(t);if(Hd(e))return t}function Jf(t,e){if(t==="change")return e}var wu=!1;if(_t){var ua;if(_t){var ha="oninput"in document;if(!ha){var uc=document.createElement("div");uc.setAttribute("oninput","return;"),ha=typeof uc.oninput=="function"}ua=ha}else ua=!1;wu=ua&&(!document.documentMode||9<document.documentMode)}function hc(){Fr&&(Fr.detachEvent("onpropertychange",Nu),en=Fr=null)}function Nu(t){if(t.propertyName==="value"&&Ai(en)){var e=[];ju(e,en,t,Ql(t)),su(Kf,e)}}function Qf(t,e,s){t==="focusin"?(hc(),Fr=e,en=s,Fr.attachEvent("onpropertychange",Nu)):t==="focusout"&&hc()}function Yf(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ai(en)}function Xf(t,e){if(t==="click")return Ai(e)}function Zf(t,e){if(t==="input"||t==="change")return Ai(e)}function e0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ct=typeof Object.is=="function"?Object.is:e0;function tn(t,e){if(ct(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var i=s[n];if(!La.call(e,i)||!ct(t[i],e[i]))return!1}return!0}function mc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fc(t,e){var s=mc(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=mc(s)}}function _u(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_u(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ku(){for(var t=window,e=ri();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=ri(t.document)}return e}function io(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function t0(t){var e=ku(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&_u(s.ownerDocument.documentElement,s)){if(n!==null&&io(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=s.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=fc(s,a);var l=fc(s,n);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var s0=_t&&"documentMode"in document&&11>=document.documentMode,qs=null,tl=null,zr=null,sl=!1;function pc(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;sl||qs==null||qs!==ri(n)||(n=qs,"selectionStart"in n&&io(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),zr&&tn(zr,n)||(zr=n,n=di(tl,"onSelect"),0<n.length&&(e=new so("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=qs)))}function An(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var Hs={animationend:An("Animation","AnimationEnd"),animationiteration:An("Animation","AnimationIteration"),animationstart:An("Animation","AnimationStart"),transitionend:An("Transition","TransitionEnd")},ma={},Su={};_t&&(Su=document.createElement("div").style,"AnimationEvent"in window||(delete Hs.animationend.animation,delete Hs.animationiteration.animation,delete Hs.animationstart.animation),"TransitionEvent"in window||delete Hs.transitionend.transition);function Ri(t){if(ma[t])return ma[t];if(!Hs[t])return t;var e=Hs[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in Su)return ma[t]=e[s];return t}var Cu=Ri("animationend"),Pu=Ri("animationiteration"),Eu=Ri("animationstart"),Iu=Ri("transitionend"),Du=new Map,gc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function es(t,e){Du.set(t,e),Ss(e,[t])}for(var fa=0;fa<gc.length;fa++){var pa=gc[fa],r0=pa.toLowerCase(),n0=pa[0].toUpperCase()+pa.slice(1);es(r0,"on"+n0)}es(Cu,"onAnimationEnd");es(Pu,"onAnimationIteration");es(Eu,"onAnimationStart");es("dblclick","onDoubleClick");es("focusin","onFocus");es("focusout","onBlur");es(Iu,"onTransitionEnd");lr("onMouseEnter",["mouseout","mouseover"]);lr("onMouseLeave",["mouseout","mouseover"]);lr("onPointerEnter",["pointerout","pointerover"]);lr("onPointerLeave",["pointerout","pointerover"]);Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i0=new Set("cancel close invalid load scroll toggle".split(" ").concat($r));function xc(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,sf(n,e,void 0,t),t.currentTarget=null}function Tu(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var l=n.length-1;0<=l;l--){var c=n[l],o=c.instance,d=c.currentTarget;if(c=c.listener,o!==a&&i.isPropagationStopped())break e;xc(i,c,d),a=o}else for(l=0;l<n.length;l++){if(c=n[l],o=c.instance,d=c.currentTarget,c=c.listener,o!==a&&i.isPropagationStopped())break e;xc(i,c,d),a=o}}}if(ii)throw t=Ya,ii=!1,Ya=null,t}function ee(t,e){var s=e[ll];s===void 0&&(s=e[ll]=new Set);var n=t+"__bubble";s.has(n)||(Au(e,t,2,!1),s.add(n))}function ga(t,e,s){var n=0;e&&(n|=4),Au(s,t,n,e)}var Rn="_reactListening"+Math.random().toString(36).slice(2);function sn(t){if(!t[Rn]){t[Rn]=!0,Fd.forEach(function(s){s!=="selectionchange"&&(i0.has(s)||ga(s,!1,t),ga(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rn]||(e[Rn]=!0,ga("selectionchange",!1,e))}}function Au(t,e,s,n){switch(gu(e)){case 1:var i=vf;break;case 4:i=bf;break;default:i=eo}s=i.bind(null,e,s,t),i=void 0,!Qa||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,s,{capture:!0,passive:i}):t.addEventListener(e,s,!0):i!==void 0?t.addEventListener(e,s,{passive:i}):t.addEventListener(e,s,!1)}function xa(t,e,s,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var c=n.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(l===4)for(l=n.return;l!==null;){var o=l.tag;if((o===3||o===4)&&(o=l.stateNode.containerInfo,o===i||o.nodeType===8&&o.parentNode===i))return;l=l.return}for(;c!==null;){if(l=hs(c),l===null)return;if(o=l.tag,o===5||o===6){n=a=l;continue e}c=c.parentNode}}n=n.return}su(function(){var d=a,u=Ql(s),p=[];e:{var x=Du.get(t);if(x!==void 0){var y=so,b=t;switch(t){case"keypress":if(Jn(s)===0)break e;case"keydown":case"keyup":y=$f;break;case"focusin":b="focus",y=da;break;case"focusout":b="blur",y=da;break;case"beforeblur":case"afterblur":y=da;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Nf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Mf;break;case Cu:case Pu:case Eu:y=Sf;break;case Iu:y=Ff;break;case"scroll":y=jf;break;case"wheel":y=Bf;break;case"copy":case"cut":case"paste":y=Pf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=lc}var N=(e&4)!==0,v=!N&&t==="scroll",m=N?x!==null?x+"Capture":null:x;N=[];for(var h=d,f;h!==null;){f=h;var g=f.stateNode;if(f.tag===5&&g!==null&&(f=g,m!==null&&(g=Qr(h,m),g!=null&&N.push(rn(h,g,f)))),v)break;h=h.return}0<N.length&&(x=new y(x,b,null,s,u),p.push({event:x,listeners:N}))}}if(!(e&7)){e:{if(x=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",x&&s!==Ka&&(b=s.relatedTarget||s.fromElement)&&(hs(b)||b[kt]))break e;if((y||x)&&(x=u.window===u?u:(x=u.ownerDocument)?x.defaultView||x.parentWindow:window,y?(b=s.relatedTarget||s.toElement,y=d,b=b?hs(b):null,b!==null&&(v=Cs(b),b!==v||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=d),y!==b)){if(N=ic,g="onMouseLeave",m="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(N=lc,g="onPointerLeave",m="onPointerEnter",h="pointer"),v=y==null?x:Ws(y),f=b==null?x:Ws(b),x=new N(g,h+"leave",y,s,u),x.target=v,x.relatedTarget=f,g=null,hs(u)===d&&(N=new N(m,h+"enter",b,s,u),N.target=f,N.relatedTarget=v,g=N),v=g,y&&b)t:{for(N=y,m=b,h=0,f=N;f;f=Ts(f))h++;for(f=0,g=m;g;g=Ts(g))f++;for(;0<h-f;)N=Ts(N),h--;for(;0<f-h;)m=Ts(m),f--;for(;h--;){if(N===m||m!==null&&N===m.alternate)break t;N=Ts(N),m=Ts(m)}N=null}else N=null;y!==null&&yc(p,x,y,N,!1),b!==null&&v!==null&&yc(p,v,b,N,!0)}}e:{if(x=d?Ws(d):window,y=x.nodeName&&x.nodeName.toLowerCase(),y==="select"||y==="input"&&x.type==="file")var w=Jf;else if(dc(x))if(wu)w=Zf;else{w=Yf;var j=Qf}else(y=x.nodeName)&&y.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(w=Xf);if(w&&(w=w(t,d))){ju(p,w,s,u);break e}j&&j(t,x,d),t==="focusout"&&(j=x._wrapperState)&&j.controlled&&x.type==="number"&&Va(x,"number",x.value)}switch(j=d?Ws(d):window,t){case"focusin":(dc(j)||j.contentEditable==="true")&&(qs=j,tl=d,zr=null);break;case"focusout":zr=tl=qs=null;break;case"mousedown":sl=!0;break;case"contextmenu":case"mouseup":case"dragend":sl=!1,pc(p,s,u);break;case"selectionchange":if(s0)break;case"keydown":case"keyup":pc(p,s,u)}var _;if(no)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Vs?vu(t,s)&&(k="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(k="onCompositionStart");k&&(yu&&s.locale!=="ko"&&(Vs||k!=="onCompositionStart"?k==="onCompositionEnd"&&Vs&&(_=xu()):(Ft=u,to="value"in Ft?Ft.value:Ft.textContent,Vs=!0)),j=di(d,k),0<j.length&&(k=new ac(k,t,null,s,u),p.push({event:k,listeners:j}),_?k.data=_:(_=bu(s),_!==null&&(k.data=_)))),(_=qf?Hf(t,s):Wf(t,s))&&(d=di(d,"onBeforeInput"),0<d.length&&(u=new ac("onBeforeInput","beforeinput",null,s,u),p.push({event:u,listeners:d}),u.data=_))}Tu(p,e)})}function rn(t,e,s){return{instance:t,listener:e,currentTarget:s}}function di(t,e){for(var s=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Qr(t,s),a!=null&&n.unshift(rn(t,a,i)),a=Qr(t,e),a!=null&&n.push(rn(t,a,i))),t=t.return}return n}function Ts(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function yc(t,e,s,n,i){for(var a=e._reactName,l=[];s!==null&&s!==n;){var c=s,o=c.alternate,d=c.stateNode;if(o!==null&&o===n)break;c.tag===5&&d!==null&&(c=d,i?(o=Qr(s,a),o!=null&&l.unshift(rn(s,o,c))):i||(o=Qr(s,a),o!=null&&l.push(rn(s,o,c)))),s=s.return}l.length!==0&&t.push({event:e,listeners:l})}var a0=/\r\n?/g,l0=/\u0000|\uFFFD/g;function vc(t){return(typeof t=="string"?t:""+t).replace(a0,`
`).replace(l0,"")}function $n(t,e,s){if(e=vc(e),vc(t)!==e&&s)throw Error(R(425))}function ui(){}var rl=null,nl=null;function il(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var al=typeof setTimeout=="function"?setTimeout:void 0,o0=typeof clearTimeout=="function"?clearTimeout:void 0,bc=typeof Promise=="function"?Promise:void 0,c0=typeof queueMicrotask=="function"?queueMicrotask:typeof bc<"u"?function(t){return bc.resolve(null).then(t).catch(d0)}:al;function d0(t){setTimeout(function(){throw t})}function ya(t,e){var s=e,n=0;do{var i=s.nextSibling;if(t.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(n===0){t.removeChild(i),Zr(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=i}while(s);Zr(e)}function Wt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var yr=Math.random().toString(36).slice(2),ht="__reactFiber$"+yr,nn="__reactProps$"+yr,kt="__reactContainer$"+yr,ll="__reactEvents$"+yr,u0="__reactListeners$"+yr,h0="__reactHandles$"+yr;function hs(t){var e=t[ht];if(e)return e;for(var s=t.parentNode;s;){if(e=s[kt]||s[ht]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=jc(t);t!==null;){if(s=t[ht])return s;t=jc(t)}return e}t=s,s=t.parentNode}return null}function yn(t){return t=t[ht]||t[kt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ws(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function $i(t){return t[nn]||null}var ol=[],Gs=-1;function ts(t){return{current:t}}function te(t){0>Gs||(t.current=ol[Gs],ol[Gs]=null,Gs--)}function Z(t,e){Gs++,ol[Gs]=t.current,t.current=e}var Xt={},Ce=ts(Xt),Le=ts(!1),ys=Xt;function or(t,e){var s=t.type.contextTypes;if(!s)return Xt;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in s)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Oe(t){return t=t.childContextTypes,t!=null}function hi(){te(Le),te(Ce)}function wc(t,e,s){if(Ce.current!==Xt)throw Error(R(168));Z(Ce,e),Z(Le,s)}function Ru(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(R(108,Jm(t)||"Unknown",i));return ae({},s,n)}function mi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xt,ys=Ce.current,Z(Ce,t),Z(Le,Le.current),!0}function Nc(t,e,s){var n=t.stateNode;if(!n)throw Error(R(169));s?(t=Ru(t,e,ys),n.__reactInternalMemoizedMergedChildContext=t,te(Le),te(Ce),Z(Ce,t)):te(Le),Z(Le,s)}var vt=null,Li=!1,va=!1;function $u(t){vt===null?vt=[t]:vt.push(t)}function m0(t){Li=!0,$u(t)}function ss(){if(!va&&vt!==null){va=!0;var t=0,e=Q;try{var s=vt;for(Q=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}vt=null,Li=!1}catch(i){throw vt!==null&&(vt=vt.slice(t+1)),au(Yl,ss),i}finally{Q=e,va=!1}}return null}var Ks=[],Js=0,fi=null,pi=0,Ke=[],Je=0,vs=null,bt=1,jt="";function as(t,e){Ks[Js++]=pi,Ks[Js++]=fi,fi=t,pi=e}function Lu(t,e,s){Ke[Je++]=bt,Ke[Je++]=jt,Ke[Je++]=vs,vs=t;var n=bt;t=jt;var i=32-lt(n)-1;n&=~(1<<i),s+=1;var a=32-lt(e)+i;if(30<a){var l=i-i%5;a=(n&(1<<l)-1).toString(32),n>>=l,i-=l,bt=1<<32-lt(e)+i|s<<i|n,jt=a+t}else bt=1<<a|s<<i|n,jt=t}function ao(t){t.return!==null&&(as(t,1),Lu(t,1,0))}function lo(t){for(;t===fi;)fi=Ks[--Js],Ks[Js]=null,pi=Ks[--Js],Ks[Js]=null;for(;t===vs;)vs=Ke[--Je],Ke[Je]=null,jt=Ke[--Je],Ke[Je]=null,bt=Ke[--Je],Ke[Je]=null}var Be=null,Fe=null,se=!1,at=null;function Ou(t,e){var s=Qe(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function _c(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Be=t,Fe=Wt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Be=t,Fe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=vs!==null?{id:bt,overflow:jt}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Qe(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Be=t,Fe=null,!0):!1;default:return!1}}function cl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dl(t){if(se){var e=Fe;if(e){var s=e;if(!_c(t,e)){if(cl(t))throw Error(R(418));e=Wt(s.nextSibling);var n=Be;e&&_c(t,e)?Ou(n,s):(t.flags=t.flags&-4097|2,se=!1,Be=t)}}else{if(cl(t))throw Error(R(418));t.flags=t.flags&-4097|2,se=!1,Be=t}}}function kc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Be=t}function Ln(t){if(t!==Be)return!1;if(!se)return kc(t),se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!il(t.type,t.memoizedProps)),e&&(e=Fe)){if(cl(t))throw Mu(),Error(R(418));for(;e;)Ou(t,e),e=Wt(e.nextSibling)}if(kc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){Fe=Wt(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}Fe=null}}else Fe=Be?Wt(t.stateNode.nextSibling):null;return!0}function Mu(){for(var t=Fe;t;)t=Wt(t.nextSibling)}function cr(){Fe=Be=null,se=!1}function oo(t){at===null?at=[t]:at.push(t)}var f0=It.ReactCurrentBatchConfig;function Cr(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(R(309));var n=s.stateNode}if(!n)throw Error(R(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var c=i.refs;l===null?delete c[a]:c[a]=l},e._stringRef=a,e)}if(typeof t!="string")throw Error(R(284));if(!s._owner)throw Error(R(290,t))}return t}function On(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Sc(t){var e=t._init;return e(t._payload)}function Uu(t){function e(m,h){if(t){var f=m.deletions;f===null?(m.deletions=[h],m.flags|=16):f.push(h)}}function s(m,h){if(!t)return null;for(;h!==null;)e(m,h),h=h.sibling;return null}function n(m,h){for(m=new Map;h!==null;)h.key!==null?m.set(h.key,h):m.set(h.index,h),h=h.sibling;return m}function i(m,h){return m=Qt(m,h),m.index=0,m.sibling=null,m}function a(m,h,f){return m.index=f,t?(f=m.alternate,f!==null?(f=f.index,f<h?(m.flags|=2,h):f):(m.flags|=2,h)):(m.flags|=1048576,h)}function l(m){return t&&m.alternate===null&&(m.flags|=2),m}function c(m,h,f,g){return h===null||h.tag!==6?(h=Sa(f,m.mode,g),h.return=m,h):(h=i(h,f),h.return=m,h)}function o(m,h,f,g){var w=f.type;return w===Bs?u(m,h,f.props.children,g,f.key):h!==null&&(h.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Rt&&Sc(w)===h.type)?(g=i(h,f.props),g.ref=Cr(m,h,f),g.return=m,g):(g=si(f.type,f.key,f.props,null,m.mode,g),g.ref=Cr(m,h,f),g.return=m,g)}function d(m,h,f,g){return h===null||h.tag!==4||h.stateNode.containerInfo!==f.containerInfo||h.stateNode.implementation!==f.implementation?(h=Ca(f,m.mode,g),h.return=m,h):(h=i(h,f.children||[]),h.return=m,h)}function u(m,h,f,g,w){return h===null||h.tag!==7?(h=gs(f,m.mode,g,w),h.return=m,h):(h=i(h,f),h.return=m,h)}function p(m,h,f){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Sa(""+h,m.mode,f),h.return=m,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Sn:return f=si(h.type,h.key,h.props,null,m.mode,f),f.ref=Cr(m,null,h),f.return=m,f;case zs:return h=Ca(h,m.mode,f),h.return=m,h;case Rt:var g=h._init;return p(m,g(h._payload),f)}if(Ar(h)||wr(h))return h=gs(h,m.mode,f,null),h.return=m,h;On(m,h)}return null}function x(m,h,f,g){var w=h!==null?h.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return w!==null?null:c(m,h,""+f,g);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Sn:return f.key===w?o(m,h,f,g):null;case zs:return f.key===w?d(m,h,f,g):null;case Rt:return w=f._init,x(m,h,w(f._payload),g)}if(Ar(f)||wr(f))return w!==null?null:u(m,h,f,g,null);On(m,f)}return null}function y(m,h,f,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return m=m.get(f)||null,c(h,m,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Sn:return m=m.get(g.key===null?f:g.key)||null,o(h,m,g,w);case zs:return m=m.get(g.key===null?f:g.key)||null,d(h,m,g,w);case Rt:var j=g._init;return y(m,h,f,j(g._payload),w)}if(Ar(g)||wr(g))return m=m.get(f)||null,u(h,m,g,w,null);On(h,g)}return null}function b(m,h,f,g){for(var w=null,j=null,_=h,k=h=0,E=null;_!==null&&k<f.length;k++){_.index>k?(E=_,_=null):E=_.sibling;var D=x(m,_,f[k],g);if(D===null){_===null&&(_=E);break}t&&_&&D.alternate===null&&e(m,_),h=a(D,h,k),j===null?w=D:j.sibling=D,j=D,_=E}if(k===f.length)return s(m,_),se&&as(m,k),w;if(_===null){for(;k<f.length;k++)_=p(m,f[k],g),_!==null&&(h=a(_,h,k),j===null?w=_:j.sibling=_,j=_);return se&&as(m,k),w}for(_=n(m,_);k<f.length;k++)E=y(_,m,k,f[k],g),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?k:E.key),h=a(E,h,k),j===null?w=E:j.sibling=E,j=E);return t&&_.forEach(function(F){return e(m,F)}),se&&as(m,k),w}function N(m,h,f,g){var w=wr(f);if(typeof w!="function")throw Error(R(150));if(f=w.call(f),f==null)throw Error(R(151));for(var j=w=null,_=h,k=h=0,E=null,D=f.next();_!==null&&!D.done;k++,D=f.next()){_.index>k?(E=_,_=null):E=_.sibling;var F=x(m,_,D.value,g);if(F===null){_===null&&(_=E);break}t&&_&&F.alternate===null&&e(m,_),h=a(F,h,k),j===null?w=F:j.sibling=F,j=F,_=E}if(D.done)return s(m,_),se&&as(m,k),w;if(_===null){for(;!D.done;k++,D=f.next())D=p(m,D.value,g),D!==null&&(h=a(D,h,k),j===null?w=D:j.sibling=D,j=D);return se&&as(m,k),w}for(_=n(m,_);!D.done;k++,D=f.next())D=y(_,m,k,D.value,g),D!==null&&(t&&D.alternate!==null&&_.delete(D.key===null?k:D.key),h=a(D,h,k),j===null?w=D:j.sibling=D,j=D);return t&&_.forEach(function(W){return e(m,W)}),se&&as(m,k),w}function v(m,h,f,g){if(typeof f=="object"&&f!==null&&f.type===Bs&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Sn:e:{for(var w=f.key,j=h;j!==null;){if(j.key===w){if(w=f.type,w===Bs){if(j.tag===7){s(m,j.sibling),h=i(j,f.props.children),h.return=m,m=h;break e}}else if(j.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Rt&&Sc(w)===j.type){s(m,j.sibling),h=i(j,f.props),h.ref=Cr(m,j,f),h.return=m,m=h;break e}s(m,j);break}else e(m,j);j=j.sibling}f.type===Bs?(h=gs(f.props.children,m.mode,g,f.key),h.return=m,m=h):(g=si(f.type,f.key,f.props,null,m.mode,g),g.ref=Cr(m,h,f),g.return=m,m=g)}return l(m);case zs:e:{for(j=f.key;h!==null;){if(h.key===j)if(h.tag===4&&h.stateNode.containerInfo===f.containerInfo&&h.stateNode.implementation===f.implementation){s(m,h.sibling),h=i(h,f.children||[]),h.return=m,m=h;break e}else{s(m,h);break}else e(m,h);h=h.sibling}h=Ca(f,m.mode,g),h.return=m,m=h}return l(m);case Rt:return j=f._init,v(m,h,j(f._payload),g)}if(Ar(f))return b(m,h,f,g);if(wr(f))return N(m,h,f,g);On(m,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,h!==null&&h.tag===6?(s(m,h.sibling),h=i(h,f),h.return=m,m=h):(s(m,h),h=Sa(f,m.mode,g),h.return=m,m=h),l(m)):s(m,h)}return v}var dr=Uu(!0),Fu=Uu(!1),gi=ts(null),xi=null,Qs=null,co=null;function uo(){co=Qs=xi=null}function ho(t){var e=gi.current;te(gi),t._currentValue=e}function ul(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function ir(t,e){xi=t,co=Qs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($e=!0),t.firstContext=null)}function Ze(t){var e=t._currentValue;if(co!==t)if(t={context:t,memoizedValue:e,next:null},Qs===null){if(xi===null)throw Error(R(308));Qs=t,xi.dependencies={lanes:0,firstContext:t}}else Qs=Qs.next=t;return e}var ms=null;function mo(t){ms===null?ms=[t]:ms.push(t)}function zu(t,e,s,n){var i=e.interleaved;return i===null?(s.next=s,mo(e)):(s.next=i.next,i.next=s),e.interleaved=s,St(t,n)}function St(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var $t=!1;function fo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bu(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gt(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,J&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,St(t,s)}return i=n.interleaved,i===null?(e.next=e,mo(n)):(e.next=i.next,i.next=e),n.interleaved=e,St(t,s)}function Qn(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Xl(t,s)}}function Cc(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var i=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?i=a=l:a=a.next=l,s=s.next}while(s!==null);a===null?i=a=e:a=a.next=e}else i=a=e;s={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function yi(t,e,s,n){var i=t.updateQueue;$t=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var o=c,d=o.next;o.next=null,l===null?a=d:l.next=d,l=o;var u=t.alternate;u!==null&&(u=u.updateQueue,c=u.lastBaseUpdate,c!==l&&(c===null?u.firstBaseUpdate=d:c.next=d,u.lastBaseUpdate=o))}if(a!==null){var p=i.baseState;l=0,u=d=o=null,c=a;do{var x=c.lane,y=c.eventTime;if((n&x)===x){u!==null&&(u=u.next={eventTime:y,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var b=t,N=c;switch(x=e,y=s,N.tag){case 1:if(b=N.payload,typeof b=="function"){p=b.call(y,p,x);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=N.payload,x=typeof b=="function"?b.call(y,p,x):b,x==null)break e;p=ae({},p,x);break e;case 2:$t=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,x=i.effects,x===null?i.effects=[c]:x.push(c))}else y={eventTime:y,lane:x,tag:c.tag,payload:c.payload,callback:c.callback,next:null},u===null?(d=u=y,o=p):u=u.next=y,l|=x;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;x=c,c=x.next,x.next=null,i.lastBaseUpdate=x,i.shared.pending=null}}while(!0);if(u===null&&(o=p),i.baseState=o,i.firstBaseUpdate=d,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);js|=l,t.lanes=l,t.memoizedState=p}}function Pc(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=s,typeof i!="function")throw Error(R(191,i));i.call(n)}}}var vn={},ft=ts(vn),an=ts(vn),ln=ts(vn);function fs(t){if(t===vn)throw Error(R(174));return t}function po(t,e){switch(Z(ln,e),Z(an,t),Z(ft,vn),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ha(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ha(e,t)}te(ft),Z(ft,e)}function ur(){te(ft),te(an),te(ln)}function Vu(t){fs(ln.current);var e=fs(ft.current),s=Ha(e,t.type);e!==s&&(Z(an,t),Z(ft,s))}function go(t){an.current===t&&(te(ft),te(an))}var ne=ts(0);function vi(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ba=[];function xo(){for(var t=0;t<ba.length;t++)ba[t]._workInProgressVersionPrimary=null;ba.length=0}var Yn=It.ReactCurrentDispatcher,ja=It.ReactCurrentBatchConfig,bs=0,ie=null,ue=null,ge=null,bi=!1,Br=!1,on=0,p0=0;function we(){throw Error(R(321))}function yo(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!ct(t[s],e[s]))return!1;return!0}function vo(t,e,s,n,i,a){if(bs=a,ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yn.current=t===null||t.memoizedState===null?v0:b0,t=s(n,i),Br){a=0;do{if(Br=!1,on=0,25<=a)throw Error(R(301));a+=1,ge=ue=null,e.updateQueue=null,Yn.current=j0,t=s(n,i)}while(Br)}if(Yn.current=ji,e=ue!==null&&ue.next!==null,bs=0,ge=ue=ie=null,bi=!1,e)throw Error(R(300));return t}function bo(){var t=on!==0;return on=0,t}function ut(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ge===null?ie.memoizedState=ge=t:ge=ge.next=t,ge}function et(){if(ue===null){var t=ie.alternate;t=t!==null?t.memoizedState:null}else t=ue.next;var e=ge===null?ie.memoizedState:ge.next;if(e!==null)ge=e,ue=t;else{if(t===null)throw Error(R(310));ue=t,t={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},ge===null?ie.memoizedState=ge=t:ge=ge.next=t}return ge}function cn(t,e){return typeof e=="function"?e(t):e}function wa(t){var e=et(),s=e.queue;if(s===null)throw Error(R(311));s.lastRenderedReducer=t;var n=ue,i=n.baseQueue,a=s.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}n.baseQueue=i=a,s.pending=null}if(i!==null){a=i.next,n=n.baseState;var c=l=null,o=null,d=a;do{var u=d.lane;if((bs&u)===u)o!==null&&(o=o.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var p={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};o===null?(c=o=p,l=n):o=o.next=p,ie.lanes|=u,js|=u}d=d.next}while(d!==null&&d!==a);o===null?l=n:o.next=c,ct(n,e.memoizedState)||($e=!0),e.memoizedState=n,e.baseState=l,e.baseQueue=o,s.lastRenderedState=n}if(t=s.interleaved,t!==null){i=t;do a=i.lane,ie.lanes|=a,js|=a,i=i.next;while(i!==t)}else i===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Na(t){var e=et(),s=e.queue;if(s===null)throw Error(R(311));s.lastRenderedReducer=t;var n=s.dispatch,i=s.pending,a=e.memoizedState;if(i!==null){s.pending=null;var l=i=i.next;do a=t(a,l.action),l=l.next;while(l!==i);ct(a,e.memoizedState)||($e=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),s.lastRenderedState=a}return[a,n]}function qu(){}function Hu(t,e){var s=ie,n=et(),i=e(),a=!ct(n.memoizedState,i);if(a&&(n.memoizedState=i,$e=!0),n=n.queue,jo(Ku.bind(null,s,n,t),[t]),n.getSnapshot!==e||a||ge!==null&&ge.memoizedState.tag&1){if(s.flags|=2048,dn(9,Gu.bind(null,s,n,i,e),void 0,null),xe===null)throw Error(R(349));bs&30||Wu(s,e,i)}return i}function Wu(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function Gu(t,e,s,n){e.value=s,e.getSnapshot=n,Ju(e)&&Qu(t)}function Ku(t,e,s){return s(function(){Ju(e)&&Qu(t)})}function Ju(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!ct(t,s)}catch{return!0}}function Qu(t){var e=St(t,1);e!==null&&ot(e,t,1,-1)}function Ec(t){var e=ut();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:t},e.queue=t,t=t.dispatch=y0.bind(null,ie,t),[e.memoizedState,t]}function dn(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function Yu(){return et().memoizedState}function Xn(t,e,s,n){var i=ut();ie.flags|=t,i.memoizedState=dn(1|e,s,void 0,n===void 0?null:n)}function Oi(t,e,s,n){var i=et();n=n===void 0?null:n;var a=void 0;if(ue!==null){var l=ue.memoizedState;if(a=l.destroy,n!==null&&yo(n,l.deps)){i.memoizedState=dn(e,s,a,n);return}}ie.flags|=t,i.memoizedState=dn(1|e,s,a,n)}function Ic(t,e){return Xn(8390656,8,t,e)}function jo(t,e){return Oi(2048,8,t,e)}function Xu(t,e){return Oi(4,2,t,e)}function Zu(t,e){return Oi(4,4,t,e)}function eh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function th(t,e,s){return s=s!=null?s.concat([t]):null,Oi(4,4,eh.bind(null,e,t),s)}function wo(){}function sh(t,e){var s=et();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&yo(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function rh(t,e){var s=et();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&yo(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function nh(t,e,s){return bs&21?(ct(s,e)||(s=cu(),ie.lanes|=s,js|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$e=!0),t.memoizedState=s)}function g0(t,e){var s=Q;Q=s!==0&&4>s?s:4,t(!0);var n=ja.transition;ja.transition={};try{t(!1),e()}finally{Q=s,ja.transition=n}}function ih(){return et().memoizedState}function x0(t,e,s){var n=Jt(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},ah(t))lh(e,s);else if(s=zu(t,e,s,n),s!==null){var i=Ee();ot(s,t,n,i),oh(s,e,n)}}function y0(t,e,s){var n=Jt(t),i={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(ah(t))lh(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,c=a(l,s);if(i.hasEagerState=!0,i.eagerState=c,ct(c,l)){var o=e.interleaved;o===null?(i.next=i,mo(e)):(i.next=o.next,o.next=i),e.interleaved=i;return}}catch{}finally{}s=zu(t,e,i,n),s!==null&&(i=Ee(),ot(s,t,n,i),oh(s,e,n))}}function ah(t){var e=t.alternate;return t===ie||e!==null&&e===ie}function lh(t,e){Br=bi=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function oh(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Xl(t,s)}}var ji={readContext:Ze,useCallback:we,useContext:we,useEffect:we,useImperativeHandle:we,useInsertionEffect:we,useLayoutEffect:we,useMemo:we,useReducer:we,useRef:we,useState:we,useDebugValue:we,useDeferredValue:we,useTransition:we,useMutableSource:we,useSyncExternalStore:we,useId:we,unstable_isNewReconciler:!1},v0={readContext:Ze,useCallback:function(t,e){return ut().memoizedState=[t,e===void 0?null:e],t},useContext:Ze,useEffect:Ic,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Xn(4194308,4,eh.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Xn(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xn(4,2,t,e)},useMemo:function(t,e){var s=ut();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=ut();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=x0.bind(null,ie,t),[n.memoizedState,t]},useRef:function(t){var e=ut();return t={current:t},e.memoizedState=t},useState:Ec,useDebugValue:wo,useDeferredValue:function(t){return ut().memoizedState=t},useTransition:function(){var t=Ec(!1),e=t[0];return t=g0.bind(null,t[1]),ut().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=ie,i=ut();if(se){if(s===void 0)throw Error(R(407));s=s()}else{if(s=e(),xe===null)throw Error(R(349));bs&30||Wu(n,e,s)}i.memoizedState=s;var a={value:s,getSnapshot:e};return i.queue=a,Ic(Ku.bind(null,n,a,t),[t]),n.flags|=2048,dn(9,Gu.bind(null,n,a,s,e),void 0,null),s},useId:function(){var t=ut(),e=xe.identifierPrefix;if(se){var s=jt,n=bt;s=(n&~(1<<32-lt(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=on++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=p0++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},b0={readContext:Ze,useCallback:sh,useContext:Ze,useEffect:jo,useImperativeHandle:th,useInsertionEffect:Xu,useLayoutEffect:Zu,useMemo:rh,useReducer:wa,useRef:Yu,useState:function(){return wa(cn)},useDebugValue:wo,useDeferredValue:function(t){var e=et();return nh(e,ue.memoizedState,t)},useTransition:function(){var t=wa(cn)[0],e=et().memoizedState;return[t,e]},useMutableSource:qu,useSyncExternalStore:Hu,useId:ih,unstable_isNewReconciler:!1},j0={readContext:Ze,useCallback:sh,useContext:Ze,useEffect:jo,useImperativeHandle:th,useInsertionEffect:Xu,useLayoutEffect:Zu,useMemo:rh,useReducer:Na,useRef:Yu,useState:function(){return Na(cn)},useDebugValue:wo,useDeferredValue:function(t){var e=et();return ue===null?e.memoizedState=t:nh(e,ue.memoizedState,t)},useTransition:function(){var t=Na(cn)[0],e=et().memoizedState;return[t,e]},useMutableSource:qu,useSyncExternalStore:Hu,useId:ih,unstable_isNewReconciler:!1};function rt(t,e){if(t&&t.defaultProps){e=ae({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function hl(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:ae({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Mi={isMounted:function(t){return(t=t._reactInternals)?Cs(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=Ee(),i=Jt(t),a=Nt(n,i);a.payload=e,s!=null&&(a.callback=s),e=Gt(t,a,i),e!==null&&(ot(e,t,i,n),Qn(e,t,i))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=Ee(),i=Jt(t),a=Nt(n,i);a.tag=1,a.payload=e,s!=null&&(a.callback=s),e=Gt(t,a,i),e!==null&&(ot(e,t,i,n),Qn(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=Ee(),n=Jt(t),i=Nt(s,n);i.tag=2,e!=null&&(i.callback=e),e=Gt(t,i,n),e!==null&&(ot(e,t,n,s),Qn(e,t,n))}};function Dc(t,e,s,n,i,a,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,l):e.prototype&&e.prototype.isPureReactComponent?!tn(s,n)||!tn(i,a):!0}function ch(t,e,s){var n=!1,i=Xt,a=e.contextType;return typeof a=="object"&&a!==null?a=Ze(a):(i=Oe(e)?ys:Ce.current,n=e.contextTypes,a=(n=n!=null)?or(t,i):Xt),e=new e(s,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Mi,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Tc(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&Mi.enqueueReplaceState(e,e.state,null)}function ml(t,e,s,n){var i=t.stateNode;i.props=s,i.state=t.memoizedState,i.refs={},fo(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Ze(a):(a=Oe(e)?ys:Ce.current,i.context=or(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(hl(t,e,a,s),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Mi.enqueueReplaceState(i,i.state,null),yi(t,s,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function hr(t,e){try{var s="",n=e;do s+=Km(n),n=n.return;while(n);var i=s}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function _a(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function fl(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var w0=typeof WeakMap=="function"?WeakMap:Map;function dh(t,e,s){s=Nt(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){Ni||(Ni=!0,_l=n),fl(t,e)},s}function uh(t,e,s){s=Nt(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;s.payload=function(){return n(i)},s.callback=function(){fl(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){fl(t,e),typeof n!="function"&&(Kt===null?Kt=new Set([this]):Kt.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),s}function Ac(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new w0;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(s)||(i.add(s),t=L0.bind(null,t,e,s),e.then(t,t))}function Rc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $c(t,e,s,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=Nt(-1,1),e.tag=2,Gt(s,e,1))),s.lanes|=1),t)}var N0=It.ReactCurrentOwner,$e=!1;function Pe(t,e,s,n){e.child=t===null?Fu(e,null,s,n):dr(e,t.child,s,n)}function Lc(t,e,s,n,i){s=s.render;var a=e.ref;return ir(e,i),n=vo(t,e,s,n,a,i),s=bo(),t!==null&&!$e?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ct(t,e,i)):(se&&s&&ao(e),e.flags|=1,Pe(t,e,n,i),e.child)}function Oc(t,e,s,n,i){if(t===null){var a=s.type;return typeof a=="function"&&!Io(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=a,hh(t,e,a,n,i)):(t=si(s.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var l=a.memoizedProps;if(s=s.compare,s=s!==null?s:tn,s(l,n)&&t.ref===e.ref)return Ct(t,e,i)}return e.flags|=1,t=Qt(a,n),t.ref=e.ref,t.return=e,e.child=t}function hh(t,e,s,n,i){if(t!==null){var a=t.memoizedProps;if(tn(a,n)&&t.ref===e.ref)if($e=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&($e=!0);else return e.lanes=t.lanes,Ct(t,e,i)}return pl(t,e,s,n,i)}function mh(t,e,s){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Z(Xs,Ue),Ue|=s;else{if(!(s&1073741824))return t=a!==null?a.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Z(Xs,Ue),Ue|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:s,Z(Xs,Ue),Ue|=n}else a!==null?(n=a.baseLanes|s,e.memoizedState=null):n=s,Z(Xs,Ue),Ue|=n;return Pe(t,e,i,s),e.child}function fh(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function pl(t,e,s,n,i){var a=Oe(s)?ys:Ce.current;return a=or(e,a),ir(e,i),s=vo(t,e,s,n,a,i),n=bo(),t!==null&&!$e?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ct(t,e,i)):(se&&n&&ao(e),e.flags|=1,Pe(t,e,s,i),e.child)}function Mc(t,e,s,n,i){if(Oe(s)){var a=!0;mi(e)}else a=!1;if(ir(e,i),e.stateNode===null)Zn(t,e),ch(e,s,n),ml(e,s,n,i),n=!0;else if(t===null){var l=e.stateNode,c=e.memoizedProps;l.props=c;var o=l.context,d=s.contextType;typeof d=="object"&&d!==null?d=Ze(d):(d=Oe(s)?ys:Ce.current,d=or(e,d));var u=s.getDerivedStateFromProps,p=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";p||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==n||o!==d)&&Tc(e,l,n,d),$t=!1;var x=e.memoizedState;l.state=x,yi(e,n,l,i),o=e.memoizedState,c!==n||x!==o||Le.current||$t?(typeof u=="function"&&(hl(e,s,u,n),o=e.memoizedState),(c=$t||Dc(e,s,c,n,x,o,d))?(p||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=o),l.props=n,l.state=o,l.context=d,n=c):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{l=e.stateNode,Bu(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:rt(e.type,c),l.props=d,p=e.pendingProps,x=l.context,o=s.contextType,typeof o=="object"&&o!==null?o=Ze(o):(o=Oe(s)?ys:Ce.current,o=or(e,o));var y=s.getDerivedStateFromProps;(u=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==p||x!==o)&&Tc(e,l,n,o),$t=!1,x=e.memoizedState,l.state=x,yi(e,n,l,i);var b=e.memoizedState;c!==p||x!==b||Le.current||$t?(typeof y=="function"&&(hl(e,s,y,n),b=e.memoizedState),(d=$t||Dc(e,s,d,n,x,b,o)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,b,o),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,b,o)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=b),l.props=n,l.state=b,l.context=o,n=d):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),n=!1)}return gl(t,e,s,n,a,i)}function gl(t,e,s,n,i,a){fh(t,e);var l=(e.flags&128)!==0;if(!n&&!l)return i&&Nc(e,s,!1),Ct(t,e,a);n=e.stateNode,N0.current=e;var c=l&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&l?(e.child=dr(e,t.child,null,a),e.child=dr(e,null,c,a)):Pe(t,e,c,a),e.memoizedState=n.state,i&&Nc(e,s,!0),e.child}function ph(t){var e=t.stateNode;e.pendingContext?wc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wc(t,e.context,!1),po(t,e.containerInfo)}function Uc(t,e,s,n,i){return cr(),oo(i),e.flags|=256,Pe(t,e,s,n),e.child}var xl={dehydrated:null,treeContext:null,retryLane:0};function yl(t){return{baseLanes:t,cachePool:null,transitions:null}}function gh(t,e,s){var n=e.pendingProps,i=ne.current,a=!1,l=(e.flags&128)!==0,c;if((c=l)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Z(ne,i&1),t===null)return dl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=n.children,t=n.fallback,a?(n=e.mode,a=e.child,l={mode:"hidden",children:l},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=zi(l,n,0,null),t=gs(t,n,s,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=yl(s),e.memoizedState=xl,t):No(e,l));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return _0(t,e,l,n,c,i,s);if(a){a=n.fallback,l=e.mode,i=t.child,c=i.sibling;var o={mode:"hidden",children:n.children};return!(l&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=o,e.deletions=null):(n=Qt(i,o),n.subtreeFlags=i.subtreeFlags&14680064),c!==null?a=Qt(c,a):(a=gs(a,l,s,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,l=t.child.memoizedState,l=l===null?yl(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~s,e.memoizedState=xl,n}return a=t.child,t=a.sibling,n=Qt(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function No(t,e){return e=zi({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mn(t,e,s,n){return n!==null&&oo(n),dr(e,t.child,null,s),t=No(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _0(t,e,s,n,i,a,l){if(s)return e.flags&256?(e.flags&=-257,n=_a(Error(R(422))),Mn(t,e,l,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=zi({mode:"visible",children:n.children},i,0,null),a=gs(a,i,l,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&dr(e,t.child,null,l),e.child.memoizedState=yl(l),e.memoizedState=xl,a);if(!(e.mode&1))return Mn(t,e,l,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var c=n.dgst;return n=c,a=Error(R(419)),n=_a(a,n,void 0),Mn(t,e,l,n)}if(c=(l&t.childLanes)!==0,$e||c){if(n=xe,n!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,St(t,i),ot(n,t,i,-1))}return Eo(),n=_a(Error(R(421))),Mn(t,e,l,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=O0.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Fe=Wt(i.nextSibling),Be=e,se=!0,at=null,t!==null&&(Ke[Je++]=bt,Ke[Je++]=jt,Ke[Je++]=vs,bt=t.id,jt=t.overflow,vs=e),e=No(e,n.children),e.flags|=4096,e)}function Fc(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),ul(t.return,e,s)}function ka(t,e,s,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=s,a.tailMode=i)}function xh(t,e,s){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(Pe(t,e,n.children,s),n=ne.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fc(t,s,e);else if(t.tag===19)Fc(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Z(ne,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(s=e.child,i=null;s!==null;)t=s.alternate,t!==null&&vi(t)===null&&(i=s),s=s.sibling;s=i,s===null?(i=e.child,e.child=null):(i=s.sibling,s.sibling=null),ka(e,!1,i,s,a);break;case"backwards":for(s=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&vi(t)===null){e.child=i;break}t=i.sibling,i.sibling=s,s=i,i=t}ka(e,!0,s,null,a);break;case"together":ka(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zn(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ct(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),js|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,s=Qt(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Qt(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function k0(t,e,s){switch(e.tag){case 3:ph(e),cr();break;case 5:Vu(e);break;case 1:Oe(e.type)&&mi(e);break;case 4:po(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Z(gi,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Z(ne,ne.current&1),e.flags|=128,null):s&e.child.childLanes?gh(t,e,s):(Z(ne,ne.current&1),t=Ct(t,e,s),t!==null?t.sibling:null);Z(ne,ne.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return xh(t,e,s);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Z(ne,ne.current),n)break;return null;case 22:case 23:return e.lanes=0,mh(t,e,s)}return Ct(t,e,s)}var yh,vl,vh,bh;yh=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};vl=function(){};vh=function(t,e,s,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,fs(ft.current);var a=null;switch(s){case"input":i=za(t,i),n=za(t,n),a=[];break;case"select":i=ae({},i,{value:void 0}),n=ae({},n,{value:void 0}),a=[];break;case"textarea":i=qa(t,i),n=qa(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ui)}Wa(s,n);var l;s=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(l in c)c.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Kr.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var o=n[d];if(c=i!=null?i[d]:void 0,n.hasOwnProperty(d)&&o!==c&&(o!=null||c!=null))if(d==="style")if(c){for(l in c)!c.hasOwnProperty(l)||o&&o.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in o)o.hasOwnProperty(l)&&c[l]!==o[l]&&(s||(s={}),s[l]=o[l])}else s||(a||(a=[]),a.push(d,s)),s=o;else d==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,c=c?c.__html:void 0,o!=null&&c!==o&&(a=a||[]).push(d,o)):d==="children"?typeof o!="string"&&typeof o!="number"||(a=a||[]).push(d,""+o):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Kr.hasOwnProperty(d)?(o!=null&&d==="onScroll"&&ee("scroll",t),a||c===o||(a=[])):(a=a||[]).push(d,o))}s&&(a=a||[]).push("style",s);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};bh=function(t,e,s,n){s!==n&&(e.flags|=4)};function Pr(t,e){if(!se)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ne(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function S0(t,e,s){var n=e.pendingProps;switch(lo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(e),null;case 1:return Oe(e.type)&&hi(),Ne(e),null;case 3:return n=e.stateNode,ur(),te(Le),te(Ce),xo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ln(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,at!==null&&(Cl(at),at=null))),vl(t,e),Ne(e),null;case 5:go(e);var i=fs(ln.current);if(s=e.type,t!==null&&e.stateNode!=null)vh(t,e,s,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(R(166));return Ne(e),null}if(t=fs(ft.current),Ln(e)){n=e.stateNode,s=e.type;var a=e.memoizedProps;switch(n[ht]=e,n[nn]=a,t=(e.mode&1)!==0,s){case"dialog":ee("cancel",n),ee("close",n);break;case"iframe":case"object":case"embed":ee("load",n);break;case"video":case"audio":for(i=0;i<$r.length;i++)ee($r[i],n);break;case"source":ee("error",n);break;case"img":case"image":case"link":ee("error",n),ee("load",n);break;case"details":ee("toggle",n);break;case"input":Jo(n,a),ee("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},ee("invalid",n);break;case"textarea":Yo(n,a),ee("invalid",n)}Wa(s,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var c=a[l];l==="children"?typeof c=="string"?n.textContent!==c&&(a.suppressHydrationWarning!==!0&&$n(n.textContent,c,t),i=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&$n(n.textContent,c,t),i=["children",""+c]):Kr.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&ee("scroll",n)}switch(s){case"input":Cn(n),Qo(n,a,!0);break;case"textarea":Cn(n),Xo(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=ui)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Kd(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=l.createElement(s,{is:n.is}):(t=l.createElement(s),s==="select"&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,s),t[ht]=e,t[nn]=n,yh(t,e,!1,!1),e.stateNode=t;e:{switch(l=Ga(s,n),s){case"dialog":ee("cancel",t),ee("close",t),i=n;break;case"iframe":case"object":case"embed":ee("load",t),i=n;break;case"video":case"audio":for(i=0;i<$r.length;i++)ee($r[i],t);i=n;break;case"source":ee("error",t),i=n;break;case"img":case"image":case"link":ee("error",t),ee("load",t),i=n;break;case"details":ee("toggle",t),i=n;break;case"input":Jo(t,n),i=za(t,n),ee("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=ae({},n,{value:void 0}),ee("invalid",t);break;case"textarea":Yo(t,n),i=qa(t,n),ee("invalid",t);break;default:i=n}Wa(s,i),c=i;for(a in c)if(c.hasOwnProperty(a)){var o=c[a];a==="style"?Yd(t,o):a==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&Jd(t,o)):a==="children"?typeof o=="string"?(s!=="textarea"||o!=="")&&Jr(t,o):typeof o=="number"&&Jr(t,""+o):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Kr.hasOwnProperty(a)?o!=null&&a==="onScroll"&&ee("scroll",t):o!=null&&Wl(t,a,o,l))}switch(s){case"input":Cn(t),Qo(t,n,!1);break;case"textarea":Cn(t),Xo(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Yt(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?tr(t,!!n.multiple,a,!1):n.defaultValue!=null&&tr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ui)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ne(e),null;case 6:if(t&&e.stateNode!=null)bh(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(R(166));if(s=fs(ln.current),fs(ft.current),Ln(e)){if(n=e.stateNode,s=e.memoizedProps,n[ht]=e,(a=n.nodeValue!==s)&&(t=Be,t!==null))switch(t.tag){case 3:$n(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$n(n.nodeValue,s,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[ht]=e,e.stateNode=n}return Ne(e),null;case 13:if(te(ne),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(se&&Fe!==null&&e.mode&1&&!(e.flags&128))Mu(),cr(),e.flags|=98560,a=!1;else if(a=Ln(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(R(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(R(317));a[ht]=e}else cr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ne(e),a=!1}else at!==null&&(Cl(at),at=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ne.current&1?me===0&&(me=3):Eo())),e.updateQueue!==null&&(e.flags|=4),Ne(e),null);case 4:return ur(),vl(t,e),t===null&&sn(e.stateNode.containerInfo),Ne(e),null;case 10:return ho(e.type._context),Ne(e),null;case 17:return Oe(e.type)&&hi(),Ne(e),null;case 19:if(te(ne),a=e.memoizedState,a===null)return Ne(e),null;if(n=(e.flags&128)!==0,l=a.rendering,l===null)if(n)Pr(a,!1);else{if(me!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=vi(t),l!==null){for(e.flags|=128,Pr(a,!1),n=l.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)a=s,t=n,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Z(ne,ne.current&1|2),e.child}t=t.sibling}a.tail!==null&&ce()>mr&&(e.flags|=128,n=!0,Pr(a,!1),e.lanes=4194304)}else{if(!n)if(t=vi(l),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Pr(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!se)return Ne(e),null}else 2*ce()-a.renderingStartTime>mr&&s!==1073741824&&(e.flags|=128,n=!0,Pr(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(s=a.last,s!==null?s.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ce(),e.sibling=null,s=ne.current,Z(ne,n?s&1|2:s&1),e):(Ne(e),null);case 22:case 23:return Po(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ue&1073741824&&(Ne(e),e.subtreeFlags&6&&(e.flags|=8192)):Ne(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function C0(t,e){switch(lo(e),e.tag){case 1:return Oe(e.type)&&hi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ur(),te(Le),te(Ce),xo(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return go(e),null;case 13:if(te(ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));cr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return te(ne),null;case 4:return ur(),null;case 10:return ho(e.type._context),null;case 22:case 23:return Po(),null;case 24:return null;default:return null}}var Un=!1,Se=!1,P0=typeof WeakSet=="function"?WeakSet:Set,U=null;function Ys(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){le(t,e,n)}else s.current=null}function bl(t,e,s){try{s()}catch(n){le(t,e,n)}}var zc=!1;function E0(t,e){if(rl=oi,t=ku(),io(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var l=0,c=-1,o=-1,d=0,u=0,p=t,x=null;t:for(;;){for(var y;p!==s||i!==0&&p.nodeType!==3||(c=l+i),p!==a||n!==0&&p.nodeType!==3||(o=l+n),p.nodeType===3&&(l+=p.nodeValue.length),(y=p.firstChild)!==null;)x=p,p=y;for(;;){if(p===t)break t;if(x===s&&++d===i&&(c=l),x===a&&++u===n&&(o=l),(y=p.nextSibling)!==null)break;p=x,x=p.parentNode}p=y}s=c===-1||o===-1?null:{start:c,end:o}}else s=null}s=s||{start:0,end:0}}else s=null;for(nl={focusedElem:t,selectionRange:s},oi=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var N=b.memoizedProps,v=b.memoizedState,m=e.stateNode,h=m.getSnapshotBeforeUpdate(e.elementType===e.type?N:rt(e.type,N),v);m.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var f=e.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(g){le(e,e.return,g)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return b=zc,zc=!1,b}function Vr(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&bl(e,s,a)}i=i.next}while(i!==n)}}function Ui(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function jl(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function jh(t){var e=t.alternate;e!==null&&(t.alternate=null,jh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ht],delete e[nn],delete e[ll],delete e[u0],delete e[h0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wh(t){return t.tag===5||t.tag===3||t.tag===4}function Bc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wl(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=ui));else if(n!==4&&(t=t.child,t!==null))for(wl(t,e,s),t=t.sibling;t!==null;)wl(t,e,s),t=t.sibling}function Nl(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Nl(t,e,s),t=t.sibling;t!==null;)Nl(t,e,s),t=t.sibling}var ye=null,nt=!1;function Dt(t,e,s){for(s=s.child;s!==null;)Nh(t,e,s),s=s.sibling}function Nh(t,e,s){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(Di,s)}catch{}switch(s.tag){case 5:Se||Ys(s,e);case 6:var n=ye,i=nt;ye=null,Dt(t,e,s),ye=n,nt=i,ye!==null&&(nt?(t=ye,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):ye.removeChild(s.stateNode));break;case 18:ye!==null&&(nt?(t=ye,s=s.stateNode,t.nodeType===8?ya(t.parentNode,s):t.nodeType===1&&ya(t,s),Zr(t)):ya(ye,s.stateNode));break;case 4:n=ye,i=nt,ye=s.stateNode.containerInfo,nt=!0,Dt(t,e,s),ye=n,nt=i;break;case 0:case 11:case 14:case 15:if(!Se&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&bl(s,e,l),i=i.next}while(i!==n)}Dt(t,e,s);break;case 1:if(!Se&&(Ys(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(c){le(s,e,c)}Dt(t,e,s);break;case 21:Dt(t,e,s);break;case 22:s.mode&1?(Se=(n=Se)||s.memoizedState!==null,Dt(t,e,s),Se=n):Dt(t,e,s);break;default:Dt(t,e,s)}}function Vc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new P0),e.forEach(function(n){var i=M0.bind(null,t,n);s.has(n)||(s.add(n),n.then(i,i))})}}function tt(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var i=s[n];try{var a=t,l=e,c=l;e:for(;c!==null;){switch(c.tag){case 5:ye=c.stateNode,nt=!1;break e;case 3:ye=c.stateNode.containerInfo,nt=!0;break e;case 4:ye=c.stateNode.containerInfo,nt=!0;break e}c=c.return}if(ye===null)throw Error(R(160));Nh(a,l,i),ye=null,nt=!1;var o=i.alternate;o!==null&&(o.return=null),i.return=null}catch(d){le(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_h(e,t),e=e.sibling}function _h(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tt(e,t),dt(t),n&4){try{Vr(3,t,t.return),Ui(3,t)}catch(N){le(t,t.return,N)}try{Vr(5,t,t.return)}catch(N){le(t,t.return,N)}}break;case 1:tt(e,t),dt(t),n&512&&s!==null&&Ys(s,s.return);break;case 5:if(tt(e,t),dt(t),n&512&&s!==null&&Ys(s,s.return),t.flags&32){var i=t.stateNode;try{Jr(i,"")}catch(N){le(t,t.return,N)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,l=s!==null?s.memoizedProps:a,c=t.type,o=t.updateQueue;if(t.updateQueue=null,o!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&Wd(i,a),Ga(c,l);var d=Ga(c,a);for(l=0;l<o.length;l+=2){var u=o[l],p=o[l+1];u==="style"?Yd(i,p):u==="dangerouslySetInnerHTML"?Jd(i,p):u==="children"?Jr(i,p):Wl(i,u,p,d)}switch(c){case"input":Ba(i,a);break;case"textarea":Gd(i,a);break;case"select":var x=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?tr(i,!!a.multiple,y,!1):x!==!!a.multiple&&(a.defaultValue!=null?tr(i,!!a.multiple,a.defaultValue,!0):tr(i,!!a.multiple,a.multiple?[]:"",!1))}i[nn]=a}catch(N){le(t,t.return,N)}}break;case 6:if(tt(e,t),dt(t),n&4){if(t.stateNode===null)throw Error(R(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(N){le(t,t.return,N)}}break;case 3:if(tt(e,t),dt(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Zr(e.containerInfo)}catch(N){le(t,t.return,N)}break;case 4:tt(e,t),dt(t);break;case 13:tt(e,t),dt(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(So=ce())),n&4&&Vc(t);break;case 22:if(u=s!==null&&s.memoizedState!==null,t.mode&1?(Se=(d=Se)||u,tt(e,t),Se=d):tt(e,t),dt(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(U=t,u=t.child;u!==null;){for(p=U=u;U!==null;){switch(x=U,y=x.child,x.tag){case 0:case 11:case 14:case 15:Vr(4,x,x.return);break;case 1:Ys(x,x.return);var b=x.stateNode;if(typeof b.componentWillUnmount=="function"){n=x,s=x.return;try{e=n,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(N){le(n,s,N)}}break;case 5:Ys(x,x.return);break;case 22:if(x.memoizedState!==null){Hc(p);continue}}y!==null?(y.return=x,U=y):Hc(p)}u=u.sibling}e:for(u=null,p=t;;){if(p.tag===5){if(u===null){u=p;try{i=p.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=p.stateNode,o=p.memoizedProps.style,l=o!=null&&o.hasOwnProperty("display")?o.display:null,c.style.display=Qd("display",l))}catch(N){le(t,t.return,N)}}}else if(p.tag===6){if(u===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(N){le(t,t.return,N)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:tt(e,t),dt(t),n&4&&Vc(t);break;case 21:break;default:tt(e,t),dt(t)}}function dt(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(wh(s)){var n=s;break e}s=s.return}throw Error(R(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Jr(i,""),n.flags&=-33);var a=Bc(t);Nl(t,a,i);break;case 3:case 4:var l=n.stateNode.containerInfo,c=Bc(t);wl(t,c,l);break;default:throw Error(R(161))}}catch(o){le(t,t.return,o)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function I0(t,e,s){U=t,kh(t)}function kh(t,e,s){for(var n=(t.mode&1)!==0;U!==null;){var i=U,a=i.child;if(i.tag===22&&n){var l=i.memoizedState!==null||Un;if(!l){var c=i.alternate,o=c!==null&&c.memoizedState!==null||Se;c=Un;var d=Se;if(Un=l,(Se=o)&&!d)for(U=i;U!==null;)l=U,o=l.child,l.tag===22&&l.memoizedState!==null?Wc(i):o!==null?(o.return=l,U=o):Wc(i);for(;a!==null;)U=a,kh(a),a=a.sibling;U=i,Un=c,Se=d}qc(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,U=a):qc(t)}}function qc(t){for(;U!==null;){var e=U;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Se||Ui(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Se)if(s===null)n.componentDidMount();else{var i=e.elementType===e.type?s.memoizedProps:rt(e.type,s.memoizedProps);n.componentDidUpdate(i,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Pc(e,a,n);break;case 3:var l=e.updateQueue;if(l!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}Pc(e,l,s)}break;case 5:var c=e.stateNode;if(s===null&&e.flags&4){s=c;var o=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&s.focus();break;case"img":o.src&&(s.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var p=u.dehydrated;p!==null&&Zr(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Se||e.flags&512&&jl(e)}catch(x){le(e,e.return,x)}}if(e===t){U=null;break}if(s=e.sibling,s!==null){s.return=e.return,U=s;break}U=e.return}}function Hc(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var s=e.sibling;if(s!==null){s.return=e.return,U=s;break}U=e.return}}function Wc(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Ui(4,e)}catch(o){le(e,s,o)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(o){le(e,i,o)}}var a=e.return;try{jl(e)}catch(o){le(e,a,o)}break;case 5:var l=e.return;try{jl(e)}catch(o){le(e,l,o)}}}catch(o){le(e,e.return,o)}if(e===t){U=null;break}var c=e.sibling;if(c!==null){c.return=e.return,U=c;break}U=e.return}}var D0=Math.ceil,wi=It.ReactCurrentDispatcher,_o=It.ReactCurrentOwner,Ye=It.ReactCurrentBatchConfig,J=0,xe=null,de=null,ve=0,Ue=0,Xs=ts(0),me=0,un=null,js=0,Fi=0,ko=0,qr=null,Ae=null,So=0,mr=1/0,xt=null,Ni=!1,_l=null,Kt=null,Fn=!1,zt=null,_i=0,Hr=0,kl=null,ei=-1,ti=0;function Ee(){return J&6?ce():ei!==-1?ei:ei=ce()}function Jt(t){return t.mode&1?J&2&&ve!==0?ve&-ve:f0.transition!==null?(ti===0&&(ti=cu()),ti):(t=Q,t!==0||(t=window.event,t=t===void 0?16:gu(t.type)),t):1}function ot(t,e,s,n){if(50<Hr)throw Hr=0,kl=null,Error(R(185));gn(t,s,n),(!(J&2)||t!==xe)&&(t===xe&&(!(J&2)&&(Fi|=s),me===4&&Mt(t,ve)),Me(t,n),s===1&&J===0&&!(e.mode&1)&&(mr=ce()+500,Li&&ss()))}function Me(t,e){var s=t.callbackNode;ff(t,e);var n=li(t,t===xe?ve:0);if(n===0)s!==null&&tc(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&tc(s),e===1)t.tag===0?m0(Gc.bind(null,t)):$u(Gc.bind(null,t)),c0(function(){!(J&6)&&ss()}),s=null;else{switch(du(n)){case 1:s=Yl;break;case 4:s=lu;break;case 16:s=ai;break;case 536870912:s=ou;break;default:s=ai}s=Ah(s,Sh.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function Sh(t,e){if(ei=-1,ti=0,J&6)throw Error(R(327));var s=t.callbackNode;if(ar()&&t.callbackNode!==s)return null;var n=li(t,t===xe?ve:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=ki(t,n);else{e=n;var i=J;J|=2;var a=Ph();(xe!==t||ve!==e)&&(xt=null,mr=ce()+500,ps(t,e));do try{R0();break}catch(c){Ch(t,c)}while(!0);uo(),wi.current=a,J=i,de!==null?e=0:(xe=null,ve=0,e=me)}if(e!==0){if(e===2&&(i=Xa(t),i!==0&&(n=i,e=Sl(t,i))),e===1)throw s=un,ps(t,0),Mt(t,n),Me(t,ce()),s;if(e===6)Mt(t,n);else{if(i=t.current.alternate,!(n&30)&&!T0(i)&&(e=ki(t,n),e===2&&(a=Xa(t),a!==0&&(n=a,e=Sl(t,a))),e===1))throw s=un,ps(t,0),Mt(t,n),Me(t,ce()),s;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(R(345));case 2:ls(t,Ae,xt);break;case 3:if(Mt(t,n),(n&130023424)===n&&(e=So+500-ce(),10<e)){if(li(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Ee(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=al(ls.bind(null,t,Ae,xt),e);break}ls(t,Ae,xt);break;case 4:if(Mt(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var l=31-lt(n);a=1<<l,l=e[l],l>i&&(i=l),n&=~a}if(n=i,n=ce()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*D0(n/1960))-n,10<n){t.timeoutHandle=al(ls.bind(null,t,Ae,xt),n);break}ls(t,Ae,xt);break;case 5:ls(t,Ae,xt);break;default:throw Error(R(329))}}}return Me(t,ce()),t.callbackNode===s?Sh.bind(null,t):null}function Sl(t,e){var s=qr;return t.current.memoizedState.isDehydrated&&(ps(t,e).flags|=256),t=ki(t,e),t!==2&&(e=Ae,Ae=s,e!==null&&Cl(e)),t}function Cl(t){Ae===null?Ae=t:Ae.push.apply(Ae,t)}function T0(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var i=s[n],a=i.getSnapshot;i=i.value;try{if(!ct(a(),i))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mt(t,e){for(e&=~ko,e&=~Fi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-lt(e),n=1<<s;t[s]=-1,e&=~n}}function Gc(t){if(J&6)throw Error(R(327));ar();var e=li(t,0);if(!(e&1))return Me(t,ce()),null;var s=ki(t,e);if(t.tag!==0&&s===2){var n=Xa(t);n!==0&&(e=n,s=Sl(t,n))}if(s===1)throw s=un,ps(t,0),Mt(t,e),Me(t,ce()),s;if(s===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ls(t,Ae,xt),Me(t,ce()),null}function Co(t,e){var s=J;J|=1;try{return t(e)}finally{J=s,J===0&&(mr=ce()+500,Li&&ss())}}function ws(t){zt!==null&&zt.tag===0&&!(J&6)&&ar();var e=J;J|=1;var s=Ye.transition,n=Q;try{if(Ye.transition=null,Q=1,t)return t()}finally{Q=n,Ye.transition=s,J=e,!(J&6)&&ss()}}function Po(){Ue=Xs.current,te(Xs)}function ps(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,o0(s)),de!==null)for(s=de.return;s!==null;){var n=s;switch(lo(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&hi();break;case 3:ur(),te(Le),te(Ce),xo();break;case 5:go(n);break;case 4:ur();break;case 13:te(ne);break;case 19:te(ne);break;case 10:ho(n.type._context);break;case 22:case 23:Po()}s=s.return}if(xe=t,de=t=Qt(t.current,null),ve=Ue=e,me=0,un=null,ko=Fi=js=0,Ae=qr=null,ms!==null){for(e=0;e<ms.length;e++)if(s=ms[e],n=s.interleaved,n!==null){s.interleaved=null;var i=n.next,a=s.pending;if(a!==null){var l=a.next;a.next=i,n.next=l}s.pending=n}ms=null}return t}function Ch(t,e){do{var s=de;try{if(uo(),Yn.current=ji,bi){for(var n=ie.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}bi=!1}if(bs=0,ge=ue=ie=null,Br=!1,on=0,_o.current=null,s===null||s.return===null){me=1,un=e,de=null;break}e:{var a=t,l=s.return,c=s,o=e;if(e=ve,c.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var d=o,u=c,p=u.tag;if(!(u.mode&1)&&(p===0||p===11||p===15)){var x=u.alternate;x?(u.updateQueue=x.updateQueue,u.memoizedState=x.memoizedState,u.lanes=x.lanes):(u.updateQueue=null,u.memoizedState=null)}var y=Rc(l);if(y!==null){y.flags&=-257,$c(y,l,c,a,e),y.mode&1&&Ac(a,d,e),e=y,o=d;var b=e.updateQueue;if(b===null){var N=new Set;N.add(o),e.updateQueue=N}else b.add(o);break e}else{if(!(e&1)){Ac(a,d,e),Eo();break e}o=Error(R(426))}}else if(se&&c.mode&1){var v=Rc(l);if(v!==null){!(v.flags&65536)&&(v.flags|=256),$c(v,l,c,a,e),oo(hr(o,c));break e}}a=o=hr(o,c),me!==4&&(me=2),qr===null?qr=[a]:qr.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var m=dh(a,o,e);Cc(a,m);break e;case 1:c=o;var h=a.type,f=a.stateNode;if(!(a.flags&128)&&(typeof h.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Kt===null||!Kt.has(f)))){a.flags|=65536,e&=-e,a.lanes|=e;var g=uh(a,c,e);Cc(a,g);break e}}a=a.return}while(a!==null)}Ih(s)}catch(w){e=w,de===s&&s!==null&&(de=s=s.return);continue}break}while(!0)}function Ph(){var t=wi.current;return wi.current=ji,t===null?ji:t}function Eo(){(me===0||me===3||me===2)&&(me=4),xe===null||!(js&268435455)&&!(Fi&268435455)||Mt(xe,ve)}function ki(t,e){var s=J;J|=2;var n=Ph();(xe!==t||ve!==e)&&(xt=null,ps(t,e));do try{A0();break}catch(i){Ch(t,i)}while(!0);if(uo(),J=s,wi.current=n,de!==null)throw Error(R(261));return xe=null,ve=0,me}function A0(){for(;de!==null;)Eh(de)}function R0(){for(;de!==null&&!nf();)Eh(de)}function Eh(t){var e=Th(t.alternate,t,Ue);t.memoizedProps=t.pendingProps,e===null?Ih(t):de=e,_o.current=null}function Ih(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=C0(s,e),s!==null){s.flags&=32767,de=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{me=6,de=null;return}}else if(s=S0(s,e,Ue),s!==null){de=s;return}if(e=e.sibling,e!==null){de=e;return}de=e=t}while(e!==null);me===0&&(me=5)}function ls(t,e,s){var n=Q,i=Ye.transition;try{Ye.transition=null,Q=1,$0(t,e,s,n)}finally{Ye.transition=i,Q=n}return null}function $0(t,e,s,n){do ar();while(zt!==null);if(J&6)throw Error(R(327));s=t.finishedWork;var i=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var a=s.lanes|s.childLanes;if(pf(t,a),t===xe&&(de=xe=null,ve=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Fn||(Fn=!0,Ah(ai,function(){return ar(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=Ye.transition,Ye.transition=null;var l=Q;Q=1;var c=J;J|=4,_o.current=null,E0(t,s),_h(s,t),t0(nl),oi=!!rl,nl=rl=null,t.current=s,I0(s),af(),J=c,Q=l,Ye.transition=a}else t.current=s;if(Fn&&(Fn=!1,zt=t,_i=i),a=t.pendingLanes,a===0&&(Kt=null),cf(s.stateNode),Me(t,ce()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)i=e[s],n(i.value,{componentStack:i.stack,digest:i.digest});if(Ni)throw Ni=!1,t=_l,_l=null,t;return _i&1&&t.tag!==0&&ar(),a=t.pendingLanes,a&1?t===kl?Hr++:(Hr=0,kl=t):Hr=0,ss(),null}function ar(){if(zt!==null){var t=du(_i),e=Ye.transition,s=Q;try{if(Ye.transition=null,Q=16>t?16:t,zt===null)var n=!1;else{if(t=zt,zt=null,_i=0,J&6)throw Error(R(331));var i=J;for(J|=4,U=t.current;U!==null;){var a=U,l=a.child;if(U.flags&16){var c=a.deletions;if(c!==null){for(var o=0;o<c.length;o++){var d=c[o];for(U=d;U!==null;){var u=U;switch(u.tag){case 0:case 11:case 15:Vr(8,u,a)}var p=u.child;if(p!==null)p.return=u,U=p;else for(;U!==null;){u=U;var x=u.sibling,y=u.return;if(jh(u),u===d){U=null;break}if(x!==null){x.return=y,U=x;break}U=y}}}var b=a.alternate;if(b!==null){var N=b.child;if(N!==null){b.child=null;do{var v=N.sibling;N.sibling=null,N=v}while(N!==null)}}U=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,U=l;else e:for(;U!==null;){if(a=U,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Vr(9,a,a.return)}var m=a.sibling;if(m!==null){m.return=a.return,U=m;break e}U=a.return}}var h=t.current;for(U=h;U!==null;){l=U;var f=l.child;if(l.subtreeFlags&2064&&f!==null)f.return=l,U=f;else e:for(l=h;U!==null;){if(c=U,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Ui(9,c)}}catch(w){le(c,c.return,w)}if(c===l){U=null;break e}var g=c.sibling;if(g!==null){g.return=c.return,U=g;break e}U=c.return}}if(J=i,ss(),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(Di,t)}catch{}n=!0}return n}finally{Q=s,Ye.transition=e}}return!1}function Kc(t,e,s){e=hr(s,e),e=dh(t,e,1),t=Gt(t,e,1),e=Ee(),t!==null&&(gn(t,1,e),Me(t,e))}function le(t,e,s){if(t.tag===3)Kc(t,t,s);else for(;e!==null;){if(e.tag===3){Kc(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Kt===null||!Kt.has(n))){t=hr(s,t),t=uh(e,t,1),e=Gt(e,t,1),t=Ee(),e!==null&&(gn(e,1,t),Me(e,t));break}}e=e.return}}function L0(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=Ee(),t.pingedLanes|=t.suspendedLanes&s,xe===t&&(ve&s)===s&&(me===4||me===3&&(ve&130023424)===ve&&500>ce()-So?ps(t,0):ko|=s),Me(t,e)}function Dh(t,e){e===0&&(t.mode&1?(e=In,In<<=1,!(In&130023424)&&(In=4194304)):e=1);var s=Ee();t=St(t,e),t!==null&&(gn(t,e,s),Me(t,s))}function O0(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),Dh(t,s)}function M0(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(s=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(R(314))}n!==null&&n.delete(e),Dh(t,s)}var Th;Th=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||Le.current)$e=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return $e=!1,k0(t,e,s);$e=!!(t.flags&131072)}else $e=!1,se&&e.flags&1048576&&Lu(e,pi,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Zn(t,e),t=e.pendingProps;var i=or(e,Ce.current);ir(e,s),i=vo(null,e,n,t,i,s);var a=bo();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Oe(n)?(a=!0,mi(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fo(e),i.updater=Mi,e.stateNode=i,i._reactInternals=e,ml(e,n,t,s),e=gl(null,e,n,!0,a,s)):(e.tag=0,se&&a&&ao(e),Pe(null,e,i,s),e=e.child),e;case 16:n=e.elementType;e:{switch(Zn(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=F0(n),t=rt(n,t),i){case 0:e=pl(null,e,n,t,s);break e;case 1:e=Mc(null,e,n,t,s);break e;case 11:e=Lc(null,e,n,t,s);break e;case 14:e=Oc(null,e,n,rt(n.type,t),s);break e}throw Error(R(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:rt(n,i),pl(t,e,n,i,s);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:rt(n,i),Mc(t,e,n,i,s);case 3:e:{if(ph(e),t===null)throw Error(R(387));n=e.pendingProps,a=e.memoizedState,i=a.element,Bu(t,e),yi(e,n,null,s);var l=e.memoizedState;if(n=l.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=hr(Error(R(423)),e),e=Uc(t,e,n,s,i);break e}else if(n!==i){i=hr(Error(R(424)),e),e=Uc(t,e,n,s,i);break e}else for(Fe=Wt(e.stateNode.containerInfo.firstChild),Be=e,se=!0,at=null,s=Fu(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(cr(),n===i){e=Ct(t,e,s);break e}Pe(t,e,n,s)}e=e.child}return e;case 5:return Vu(e),t===null&&dl(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,l=i.children,il(n,i)?l=null:a!==null&&il(n,a)&&(e.flags|=32),fh(t,e),Pe(t,e,l,s),e.child;case 6:return t===null&&dl(e),null;case 13:return gh(t,e,s);case 4:return po(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=dr(e,null,n,s):Pe(t,e,n,s),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:rt(n,i),Lc(t,e,n,i,s);case 7:return Pe(t,e,e.pendingProps,s),e.child;case 8:return Pe(t,e,e.pendingProps.children,s),e.child;case 12:return Pe(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,l=i.value,Z(gi,n._currentValue),n._currentValue=l,a!==null)if(ct(a.value,l)){if(a.children===i.children&&!Le.current){e=Ct(t,e,s);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){l=a.child;for(var o=c.firstContext;o!==null;){if(o.context===n){if(a.tag===1){o=Nt(-1,s&-s),o.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?o.next=o:(o.next=u.next,u.next=o),d.pending=o}}a.lanes|=s,o=a.alternate,o!==null&&(o.lanes|=s),ul(a.return,s,e),c.lanes|=s;break}o=o.next}}else if(a.tag===10)l=a.type===e.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(R(341));l.lanes|=s,c=l.alternate,c!==null&&(c.lanes|=s),ul(l,s,e),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}Pe(t,e,i.children,s),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,ir(e,s),i=Ze(i),n=n(i),e.flags|=1,Pe(t,e,n,s),e.child;case 14:return n=e.type,i=rt(n,e.pendingProps),i=rt(n.type,i),Oc(t,e,n,i,s);case 15:return hh(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:rt(n,i),Zn(t,e),e.tag=1,Oe(n)?(t=!0,mi(e)):t=!1,ir(e,s),ch(e,n,i),ml(e,n,i,s),gl(null,e,n,!0,t,s);case 19:return xh(t,e,s);case 22:return mh(t,e,s)}throw Error(R(156,e.tag))};function Ah(t,e){return au(t,e)}function U0(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qe(t,e,s,n){return new U0(t,e,s,n)}function Io(t){return t=t.prototype,!(!t||!t.isReactComponent)}function F0(t){if(typeof t=="function")return Io(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kl)return 11;if(t===Jl)return 14}return 2}function Qt(t,e){var s=t.alternate;return s===null?(s=Qe(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function si(t,e,s,n,i,a){var l=2;if(n=t,typeof t=="function")Io(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Bs:return gs(s.children,i,a,e);case Gl:l=8,i|=8;break;case Oa:return t=Qe(12,s,e,i|2),t.elementType=Oa,t.lanes=a,t;case Ma:return t=Qe(13,s,e,i),t.elementType=Ma,t.lanes=a,t;case Ua:return t=Qe(19,s,e,i),t.elementType=Ua,t.lanes=a,t;case Vd:return zi(s,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zd:l=10;break e;case Bd:l=9;break e;case Kl:l=11;break e;case Jl:l=14;break e;case Rt:l=16,n=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=Qe(l,s,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function gs(t,e,s,n){return t=Qe(7,t,n,e),t.lanes=s,t}function zi(t,e,s,n){return t=Qe(22,t,n,e),t.elementType=Vd,t.lanes=s,t.stateNode={isHidden:!1},t}function Sa(t,e,s){return t=Qe(6,t,null,e),t.lanes=s,t}function Ca(t,e,s){return e=Qe(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function z0(t,e,s,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=la(0),this.expirationTimes=la(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=la(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Do(t,e,s,n,i,a,l,c,o){return t=new z0(t,e,s,c,o),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Qe(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},fo(a),t}function B0(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zs,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function Rh(t){if(!t)return Xt;t=t._reactInternals;e:{if(Cs(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Oe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var s=t.type;if(Oe(s))return Ru(t,s,e)}return e}function $h(t,e,s,n,i,a,l,c,o){return t=Do(s,n,!0,t,i,a,l,c,o),t.context=Rh(null),s=t.current,n=Ee(),i=Jt(s),a=Nt(n,i),a.callback=e??null,Gt(s,a,i),t.current.lanes=i,gn(t,i,n),Me(t,n),t}function Bi(t,e,s,n){var i=e.current,a=Ee(),l=Jt(i);return s=Rh(s),e.context===null?e.context=s:e.pendingContext=s,e=Nt(a,l),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Gt(i,e,l),t!==null&&(ot(t,i,l,a),Qn(t,i,l)),l}function Si(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jc(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function To(t,e){Jc(t,e),(t=t.alternate)&&Jc(t,e)}function V0(){return null}var Lh=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ao(t){this._internalRoot=t}Vi.prototype.render=Ao.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));Bi(t,e,null,null)};Vi.prototype.unmount=Ao.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ws(function(){Bi(null,t,null,null)}),e[kt]=null}};function Vi(t){this._internalRoot=t}Vi.prototype.unstable_scheduleHydration=function(t){if(t){var e=mu();t={blockedOn:null,target:t,priority:e};for(var s=0;s<Ot.length&&e!==0&&e<Ot[s].priority;s++);Ot.splice(s,0,t),s===0&&pu(t)}};function Ro(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function qi(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Qc(){}function q0(t,e,s,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var d=Si(l);a.call(d)}}var l=$h(e,n,t,0,null,!1,!1,"",Qc);return t._reactRootContainer=l,t[kt]=l.current,sn(t.nodeType===8?t.parentNode:t),ws(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var c=n;n=function(){var d=Si(o);c.call(d)}}var o=Do(t,0,!1,null,null,!1,!1,"",Qc);return t._reactRootContainer=o,t[kt]=o.current,sn(t.nodeType===8?t.parentNode:t),ws(function(){Bi(e,o,s,n)}),o}function Hi(t,e,s,n,i){var a=s._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var c=i;i=function(){var o=Si(l);c.call(o)}}Bi(e,l,t,i)}else l=q0(s,e,t,i,n);return Si(l)}uu=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=Rr(e.pendingLanes);s!==0&&(Xl(e,s|1),Me(e,ce()),!(J&6)&&(mr=ce()+500,ss()))}break;case 13:ws(function(){var n=St(t,1);if(n!==null){var i=Ee();ot(n,t,1,i)}}),To(t,1)}};Zl=function(t){if(t.tag===13){var e=St(t,134217728);if(e!==null){var s=Ee();ot(e,t,134217728,s)}To(t,134217728)}};hu=function(t){if(t.tag===13){var e=Jt(t),s=St(t,e);if(s!==null){var n=Ee();ot(s,t,e,n)}To(t,e)}};mu=function(){return Q};fu=function(t,e){var s=Q;try{return Q=t,e()}finally{Q=s}};Ja=function(t,e,s){switch(e){case"input":if(Ba(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var i=$i(n);if(!i)throw Error(R(90));Hd(n),Ba(n,i)}}}break;case"textarea":Gd(t,s);break;case"select":e=s.value,e!=null&&tr(t,!!s.multiple,e,!1)}};eu=Co;tu=ws;var H0={usingClientEntryPoint:!1,Events:[yn,Ws,$i,Xd,Zd,Co]},Er={findFiberByHostInstance:hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},W0={bundleType:Er.bundleType,version:Er.version,rendererPackageName:Er.rendererPackageName,rendererConfig:Er.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:It.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nu(t),t===null?null:t.stateNode},findFiberByHostInstance:Er.findFiberByHostInstance||V0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zn.isDisabled&&zn.supportsFiber)try{Di=zn.inject(W0),mt=zn}catch{}}We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H0;We.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ro(e))throw Error(R(200));return B0(t,e,null,s)};We.createRoot=function(t,e){if(!Ro(t))throw Error(R(299));var s=!1,n="",i=Lh;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Do(t,1,!1,null,null,s,!1,n,i),t[kt]=e.current,sn(t.nodeType===8?t.parentNode:t),new Ao(e)};We.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=nu(e),t=t===null?null:t.stateNode,t};We.flushSync=function(t){return ws(t)};We.hydrate=function(t,e,s){if(!qi(e))throw Error(R(200));return Hi(null,t,e,!0,s)};We.hydrateRoot=function(t,e,s){if(!Ro(t))throw Error(R(405));var n=s!=null&&s.hydratedSources||null,i=!1,a="",l=Lh;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),e=$h(e,null,t,1,s??null,i,!1,a,l),t[kt]=e.current,sn(t),n)for(t=0;t<n.length;t++)s=n[t],i=s._getVersion,i=i(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,i]:e.mutableSourceEagerHydrationData.push(s,i);return new Vi(e)};We.render=function(t,e,s){if(!qi(e))throw Error(R(200));return Hi(null,t,e,!1,s)};We.unmountComponentAtNode=function(t){if(!qi(t))throw Error(R(40));return t._reactRootContainer?(ws(function(){Hi(null,null,t,!1,function(){t._reactRootContainer=null,t[kt]=null})}),!0):!1};We.unstable_batchedUpdates=Co;We.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!qi(s))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return Hi(t,e,s,!1,n)};We.version="18.3.1-next-f1338f8080-20240426";function Oh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Oh)}catch(t){console.error(t)}}Oh(),Od.exports=We;var G0=Od.exports,Mh,Yc=G0;Mh=Yc.createRoot,Yc.hydrateRoot;const K0="modulepreload",J0=function(t){return"/"+t},Xc={},bn=function(e,s,n){let i=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(s.map(o=>{if(o=J0(o),o in Xc)return;Xc[o]=!0;const d=o.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${u}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":K0,d||(p.as="script"),p.crossOrigin="",p.href=o,c&&p.setAttribute("nonce",c),document.head.appendChild(p),d)return new Promise((x,y)=>{p.addEventListener("load",x),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${o}`)))})}))}function a(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return i.then(l=>{for(const c of l||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},Q0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>bn(async()=>{const{default:n}=await Promise.resolve().then(()=>vr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class $o extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class Y0 extends $o{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Zc extends $o{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ed extends $o{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Pl;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Pl||(Pl={}));var X0=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function c(u){try{d(n.next(u))}catch(p){l(p)}}function o(u){try{d(n.throw(u))}catch(p){l(p)}}function d(u){u.done?a(u.value):i(u.value).then(c,o)}d((n=n.apply(t,e||[])).next())})};class Z0{constructor(e,{headers:s={},customFetch:n,region:i=Pl.Any}={}){this.url=e,this.headers=s,this.region=i,this.fetch=Q0(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return X0(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:l}=s;let c={},{region:o}=s;o||(o=this.region);const d=new URL(`${this.url}/${e}`);o&&o!=="any"&&(c["x-region"]=o,d.searchParams.set("forceFunctionRegion",o));let u;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",u=l):typeof l=="string"?(c["Content-Type"]="text/plain",u=l):typeof FormData<"u"&&l instanceof FormData?u=l:(c["Content-Type"]="application/json",u=JSON.stringify(l)));const p=yield this.fetch(d.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:u}).catch(N=>{throw new Y0(N)}),x=p.headers.get("x-relay-error");if(x&&x==="true")throw new Zc(p);if(!p.ok)throw new ed(p);let y=((n=p.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),b;return y==="application/json"?b=yield p.json():y==="application/octet-stream"?b=yield p.blob():y==="text/event-stream"?b=p:y==="multipart/form-data"?b=yield p.formData():b=yield p.text(),{data:b,error:null,response:p}}catch(i){return{data:null,error:i,response:i instanceof ed||i instanceof Zc?i.context:void 0}}})}}var Re={},Lo={},Wi={},jn={},Gi={},Ki={},ep=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},fr=ep();const tp=fr.fetch,Uh=fr.fetch.bind(fr),Fh=fr.Headers,sp=fr.Request,rp=fr.Response,vr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Fh,Request:sp,Response:rp,default:Uh,fetch:tp},Symbol.toStringTag,{value:"Module"})),np=bm(vr);var Ji={};Object.defineProperty(Ji,"__esModule",{value:!0});let ip=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ji.default=ip;var zh=Xe&&Xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ki,"__esModule",{value:!0});const ap=zh(np),lp=zh(Ji);let op=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=ap.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var l,c,o;let d=null,u=null,p=null,x=a.status,y=a.statusText;if(a.ok){if(this.method!=="HEAD"){const m=await a.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=m:u=JSON.parse(m))}const N=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),v=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");N&&v&&v.length>1&&(p=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,p=null,x=406,y="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const N=await a.text();try{d=JSON.parse(N),Array.isArray(d)&&a.status===404&&(u=[],d=null,x=200,y="OK")}catch{a.status===404&&N===""?(x=204,y="No Content"):d={message:N}}if(d&&this.isMaybeSingle&&(!((o=d==null?void 0:d.details)===null||o===void 0)&&o.includes("0 rows"))&&(d=null,x=200,y="OK"),d&&this.shouldThrowOnError)throw new lp.default(d)}return{error:d,data:u,count:p,status:x,statusText:y}});return this.shouldThrowOnError||(i=i.catch(a=>{var l,c,o;return{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(c=a==null?void 0:a.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(o=a==null?void 0:a.code)!==null&&o!==void 0?o:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,s)}returns(){return this}overrideTypes(){return this}};Ki.default=op;var cp=Xe&&Xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gi,"__esModule",{value:!0});const dp=cp(Ki);let up=class extends dp.default{select(e){let s=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!s?"":(i==='"'&&(s=!s),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const l=a?`${a}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(l,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:l="text"}={}){var c;const o=[e?"analyze":null,s?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${d}"; options=${o};`,l==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Gi.default=up;var hp=Xe&&Xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jn,"__esModule",{value:!0});const mp=hp(Gi);let fp=class extends mp.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${l}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};jn.default=fp;var pp=Xe&&Xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wi,"__esModule",{value:!0});const Ir=pp(jn);let gp=class{constructor(e,{headers:s={},schema:n,fetch:i}){this.url=e,this.headers=s,this.schema=n,this.fetch=i}select(e,{head:s=!1,count:n}={}){const i=s?"HEAD":"GET";let a=!1;const l=(e??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",l),n&&(this.headers.Prefer=`count=${n}`),new Ir.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:n=!0}={}){const i="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,o)=>c.concat(Object.keys(o)),[]);if(l.length>0){const c=[...new Set(l)].map(o=>`"${o}"`);this.url.searchParams.set("columns",c.join(","))}}return new Ir.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){const l="POST",c=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&c.push(this.headers.Prefer),i&&c.push(`count=${i}`),a||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(e)){const o=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(o.length>0){const d=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Ir.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),this.headers.Prefer=i.join(","),new Ir.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Ir.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Wi.default=gp;var Qi={},Yi={};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.version=void 0;Yi.version="0.0.0-automated";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.DEFAULT_HEADERS=void 0;const xp=Yi;Qi.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${xp.version}`};var Bh=Xe&&Xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lo,"__esModule",{value:!0});const yp=Bh(Wi),vp=Bh(jn),bp=Qi;let jp=class Vh{constructor(e,{headers:s={},schema:n,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},bp.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=i}from(e){const s=new URL(`${this.url}/${e}`);return new yp.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Vh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:i=!1,count:a}={}){let l;const c=new URL(`${this.url}/rpc/${e}`);let o;n||i?(l=n?"HEAD":"GET",Object.entries(s).filter(([u,p])=>p!==void 0).map(([u,p])=>[u,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([u,p])=>{c.searchParams.append(u,p)})):(l="POST",o=s);const d=Object.assign({},this.headers);return a&&(d.Prefer=`count=${a}`),new vp.default({method:l,url:c,headers:d,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}};Lo.default=jp;var br=Xe&&Xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Re,"__esModule",{value:!0});Re.PostgrestError=Re.PostgrestBuilder=Re.PostgrestTransformBuilder=Re.PostgrestFilterBuilder=Re.PostgrestQueryBuilder=Re.PostgrestClient=void 0;const qh=br(Lo);Re.PostgrestClient=qh.default;const Hh=br(Wi);Re.PostgrestQueryBuilder=Hh.default;const Wh=br(jn);Re.PostgrestFilterBuilder=Wh.default;const Gh=br(Gi);Re.PostgrestTransformBuilder=Gh.default;const Kh=br(Ki);Re.PostgrestBuilder=Kh.default;const Jh=br(Ji);Re.PostgrestError=Jh.default;var wp=Re.default={PostgrestClient:qh.default,PostgrestQueryBuilder:Hh.default,PostgrestFilterBuilder:Wh.default,PostgrestTransformBuilder:Gh.default,PostgrestBuilder:Kh.default,PostgrestError:Jh.default};const{PostgrestClient:Np,PostgrestQueryBuilder:xy,PostgrestFilterBuilder:yy,PostgrestTransformBuilder:vy,PostgrestBuilder:by,PostgrestError:jy}=wp;function _p(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const kp=_p(),Sp="2.11.15",Cp=`realtime-js/${Sp}`,Pp="1.0.0",Qh=1e4,Ep=1e3;var Wr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Wr||(Wr={}));var _e;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(_e||(_e={}));var it;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(it||(it={}));var El;(function(t){t.websocket="websocket"})(El||(El={}));var cs;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(cs||(cs={}));class Ip{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const i=s.getUint8(1),a=s.getUint8(2);let l=this.HEADER_LENGTH+2;const c=n.decode(e.slice(l,l+i));l=l+i;const o=n.decode(e.slice(l,l+a));l=l+a;const d=JSON.parse(n.decode(e.slice(l,e.byteLength)));return{ref:null,topic:c,event:o,payload:d}}}class Yh{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var X;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(X||(X={}));const td=(t,e,s={})=>{var n;const i=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,l)=>(a[l]=Dp(l,t,e,i),a),{})},Dp=(t,e,s,n)=>{const i=e.find(c=>c.name===t),a=i==null?void 0:i.type,l=s[t];return a&&!n.includes(a)?Xh(a,l):Il(l)},Xh=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return $p(e,s)}switch(t){case X.bool:return Tp(e);case X.float4:case X.float8:case X.int2:case X.int4:case X.int8:case X.numeric:case X.oid:return Ap(e);case X.json:case X.jsonb:return Rp(e);case X.timestamp:return Lp(e);case X.abstime:case X.date:case X.daterange:case X.int4range:case X.int8range:case X.money:case X.reltime:case X.text:case X.time:case X.timestamptz:case X.timetz:case X.tsrange:case X.tstzrange:return Il(e);default:return Il(e)}},Il=t=>t,Tp=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Ap=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Rp=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},$p=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let a;const l=t.slice(1,s);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(c=>Xh(e,c))}return t},Lp=t=>typeof t=="string"?t.replace(" ","T"):t,Zh=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Pa{constructor(e,s,n={},i=Qh){this.channel=e,this.event=s,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var sd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(sd||(sd={}));class Gr{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gr.syncState(this.state,i,a,l),this.pendingDiffs.forEach(o=>{this.state=Gr.syncDiff(this.state,o,a,l)}),this.pendingDiffs=[],c()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Gr.syncDiff(this.state,i,a,l),c())}),this.onJoin((i,a,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:l})}),this.onLeave((i,a,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,i){const a=this.cloneDeep(e),l=this.transformState(s),c={},o={};return this.map(a,(d,u)=>{l[d]||(o[d]=u)}),this.map(l,(d,u)=>{const p=a[d];if(p){const x=u.map(v=>v.presence_ref),y=p.map(v=>v.presence_ref),b=u.filter(v=>y.indexOf(v.presence_ref)<0),N=p.filter(v=>x.indexOf(v.presence_ref)<0);b.length>0&&(c[d]=b),N.length>0&&(o[d]=N)}else c[d]=u}),this.syncDiff(a,{joins:c,leaves:o},n,i)}static syncDiff(e,s,n,i){const{joins:a,leaves:l}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(c,o)=>{var d;const u=(d=e[c])!==null&&d!==void 0?d:[];if(e[c]=this.cloneDeep(o),u.length>0){const p=e[c].map(y=>y.presence_ref),x=u.filter(y=>p.indexOf(y.presence_ref)<0);e[c].unshift(...x)}n(c,u,o)}),this.map(l,(c,o)=>{let d=e[c];if(!d)return;const u=o.map(p=>p.presence_ref);d=d.filter(p=>u.indexOf(p.presence_ref)<0),e[c]=d,i(c,d,o),d.length===0&&delete e[c]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const i=e[n];return"metas"in i?s[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):s[n]=i,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(rd||(rd={}));var nd;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(nd||(nd={}));var yt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(yt||(yt={}));class Oo{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=_e.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Pa(this,it.join,this.params,this.timeout),this.rejoinTimer=new Yh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_e.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_e.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=_e.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_e.errored,this.rejoinTimer.scheduleTimeout())}),this._on(it.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new Gr(this),this.broadcastEndpointURL=Zh(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==_e.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params;this._onError(u=>e==null?void 0:e(yt.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(yt.CLOSED));const o={},d={broadcast:a,presence:l,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&i!==void 0?i:[],private:c};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},o)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var p;if(this.socket.setAuth(),u===void 0){e==null||e(yt.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,y=(p=x==null?void 0:x.length)!==null&&p!==void 0?p:0,b=[];for(let N=0;N<y;N++){const v=x[N],{filter:{event:m,schema:h,table:f,filter:g}}=v,w=u&&u[N];if(w&&w.event===m&&w.schema===h&&w.table===f&&w.filter===g)b.push(Object.assign(Object.assign({},v),{id:w.id}));else{this.unsubscribe(),this.state=_e.errored,e==null||e(yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(yt.SUBSCRIBED);return}}).receive("error",u=>{this.state=_e.errored,e==null||e(yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this._on(e,s,n)}async send(e,s={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:l}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,c,o;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((o=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||o===void 0)&&o.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=_e.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(it.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Pa(this,it.leave,{},e),n.receive("ok",()=>{s(),i("ok")}).receive("timeout",()=>{s(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),l=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(a),l}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Pa(this,e,s,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var i,a;const l=e.toLocaleLowerCase(),{close:c,error:o,leave:d,join:u}=it;if(n&&[c,o,d,u].indexOf(l)>=0&&n!==this._joinRef())return;let x=this._onMessage(l,s,n);if(s&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var b,N,v;return((b=y.filter)===null||b===void 0?void 0:b.event)==="*"||((v=(N=y.filter)===null||N===void 0?void 0:N.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===l}).map(y=>y.callback(x,n)):(a=this.bindings[l])===null||a===void 0||a.filter(y=>{var b,N,v,m,h,f;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in y){const g=y.id,w=(b=y.filter)===null||b===void 0?void 0:b.event;return g&&((N=s.ids)===null||N===void 0?void 0:N.includes(g))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((v=s.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const g=(h=(m=y==null?void 0:y.filter)===null||m===void 0?void 0:m.event)===null||h===void 0?void 0:h.toLocaleLowerCase();return g==="*"||g===((f=s==null?void 0:s.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===l}).map(y=>{if(typeof x=="object"&&"ids"in x){const b=x.data,{schema:N,table:v,commit_timestamp:m,type:h,errors:f}=b;x=Object.assign(Object.assign({},{schema:N,table:v,commit_timestamp:m,eventType:h,new:{},old:{},errors:f}),this._getPayloadRecords(b))}y.callback(x,n)})}_isClosed(){return this.state===_e.closed}_isJoined(){return this.state===_e.joined}_isJoining(){return this.state===_e.joining}_isLeaving(){return this.state===_e.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const i=e.toLocaleLowerCase(),a={type:i,filter:s,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Oo.isEqual(i.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(it.close,{},e)}_onError(e){this._on(it.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_e.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=td(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=td(e.columns,e.old_record)),s}}const id=()=>{},Op=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Mp{constructor(e,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Qh,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=id,this.ref=0,this.logger=id,this.conn=null,this.sendBuffer=[],this.serializer=new Ip,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...c)=>bn(async()=>{const{default:o}=await Promise.resolve().then(()=>vr);return{default:o}},void 0).then(({default:o})=>o(...c)):l=fetch,(...c)=>l(...c)},this.endPoint=`${e}/${El.websocket}`,this.httpEndpoint=Zh(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const i=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(a,l)=>l(JSON.stringify(a)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Yh(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=kp),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Pp}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Wr.connecting:return cs.Connecting;case Wr.open:return cs.Open;case Wr.closing:return cs.Closing;default:return cs.Closed}}isConnected(){return this.connectionState()===cs.Open}channel(e,s={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new Oo(`realtime:${e}`,s,this);return this.channels.push(a),a}}push(e){const{topic:s,event:n,payload:i,ref:a}=e,l=()=>{this.encode(e,c=>{var o;(o=this.conn)===null||o===void 0||o.send(c)})};this.log("push",`${s} ${n} (${a})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const i={access_token:s,version:Cp};s&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(it.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Ep,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:n,event:i,payload:a,ref:l}=s;n==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${i} ${l&&"("+l+")"||""}`,a),Array.from(this.channels).filter(c=>c._isMember(n)).forEach(c=>c._trigger(i,a,l)),this.stateChangeCallbacks.message.forEach(c=>c(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(it.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${e}${n}${i}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([Op],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class Mo extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function pe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Up extends Mo{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Dl extends Mo{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var Fp=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function c(u){try{d(n.next(u))}catch(p){l(p)}}function o(u){try{d(n.throw(u))}catch(p){l(p)}}function d(u){u.done?a(u.value):i(u.value).then(c,o)}d((n=n.apply(t,e||[])).next())})};const em=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>bn(async()=>{const{default:n}=await Promise.resolve().then(()=>vr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},zp=()=>Fp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield bn(()=>Promise.resolve().then(()=>vr),void 0)).Response:Response}),Tl=t=>{if(Array.isArray(t))return t.map(s=>Tl(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const i=s.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=Tl(n)}),e};var Ps=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function c(u){try{d(n.next(u))}catch(p){l(p)}}function o(u){try{d(n.throw(u))}catch(p){l(p)}}function d(u){u.done?a(u.value):i(u.value).then(c,o)}d((n=n.apply(t,e||[])).next())})};const Ea=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Bp=(t,e,s)=>Ps(void 0,void 0,void 0,function*(){const n=yield zp();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(i=>{e(new Up(Ea(i),t.status||500))}).catch(i=>{e(new Dl(Ea(i),i))}):e(new Dl(Ea(t),t))}),Vp=(t,e,s,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),s))};function wn(t,e,s,n,i,a){return Ps(this,void 0,void 0,function*(){return new Promise((l,c)=>{t(s,Vp(e,n,i,a)).then(o=>{if(!o.ok)throw o;return n!=null&&n.noResolveJson?o:o.json()}).then(o=>l(o)).catch(o=>Bp(o,c,n))})})}function Ci(t,e,s,n){return Ps(this,void 0,void 0,function*(){return wn(t,"GET",e,s,n)})}function Lt(t,e,s,n,i){return Ps(this,void 0,void 0,function*(){return wn(t,"POST",e,n,i,s)})}function qp(t,e,s,n,i){return Ps(this,void 0,void 0,function*(){return wn(t,"PUT",e,n,i,s)})}function Hp(t,e,s,n){return Ps(this,void 0,void 0,function*(){return wn(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function tm(t,e,s,n,i){return Ps(this,void 0,void 0,function*(){return wn(t,"DELETE",e,n,i,s)})}var Te=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function c(u){try{d(n.next(u))}catch(p){l(p)}}function o(u){try{d(n.throw(u))}catch(p){l(p)}}function d(u){u.done?a(u.value):i(u.value).then(c,o)}d((n=n.apply(t,e||[])).next())})};const Wp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ad={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Gp{constructor(e,s={},n,i){this.url=e,this.headers=s,this.bucketId=n,this.fetch=em(i)}uploadOrUpdate(e,s,n,i){return Te(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},ad),i);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const o=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",l.cacheControl),o&&a.append("metadata",this.encodeMetadata(o))):(a=n,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,o&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),i!=null&&i.headers&&(c=Object.assign(Object.assign({},c),i.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),p=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:a,headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{})),x=yield p.json();return p.ok?{data:{path:d,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(a){if(pe(a))return{data:null,error:a};throw a}})}upload(e,s,n){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,i){return Te(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${l}`);c.searchParams.set("token",s);try{let o;const d=Object.assign({upsert:ad.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",d.cacheControl),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",d.cacheControl)):(o=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const p=yield this.fetch(c.toString(),{method:"PUT",body:o,headers:u}),x=yield p.json();return p.ok?{data:{path:a,fullPath:x.Key},error:null}:{data:null,error:x}}catch(o){if(pe(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,s){return Te(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);s!=null&&s.upsert&&(i["x-upsert"]="true");const a=yield Lt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),l=new URL(this.url+a.url),c=l.searchParams.get("token");if(!c)throw new Mo("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:c},error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}update(e,s,n){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return Te(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(pe(i))return{data:null,error:i};throw i}})}copy(e,s,n){return Te(this,void 0,void 0,function*(){try{return{data:{path:(yield Lt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(pe(i))return{data:null,error:i};throw i}})}createSignedUrl(e,s,n){return Te(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Lt(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(i){if(pe(i))return{data:null,error:i};throw i}})}createSignedUrls(e,s,n){return Te(this,void 0,void 0,function*(){try{const i=yield Lt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(i){if(pe(i))return{data:null,error:i};throw i}})}download(e,s){return Te(this,void 0,void 0,function*(){const i=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),l=a?`?${a}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield Ci(this.fetch,`${this.url}/${i}/${c}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(pe(c))return{data:null,error:c};throw c}})}info(e){return Te(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield Ci(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Tl(n),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}exists(e){return Te(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield Hp(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(pe(n)&&n instanceof Dl){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),i=[],a=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";a!==""&&i.push(a);const c=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});o!==""&&i.push(o);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${n}${d}`)}}}remove(e){return Te(this,void 0,void 0,function*(){try{return{data:yield tm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}list(e,s,n){return Te(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Wp),s),{prefix:e||""});return{data:yield Lt(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(pe(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const Kp="2.7.1",Jp={"X-Client-Info":`storage-js/${Kp}`};var As=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function c(u){try{d(n.next(u))}catch(p){l(p)}}function o(u){try{d(n.throw(u))}catch(p){l(p)}}function d(u){u.done?a(u.value):i(u.value).then(c,o)}d((n=n.apply(t,e||[])).next())})};class Qp{constructor(e,s={},n){this.url=e,this.headers=Object.assign(Object.assign({},Jp),s),this.fetch=em(n)}listBuckets(){return As(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(pe(e))return{data:null,error:e};throw e}})}getBucket(e){return As(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return As(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return As(this,void 0,void 0,function*(){try{return{data:yield qp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}})}emptyBucket(e){return As(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}deleteBucket(e){return As(this,void 0,void 0,function*(){try{return{data:yield tm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}})}}class Yp extends Qp{constructor(e,s={},n){super(e,s,n)}from(e){return new Gp(this.url,this.headers,e,this.fetch)}}const Xp="2.52.0";let Lr="";typeof Deno<"u"?Lr="deno":typeof document<"u"?Lr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Lr="react-native":Lr="node";const Zp={"X-Client-Info":`supabase-js-${Lr}/${Xp}`},eg={headers:Zp},tg={schema:"public"},sg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},rg={};var ng=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function c(u){try{d(n.next(u))}catch(p){l(p)}}function o(u){try{d(n.throw(u))}catch(p){l(p)}}function d(u){u.done?a(u.value):i(u.value).then(c,o)}d((n=n.apply(t,e||[])).next())})};const ig=t=>{let e;return t?e=t:typeof fetch>"u"?e=Uh:e=fetch,(...s)=>e(...s)},ag=()=>typeof Headers>"u"?Fh:Headers,lg=(t,e,s)=>{const n=ig(s),i=ag();return(a,l)=>ng(void 0,void 0,void 0,function*(){var c;const o=(c=yield e())!==null&&c!==void 0?c:t;let d=new i(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${o}`),n(a,Object.assign(Object.assign({},l),{headers:d}))})};var og=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function c(u){try{d(n.next(u))}catch(p){l(p)}}function o(u){try{d(n.throw(u))}catch(p){l(p)}}function d(u){u.done?a(u.value):i(u.value).then(c,o)}d((n=n.apply(t,e||[])).next())})};function cg(t){return t.endsWith("/")?t:t+"/"}function dg(t,e){var s,n;const{db:i,auth:a,realtime:l,global:c}=t,{db:o,auth:d,realtime:u,global:p}=e,x={db:Object.assign(Object.assign({},o),i),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},u),l),global:Object.assign(Object.assign(Object.assign({},p),c),{headers:Object.assign(Object.assign({},(s=p==null?void 0:p.headers)!==null&&s!==void 0?s:{}),(n=c==null?void 0:c.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>og(this,void 0,void 0,function*(){return""})};return t.accessToken?x.accessToken=t.accessToken:delete x.accessToken,x}const sm="2.71.1",Us=30*1e3,Al=3,Ia=Al*Us,ug="http://localhost:9999",hg="supabase.auth.token",mg={"X-Client-Info":`gotrue-js/${sm}`},Rl="X-Supabase-Api-Version",rm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},fg=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,pg=10*60*1e3;class Uo extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function H(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class gg extends Uo{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function xg(t){return H(t)&&t.name==="AuthApiError"}class nm extends Uo{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class rs extends Uo{constructor(e,s,n,i){super(e,n,i),this.name=s,this.status=n}}class At extends rs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function yg(t){return H(t)&&t.name==="AuthSessionMissingError"}class Bn extends rs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Vn extends rs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qn extends rs{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function vg(t){return H(t)&&t.name==="AuthImplicitGrantRedirectError"}class ld extends rs{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $l extends rs{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Da(t){return H(t)&&t.name==="AuthRetryableFetchError"}class od extends rs{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class Ll extends rs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),cd=` 	
\r=`.split(""),bg=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<cd.length;e+=1)t[cd[e].charCodeAt(0)]=-2;for(let e=0;e<Pi.length;e+=1)t[Pi[e].charCodeAt(0)]=e;return t})();function dd(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Pi[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Pi[n]),e.queuedBits-=6}}function im(t,e,s){const n=bg[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function ud(t){const e=[],s=l=>{e.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=l=>{Ng(l,n,s)};for(let l=0;l<t.length;l+=1)im(t.charCodeAt(l),i,a);return e.join("")}function jg(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function wg(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|i)+65536,s+=1}jg(n,e)}}function Ng(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function _g(t){const e=[],s={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)im(t.charCodeAt(i),s,n);return new Uint8Array(e)}function kg(t){const e=[];return wg(t,s=>e.push(s)),new Uint8Array(e)}function Sg(t){const e=[],s={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>dd(i,s,n)),dd(null,s,n),e.join("")}function Cg(t){return Math.round(Date.now()/1e3)+t}function Pg(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const st=()=>typeof window<"u"&&typeof document<"u",ns={tested:!1,writable:!1},am=()=>{if(!st())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ns.tested)return ns.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ns.tested=!0,ns.writable=!0}catch{ns.tested=!0,ns.writable=!1}return ns.writable};function Eg(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return s.searchParams.forEach((n,i)=>{e[i]=n}),e}const lm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>bn(async()=>{const{default:n}=await Promise.resolve().then(()=>vr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Ig=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Fs=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},is=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Tt=async(t,e)=>{await t.removeItem(e)};class Xi{constructor(){this.promise=new Xi.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Xi.promiseConstructor=Promise;function Ta(t){const e=t.split(".");if(e.length!==3)throw new Ll("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!fg.test(e[n]))throw new Ll("JWT not in base64url format");return{header:JSON.parse(ud(e[0])),payload:JSON.parse(ud(e[1])),signature:_g(e[2]),raw:{header:e[0],payload:e[1]}}}async function Dg(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Tg(t,e){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){n(l);return}}catch(l){if(!e(a,l)){i(l);return}}})()})}function Ag(t){return("0"+t.toString(16)).substr(-2)}function Rg(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let i="";for(let a=0;a<56;a++)i+=s.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,Ag).join("")}async function $g(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function Lg(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await $g(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Rs(t,e,s=!1){const n=Rg();let i=n;s&&(i+="/PASSWORD_RECOVERY"),await Fs(t,`${e}-code-verifier`,i);const a=await Lg(n);return[a,n===a?"plain":"s256"]}const Og=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Mg(t){const e=t.headers.get(Rl);if(!e||!e.match(Og))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Ug(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Fg(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const zg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function $s(t){if(!zg.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Aa(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hd(t){return JSON.parse(JSON.stringify(t))}var Bg=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s};const os=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Vg=[502,503,504];async function md(t){var e;if(!Ig(t))throw new $l(os(t),0);if(Vg.includes(t.status))throw new $l(os(t),t.status);let s;try{s=await t.json()}catch(a){throw new nm(os(a),a)}let n;const i=Mg(t);if(i&&i.getTime()>=rm["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new od(os(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new At}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new od(os(s),t.status,s.weak_password.reasons);throw new gg(os(s),t.status||500,n)}const qg=(t,e,s,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),s))};async function G(t,e,s,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[Rl]||(a[Rl]=rm["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const l=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",o=await Hg(t,e,s+c,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(o):{data:Object.assign({},o),error:null}}async function Hg(t,e,s,n,i,a){const l=qg(e,n,i,a);let c;try{c=await t(s,Object.assign({},l))}catch(o){throw console.error(o),new $l(os(o),0)}if(c.ok||await md(c),n!=null&&n.noResolveJson)return c;try{return await c.json()}catch(o){await md(o)}}function gt(t){var e;let s=null;Jg(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Cg(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function fd(t){const e=gt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ut(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Wg(t){return{data:t,error:null}}function Gg(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:i,verification_type:a}=t,l=Bg(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:s,hashed_token:n,redirect_to:i,verification_type:a},o=Object.assign({},l);return{data:{properties:c,user:o},error:null}}function Kg(t){return t}function Jg(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ra=["global","local","others"];var Qg=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s};class Yg{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=lm(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=Ra[0]){if(Ra.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ra.join(", ")}`);try{return await G(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await G(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Ut})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=Qg(e,["options"]),i=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await G(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Gg,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(H(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await G(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ut})}catch(s){if(H(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,i,a,l,c,o;try{const d={nextPage:null,lastPage:0,total:0},u=await G(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Kg});if(u.error)throw u.error;const p=await u.json(),x=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(o=(c=u.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&o!==void 0?o:[];return y.length>0&&(y.forEach(b=>{const N=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);d[`${v}Page`]=N}),d.total=parseInt(x)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(H(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){$s(e);try{return await G(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ut})}catch(s){if(H(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){$s(e);try{return await G(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Ut})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){$s(e);try{return await G(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Ut})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){$s(e.userId);try{const{data:s,error:n}=await G(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:n}}catch(s){if(H(s))return{data:null,error:s};throw s}}async _deleteFactor(e){$s(e.userId),$s(e.id);try{return{data:await G(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(H(s))return{data:null,error:s};throw s}}}function pd(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Xg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ls={debug:!!(globalThis&&am()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class om extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Zg extends om{}async function ex(t,e,s){Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await s()}finally{Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Zg(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ls.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Xg();const tx={url:ug,storageKey:hg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function gd(t,e,s){return await s()}const Os={};class hn{constructor(e){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=hn.nextInstanceID,hn.nextInstanceID+=1,this.instanceID>0&&st()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},tx),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Yg({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=lm(i.fetch),this.lock=i.lock||gd,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:st()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=ex:this.lock=gd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:am()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=pd(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=pd(this.memoryStorage)),st()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=Os[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Os[this.storageKey]=Object.assign(Object.assign({},Os[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Os[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Os[this.storageKey]=Object.assign(Object.assign({},Os[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${sm}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=Eg(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),st()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(s,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),vg(a)){const o=(e=a.details)===null||e===void 0?void 0:e.code;if(o==="identity_already_exists"||o==="identity_not_found"||o==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return H(s)?{error:s}:{error:new nm("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,i;try{const a=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:gt}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const o=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:d,session:o},error:null}}catch(a){if(H(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var s,n,i;try{let a;if("email"in e){const{email:u,password:p,options:x}=e;let y=null,b=null;this.flowType==="pkce"&&([y,b]=await Rs(this.storage,this.storageKey)),a=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:u,password:p,data:(s=x==null?void 0:x.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:y,code_challenge_method:b},xform:gt})}else if("phone"in e){const{phone:u,password:p,options:x}=e;a=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:p,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},channel:(i=x==null?void 0:x.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:gt})}else throw new Vn("You must provide either an email or phone number and a password");const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const o=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:d,session:o},error:null}}catch(a){if(H(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let s;if("email"in e){const{email:a,password:l,options:c}=e;s=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:fd})}else if("phone"in e){const{phone:a,password:l,options:c}=e;s=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:fd})}else throw new Vn("You must provide either an email or phone number and a password");const{data:n,error:i}=s;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Bn}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(s){if(H(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,n,i,a,l,c,o,d,u,p,x,y;let b,N;if("message"in e)b=e.message,N=e.signature;else{const{chain:v,wallet:m,statement:h,options:f}=e;let g;if(st())if(typeof m=="object")g=m;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))g=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=m}const w=new URL((s=f==null?void 0:f.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in g&&g.signIn){const j=await g.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),h?{statement:h}:null));let _;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")_=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)_=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)b=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),N=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in g)||typeof g.signMessage!="function"||!("publicKey"in g)||typeof g!="object"||!g.publicKey||!("toBase58"in g.publicKey)||typeof g.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${w.host} wants you to sign in with your Solana account:`,g.publicKey.toBase58(),...h?["",h,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(i=(n=f==null?void 0:f.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=f==null?void 0:f.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((o=f==null?void 0:f.signInWithSolana)===null||o===void 0)&&o.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((d=f==null?void 0:f.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((p=(u=f==null?void 0:f.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||p===void 0)&&p.length?["Resources",...f.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const j=await g.signMessage(new TextEncoder().encode(b),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=j}}try{const{data:v,error:m}=await G(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Sg(N)},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:gt});if(m)throw m;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Bn}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:m})}catch(v){if(H(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(e){const s=await is(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(s??"").split("/");try{const{data:a,error:l}=await G(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:gt});if(await Tt(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Bn}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:l})}catch(a){if(H(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:s,provider:n,token:i,access_token:a,nonce:l}=e,c=await G(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:gt}),{data:o,error:d}=c;return d?{data:{user:null,session:null},error:d}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new Bn}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:d})}catch(s){if(H(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,i,a,l;try{if("email"in e){const{email:c,options:o}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Rs(this.storage,this.storageKey));const{error:p}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(s=o==null?void 0:o.data)!==null&&s!==void 0?s:{},create_user:(n=o==null?void 0:o.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:c,options:o}=e,{data:d,error:u}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=o==null?void 0:o.data)!==null&&i!==void 0?i:{},create_user:(a=o==null?void 0:o.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(l=o==null?void 0:o.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Vn("You must provide either an email or phone number.")}catch(c){if(H(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var s,n;try{let i,a;"options"in e&&(i=(s=e.options)===null||s===void 0?void 0:s.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:c}=await G(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:gt});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const o=l.session,d=l.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:d,session:o},error:null}}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var s,n,i;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await Rs(this.storage,this.storageKey)),await G(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Wg})}catch(a){if(H(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new At;const{error:i}=await G(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(H(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:a}=e,{error:l}=await G(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:n,type:i,options:a}=e,{data:l,error:c}=await G(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c}}throw new Vn("You must provide either an email or phone number and a type")}catch(s){if(H(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await is(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Ia:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const l=await is(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=Aa()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(o,d,u)=>(!l&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(o,d,u))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ut}):await this._useSession(async s=>{var n,i,a;const{data:l,error:c}=s;if(c)throw c;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new At}:await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Ut})})}catch(s){if(H(s))return yg(s)&&(await this._removeSession(),await Tt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new At;const l=i.session;let c=null,o=null;this.flowType==="pkce"&&e.email!=null&&([c,o]=await Rs(this.storage,this.storageKey));const{data:d,error:u}=await G(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:o}),jwt:l.access_token,xform:Ut});if(u)throw u;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new At;const s=Date.now()/1e3;let n=s,i=!0,a=null;const{payload:l}=Ta(e.access_token);if(l.exp&&(n=l.exp,i=n<=s),i){const{session:c,error:o}=await this._callRefreshToken(e.refresh_token);if(o)return{data:{user:null,session:null},error:o};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:o}=await this._getUser(e.access_token);if(o)throw o;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(s){if(H(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:l,error:c}=s;if(c)throw c;e=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new At;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(H(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!st())throw new qn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new ld("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qn("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ld("No code detected.");const{data:h,error:f}=await this._exchangeCodeForSession(e.code);if(f)throw f;const g=new URL(window.location.href);return g.searchParams.delete("code"),window.history.replaceState(window.history.state,"",g.toString()),{data:{session:h.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:l,expires_in:c,expires_at:o,token_type:d}=e;if(!a||!c||!l||!d)throw new qn("No session defined in URL");const u=Math.round(Date.now()/1e3),p=parseInt(c);let x=u+p;o&&(x=parseInt(o));const y=x-u;y*1e3<=Us&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);const b=x-p;u-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,x,u):u-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,x,u);const{data:N,error:v}=await this._getUser(a);if(v)throw v;const m={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:p,expires_at:x,refresh_token:l,token_type:d,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(H(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await is(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:i,error:a}=s;if(a)return{error:a};const l=(n=i.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(xg(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Tt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=Pg(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,i;try{const{data:{session:a},error:l}=s;if(l)throw l;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,s={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Rs(this.storage,this.storageKey,!0));try{return await G(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(a){if(H(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(H(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:i}=await this._useSession(async a=>{var l,c,o,d,u;const{data:p,error:x}=a;if(x)throw x;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await G(this.fetch,"GET",y,{headers:this.headers,jwt:(u=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return st()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(H(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,i;const{data:a,error:l}=s;if(l)throw l;return await G(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(H(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await Tg(async i=>(i>0&&await Dg(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await G(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:gt})),(i,a)=>{const l=200*Math.pow(2,i);return a&&Da(a)&&Date.now()+l-n<Us})}catch(n){if(this._debug(s,"error",n),H(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),st()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await is(this.storage,this.storageKey);if(i&&this.userStorage){let l=await is(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await Fs(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:Aa()}else if(i&&!i.user&&!i.user){const l=await is(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(i.user=l.user,await Tt(this.storage,this.storageKey+"-user"),await Fs(this.storage,this.storageKey,i)):i.user=Aa()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((s=i.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Ia;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Ia}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),Da(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:c}=await this._getUser(i.access_token);!c&&(l!=null&&l.user)?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new At;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Xi;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new At;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={session:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(i,"error",a),H(a)){const l={session:null,error:a};return Da(a)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,s,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,s)}catch(o){a.push(o)}});if(await Promise.all(l),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await Fs(this.userStorage,this.storageKey+"-user",{user:s.user});const i=Object.assign({},s);delete i.user;const a=hd(i);await Fs(this.storage,this.storageKey,a)}else{const i=hd(s);await Fs(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Tt(this.storage,this.storageKey),await Tt(this.storage,this.storageKey+"-code-verifier"),await Tt(this.storage,this.storageKey+"-user"),this.userStorage&&await Tt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&st()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Us);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Us);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Us}ms, refresh threshold is ${Al} ticks`),i<=Al&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof om)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!st()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const i=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,l]=await Rs(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(c.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:i,error:a}=s;return a?{data:null,error:a}:await G(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(H(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,i;const{data:a,error:l}=s;if(l)return{data:null,error:l};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:d}=await G(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((i=o==null?void 0:o.totp)===null||i===void 0)&&i.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(s){if(H(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:a}=s;if(a)return{data:null,error:a};const{data:l,error:c}=await G(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(s){if(H(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:a}=s;return a?{data:null,error:a}:await G(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(H(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],i=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Ta(i.access_token);let c=null;l.aal&&(c=l.aal);let o=c;((n=(s=i.user.factors)===null||s===void 0?void 0:s.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const u=l.amr||[];return{data:{currentLevel:c,nextLevel:o,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(c=>c.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(c=>c.kid===e),n&&this.jwks_cached_at+pg>i)return n;const{data:a,error:l}=await G(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(c=>c.kid===e),!n)?null:n}async getClaims(e,s={}){try{let n=e;if(!n){const{data:y,error:b}=await this.getSession();if(b||!y.session)return{data:null,error:b};n=y.session.access_token}const{header:i,payload:a,signature:l,raw:{header:c,payload:o}}=Ta(n);s!=null&&s.allowExpired||Ug(a.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!d){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:a,header:i,signature:l},error:null}}const u=Fg(i.alg),p=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,p,l,kg(`${c}.${o}`)))throw new Ll("Invalid JWT signature");return{data:{claims:a,header:i,signature:l},error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}}}hn.nextInstanceID=0;const sx=hn;class rx extends sx{constructor(e){super(e)}}var nx=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function c(u){try{d(n.next(u))}catch(p){l(p)}}function o(u){try{d(n.throw(u))}catch(p){l(p)}}function d(u){u.done?a(u.value):i(u.value).then(c,o)}d((n=n.apply(t,e||[])).next())})};class ix{constructor(e,s,n){var i,a,l;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const c=cg(e),o=new URL(c);this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const d=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:tg,realtime:rg,auth:Object.assign(Object.assign({},sg),{storageKey:d}),global:eg},p=dg(n??{},u);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=p.global.headers)!==null&&a!==void 0?a:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(x,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=p.auth)!==null&&l!==void 0?l:{},this.headers,p.global.fetch),this.fetch=lg(s,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new Np(new URL("rest/v1",o).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new Z0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Yp(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return nx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:i,storageKey:a,flowType:l,lock:c,debug:o},d,u){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rx({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:a,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:i,flowType:l,lock:c,debug:o,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Mp(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ax=(t,e,s)=>new ix(t,e,s),Fo="https://ptugkaewwrhzhadvdkoi.supabase.co",cm="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0dWdrYWV3d3JoemhhZHZka29pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5MTk5NjUsImV4cCI6MjA3MTQ5NTk2NX0.Wf5MhI-HFCZtEMdtYj854Zl3ENnNewsI-hD1PrzkkMc";console.log(" Supabase configur - Connexion directe active"),console.log(` URL: ${Fo}`);const ke=ax(Fo,cm),lx=async()=>{try{console.log(" Test de connexion Supabase...");const{data:t,error:e}=await Promise.race([ke.from("profiles").select("count").limit(1),new Promise((s,n)=>setTimeout(()=>n(new Error("Timeout de connexion")),5e3))]);return e?(console.error(" Erreur connexion Supabase:",e.message),{connected:!1,error:e.message}):(console.log(" Connexion Supabase russie !"),{connected:!0,error:null})}catch(t){const e=t instanceof Error?t.message:"Erreur inconnue";return console.error(" Connexion Supabase choue:",e),{connected:!1,error:e}}},dm=$.createContext(void 0),oe=()=>{const t=$.useContext(dm);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},ox=({children:t})=>{const[e,s]=$.useState(null),[n,i]=$.useState(!0);$.useEffect(()=>{(async()=>{try{const{data:{session:p}}=await ke.auth.getSession();if(p!=null&&p.user){const{data:x}=await ke.from("profiles").select("*").eq("id",p.user.id).single();if(x){const y={id:p.user.id,email:p.user.email,first_name:x.first_name||"",last_name:x.last_name||"",role:x.role||"tenant",phone:x.phone,address:x.address,preferences:x.preferences};s(y)}}}catch(p){console.error("Erreur lors de la vrification de session:",p)}finally{i(!1)}})();const{data:{subscription:u}}=ke.auth.onAuthStateChange(async(p,x)=>{if(p==="SIGNED_IN"&&(x!=null&&x.user)){const{data:y}=await ke.from("profiles").select("*").eq("id",x.user.id).single();if(y){const b={id:x.user.id,email:x.user.email,first_name:y.first_name||"",last_name:y.last_name||"",role:y.role||"tenant"};s(b)}}else p==="SIGNED_OUT"&&s(null)});return()=>u.unsubscribe()},[]);const o={user:e,login:async(d,u,p)=>{try{i(!0);const{data:x,error:y}=await ke.auth.signInWithPassword({email:d,password:u});if(y)return{success:!1,error:y.message};if(x.user){const{data:b}=await ke.from("profiles").select("*").eq("id",x.user.id).single();if(!b)return{success:!1,error:"Profil utilisateur introuvable"};if(b.role!==p)return{success:!1,error:`Ce compte est enregistr comme ${b.role}, pas comme ${p}.`};const N={id:x.user.id,email:x.user.email,first_name:b.first_name||"",last_name:b.last_name||"",role:b.role||"tenant"};return s(N),{success:!0}}return{success:!1,error:"Email ou mot de passe incorrect"}}catch(x){return{success:!1,error:x instanceof Error?x.message:"Erreur de connexion"}}finally{i(!1)}},signup:async d=>{try{i(!0);const{data:u,error:p}=await ke.auth.signUp({email:d.email,password:d.password,options:{data:{first_name:d.first_name,last_name:d.last_name,role:d.role}}});return p?{success:!1,error:p.message}:u.user?{success:!0}:{success:!1,error:"Erreur lors de la cration du compte"}}catch(u){return{success:!1,error:u instanceof Error?u.message:"Erreur lors de la cration du compte"}}finally{i(!1)}},logout:()=>{s(null),ke.auth.signOut()},loading:n};return r.jsx(dm.Provider,{value:o,children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),z=(t,e)=>{const s=$.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:c="",children:o,...d},u)=>$.createElement("svg",{ref:u,...cx,width:i,height:i,stroke:n,strokeWidth:l?Number(a)*24/Number(i):a,className:["lucide",`lucide-${dx(t)}`,c].join(" "),...d},[...e.map(([p,x])=>$.createElement(p,x)),...Array.isArray(o)?o:[o]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=z("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=z("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=z("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=z("Bath",[["path",{d:"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"1r8yf5"}],["line",{x1:"10",x2:"8",y1:"5",y2:"7",key:"h5g8z4"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"7",x2:"7",y1:"19",y2:"21",key:"16jp00"}],["line",{x1:"17",x2:"17",y1:"19",y2:"21",key:"1pxrnk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=z("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=z("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=z("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=z("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=z("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=z("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=z("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=z("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=z("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=z("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=z("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=z("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=z("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=z("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=z("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=z("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=z("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=z("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=z("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=z("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=z("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=z("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=z("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=z("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=z("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=z("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=z("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=z("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=z("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=z("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=z("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=z("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=z("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=z("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Px=()=>{const{login:t,signup:e,loading:s}=oe(),[n,i]=$.useState(!0),[a,l]=$.useState(!1),[c,o]=$.useState(!1),[d,u]=$.useState(!1),[p,x]=$.useState("owner"),[y,b]=$.useState(""),[N,v]=$.useState(""),[m,h]=$.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),f=D=>{h({...m,[D.target.name]:D.target.value}),b(""),v("")},g=()=>{if(!m.email||!m.password)return b("Veuillez remplir tous les champs obligatoires"),!1;if(!n&&!a){if(!m.firstName||!m.lastName)return b("Veuillez remplir tous les champs obligatoires"),!1;if(m.password!==m.confirmPassword)return b("Les mots de passe ne correspondent pas"),!1;if(m.password.length<6)return b("Le mot de passe doit contenir au moins 6 caractres"),!1}return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.email)?!0:(b("Veuillez entrer une adresse email valide"),!1)},w=async D=>{if(D.preventDefault(),b(""),v(""),!!g())try{if(a)v("Un email de rinitialisation a t envoy  votre adresse"),l(!1);else if(n){const F=await t(m.email,m.password,p);F.success||b(F.error||"Erreur de connexion")}else{const F=await e({email:m.email,password:m.password,first_name:m.firstName,last_name:m.lastName,role:p});F.success?(v("Compte cr avec succs ! Vous pouvez maintenant vous connecter."),i(!0),h({email:m.email,password:"",confirmPassword:"",firstName:"",lastName:""})):b(F.error||"Erreur lors de la cration du compte")}}catch(F){b(F instanceof Error?F.message:"Une erreur est survenue")}},j=()=>{h({email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),b(""),v("")},_=()=>{i(!0),l(!1),j()},k=()=>{i(!1),l(!1),j()},E=()=>{l(!0),i(!1),j()};return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-600 rounded-2xl flex items-center justify-center mb-6",children:r.jsx(Ns,{className:"h-8 w-8 text-white"})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"GestionLoc Pro"}),r.jsx("p",{className:"text-gray-600",children:"Gestion locative intelligente"})]}),r.jsx("div",{children:r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:a?"Rinitialiser le mot de passe":n?"Se connecter":"S'inscrire"})}),y&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:y}),N&&r.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:N}),r.jsxs("form",{className:"space-y-6",onSubmit:w,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Type de compte"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("button",{type:"button",onClick:()=>x("owner"),className:`flex flex-col items-center justify-center px-4 py-4 border rounded-lg transition-colors ${p==="owner"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(Ns,{className:"h-6 w-6 mb-2"}),r.jsx("span",{className:"text-sm font-medium",children:"Propritaire"})]}),r.jsxs("button",{type:"button",onClick:()=>x("tenant"),className:`flex flex-col items-center justify-center px-4 py-4 border rounded-lg transition-colors ${p==="tenant"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(pt,{className:"h-6 w-6 mb-2"}),r.jsx("span",{className:"text-sm font-medium",children:"Locataire"})]})]})]}),!n&&!a&&r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Prnom"}),r.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:m.firstName,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Votre prnom"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom"}),r.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,value:m.lastName,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Votre nom"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Zt,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:m.email,onChange:f,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"votre.email@exemple.com"})]})]}),!a&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mot de passe"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(yd,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"password",name:"password",type:c?"text":"password",required:!0,value:m.password,onChange:f,className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:""}),r.jsx("button",{type:"button",onClick:()=>o(!c),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:c?r.jsx(xd,{className:"h-5 w-5 text-gray-400"}):r.jsx(pr,{className:"h-5 w-5 text-gray-400"})})]})]}),!n&&!a&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmer le mot de passe"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(yd,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:d?"text":"password",required:!0,value:m.confirmPassword,onChange:f,className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:""}),r.jsx("button",{type:"button",onClick:()=>u(!d),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:d?r.jsx(xd,{className:"h-5 w-5 text-gray-400"}):r.jsx(pr,{className:"h-5 w-5 text-gray-400"})})]})]}),r.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s?r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Chargement..."]}):a?"Envoyer le lien de rinitialisation":n?"Se connecter":"S'inscrire"})]}),r.jsx("div",{className:"text-center space-y-2",children:a?r.jsx("button",{onClick:_,className:"text-blue-600 hover:text-blue-500 text-sm font-medium",children:"Retour  la connexion"}):n?r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-sm text-gray-600",children:["Pas encore de compte ?"," ",r.jsx("button",{onClick:k,className:"text-blue-600 hover:text-blue-500 font-medium",children:"S'inscrire"})]}),r.jsx("button",{onClick:E,className:"block text-blue-600 hover:text-blue-500 text-sm font-medium mx-auto",children:"Mot de passe oubli ?"})]}):r.jsxs("p",{className:"text-sm text-gray-600",children:["Dj un compte ?"," ",r.jsx("button",{onClick:_,className:"text-blue-600 hover:text-blue-500 font-medium",children:"Se connecter"})]})})]})})},Ex=({onMenuClick:t,user:e})=>{const{logout:s}=oe(),[n,i]=$.useState(!1);return us.useEffect(()=>{const a=l=>{l.target.closest(".profile-dropdown")||i(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),r.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("button",{onClick:t,className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500",children:r.jsx(yx,{className:"h-6 w-6"})}),r.jsxs("div",{className:"ml-4 lg:ml-0",children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Bonjour, ",(e==null?void 0:e.first_name)||(e==null?void 0:e.firstName)||"Utilisateur"]}),r.jsx("p",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{className:"relative p-2 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(um,{className:"w-5 h-5"})}),r.jsxs("div",{className:"relative profile-dropdown",children:[r.jsxs("button",{onClick:()=>i(!n),className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:r.jsx(pt,{className:"w-4 h-4 text-white"})}),r.jsx("span",{className:"text-sm font-medium hidden sm:block",children:(e==null?void 0:e.first_name)||(e==null?void 0:e.firstName)||"Utilisateur"})]}),n&&r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200",children:[r.jsxs("p",{className:"font-medium",children:[(e==null?void 0:e.first_name)||(e==null?void 0:e.firstName)," ",(e==null?void 0:e.last_name)||(e==null?void 0:e.lastName)]}),r.jsx("p",{className:"text-sm text-gray-500",children:e==null?void 0:e.email}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:(e==null?void 0:e.role)==="owner"?"Propritaire":"Locataire"})]}),r.jsxs("button",{onClick:s,className:"w-full flex items-center px-4 py-3 text-left text-red-600 hover:bg-red-50 transition-colors",children:[r.jsx(xx,{className:"w-4 h-4 mr-3"}),"Dconnexion"]})]})]})]})]})})},Ix=({isOpen:t,onClose:e,activeTab:s,onTabChange:n,userRole:i})=>{const c=i==="owner"?[{id:"dashboard",label:"Tableau de bord",icon:Ve},{id:"properties",label:"Proprits",icon:Ns},{id:"property-requests",label:"Demandes",icon:wt},{id:"visit-requests",label:"Visites",icon:fe},{id:"tenants",label:"Locataires",icon:wt},{id:"payments",label:"Paiements",icon:xs},{id:"expenses",label:"Dpenses",icon:ds},{id:"issues",label:"Problmes",icon:he},{id:"reports",label:"Rapports",icon:Zs},{id:"ai-agents",label:"Agents IA",icon:hm},{id:"subscription",label:"Abonnement",icon:fx},{id:"settings",label:"Paramtres",icon:jd}]:[{id:"search",label:"Recherche",icon:Ol},{id:"my-rental",label:"Mon logement",icon:Ve},{id:"history",label:"Mon historique",icon:fe},{id:"payments",label:"Paiements",icon:xs},{id:"issues",label:"Mes signalements",icon:he},{id:"settings",label:"Paramtres",icon:jd}];return r.jsxs(r.Fragment,{children:[t&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:e}),r.jsxs("div",{className:`
        fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0
        ${t?"translate-x-0":"-translate-x-full"}
      `,children:[r.jsxs("div",{className:"flex items-center justify-between p-6 lg:justify-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"GestionLoc Pro"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:i==="owner"?"Espace Propritaire":"Espace Locataire"})]}),r.jsx("button",{onClick:e,className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100",children:r.jsx(He,{className:"h-6 w-6"})})]}),r.jsx("nav",{className:"px-4 pb-4",children:c.map(o=>{const d=o.icon;return r.jsxs("button",{onClick:()=>{n(o.id),e()},className:`w-full flex items-center px-4 py-3 text-left rounded-lg mb-1 transition-all duration-200 ${s===o.id?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[r.jsx(d,{className:"w-5 h-5 mr-3"}),o.label]},o.id)})})]})]})},Dx=(t,e)=>typeof e=="string"&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z?$/.test(e)?new Date(e):e,Nd=(t,e)=>{try{return Array.isArray(e)?e.filter(s=>s&&typeof s=="object"&&s.id):e}catch(s){return console.warn(`Cleaning corrupted data for key "${t}":`,s),null}};function L(t,e){const[s,n]=$.useState(()=>{try{const a=window.localStorage.getItem(t);if(a){const l=JSON.parse(a,Dx),c=Nd(t,l);return c!==null?c:e}return e}catch(a){return console.error(`Error reading localStorage key "${t}":`,a),e}});return[s,a=>{try{const l=a instanceof Function?a(s):a,c=Nd(t,l);n(l),window.localStorage.setItem(t,JSON.stringify(c||l))}catch(l){console.error(`Error setting localStorage key "${t}":`,l)}}]}const Tx={"nav.dashboard":{fr:"Tableau de bord",en:"Dashboard"},"nav.properties":{fr:"Proprits",en:"Properties"},"nav.tenants":{fr:"Locataires",en:"Tenants"},"nav.payments":{fr:"Paiements",en:"Payments"},"nav.expenses":{fr:"Dpenses",en:"Expenses"},"nav.issues":{fr:"Problmes",en:"Issues"},"nav.reports":{fr:"Rapports",en:"Reports"},"nav.aiAgents":{fr:"Agents IA",en:"AI Agents"},"nav.subscription":{fr:"Abonnement",en:"Subscription"},"nav.settings":{fr:"Paramtres",en:"Settings"},"nav.search":{fr:"Recherche",en:"Search"},"nav.myRental":{fr:"Mon logement",en:"My Rental"},"common.add":{fr:"Ajouter",en:"Add"},"common.edit":{fr:"Modifier",en:"Edit"},"common.delete":{fr:"Supprimer",en:"Delete"},"common.save":{fr:"Sauvegarder",en:"Save"},"common.cancel":{fr:"Annuler",en:"Cancel"},"common.confirm":{fr:"Confirmer",en:"Confirm"},"common.loading":{fr:"Chargement...",en:"Loading..."},"common.search":{fr:"Rechercher",en:"Search"},"common.filter":{fr:"Filtrer",en:"Filter"},"common.export":{fr:"Exporter",en:"Export"},"common.download":{fr:"Tlcharger",en:"Download"},"common.upload":{fr:"Tlcharger",en:"Upload"},"common.close":{fr:"Fermer",en:"Close"},"common.back":{fr:"Retour",en:"Back"},"common.next":{fr:"Suivant",en:"Next"},"common.previous":{fr:"Prcdent",en:"Previous"},"common.yes":{fr:"Oui",en:"Yes"},"common.no":{fr:"Non",en:"No"},"currency.CAD":{fr:"Dollar canadien",en:"Canadian Dollar"},"currency.USD":{fr:"Dollar amricain",en:"US Dollar"},"currency.EUR":{fr:"Euro",en:"Euro"},"property.entire":{fr:"Logement entier",en:"Entire Property"},"property.shared":{fr:"Colocation",en:"Shared Housing"},"status.available":{fr:"Disponible",en:"Available"},"status.occupied":{fr:"Occup",en:"Occupied"},"status.pending":{fr:"En attente",en:"Pending"},"status.active":{fr:"Actif",en:"Active"},"status.inactive":{fr:"Inactif",en:"Inactive"},"status.resolved":{fr:"Rsolu",en:"Resolved"},"status.inProgress":{fr:"En cours",en:"In Progress"},"payment.paid":{fr:"Pay",en:"Paid"},"payment.late":{fr:"En retard",en:"Late"},"payment.overdue":{fr:"Impay",en:"Overdue"},"priority.low":{fr:"Faible",en:"Low"},"priority.medium":{fr:"Moyenne",en:"Medium"},"priority.high":{fr:"leve",en:"High"},"priority.urgent":{fr:"Urgente",en:"Urgent"},"settings.profile":{fr:"Profil utilisateur",en:"User Profile"},"settings.preferences":{fr:"Prfrences",en:"Preferences"},"settings.security":{fr:"Scurit",en:"Security"},"settings.language":{fr:"Langue",en:"Language"},"settings.currency":{fr:"Devise",en:"Currency"},"settings.theme":{fr:"Thme",en:"Theme"},"settings.notifications":{fr:"Notifications",en:"Notifications"},"settings.address":{fr:"Adresse",en:"Address"},"form.firstName":{fr:"Prnom",en:"First Name"},"form.lastName":{fr:"Nom",en:"Last Name"},"form.email":{fr:"Email",en:"Email"},"form.phone":{fr:"Tlphone",en:"Phone"},"form.address":{fr:"Adresse",en:"Address"},"form.street":{fr:"Rue",en:"Street"},"form.city":{fr:"Ville",en:"City"},"form.province":{fr:"Province",en:"Province/State"},"form.postalCode":{fr:"Code postal",en:"Postal Code"},"form.country":{fr:"Pays",en:"Country"},"form.rent":{fr:"Loyer",en:"Rent"},"form.amount":{fr:"Montant",en:"Amount"},"form.description":{fr:"Description",en:"Description"},"form.date":{fr:"Date",en:"Date"},"dashboard.welcome":{fr:"Bonjour",en:"Hello"},"dashboard.overview":{fr:"Vue d'ensemble de votre portefeuille immobilier",en:"Overview of your real estate portfolio"},"dashboard.totalProperties":{fr:"Proprits",en:"Properties"},"dashboard.totalTenants":{fr:"Locataires",en:"Tenants"},"dashboard.monthlyRevenue":{fr:"Revenus mensuels",en:"Monthly Revenue"},"dashboard.occupancyRate":{fr:"Taux d'occupation",en:"Occupancy Rate"},"plan.free":{fr:"Gratuit",en:"Free"},"plan.pro":{fr:"Pro",en:"Pro"},"plan.business":{fr:"Business",en:"Business"},"plan.current":{fr:"Plan actuel",en:"Current Plan"},"plan.popular":{fr:"Populaire",en:"Popular"},"plan.upgrade":{fr:"Mettre  niveau",en:"Upgrade"}};function _n(){var a;const{user:t}=oe(),e=((a=t==null?void 0:t.preferences)==null?void 0:a.language)||"fr";return{t:l=>{const c=Tx[l];return c?c[e]||c.fr||l:(console.warn(`Translation missing for key: ${l}`),l)},formatCurrency:l=>{const c=e==="fr"?"fr-CA":"en-CA";return new Intl.NumberFormat(c,{style:"currency",currency:"CAD",minimumFractionDigits:0,maximumFractionDigits:2}).format(l)},getCurrencySymbol:()=>"$",language:e}}class Ax{calculatePropertyProfit(e,s,n,i,a,l,c){const o=i.filter(E=>{const D=new Date(E.dueDate);return D.getMonth()===l&&D.getFullYear()===c&&this.isPaymentForProperty(E,e,n)}),d=a.filter(E=>{const D=new Date(E.date);return D.getMonth()===l&&D.getFullYear()===c&&E.propertyId===e.id}),u=o.reduce((E,D)=>E+D.amount,0),p=o.filter(E=>E.status==="paid").reduce((E,D)=>E+D.amount,0),x=u-p,y=this.calculateOccupancyRate(e,s,n),b=e.monthlyMortgage||0,N=e.monthlyFixedCharges||0,v=d.filter(E=>E.type==="maintenance").reduce((E,D)=>E+D.amount,0),m=d.filter(E=>E.type!=="maintenance").reduce((E,D)=>E+D.amount,0),h=b+N+v+m,f=p-b-N,g=p-h,w=p>0?g/p*100:0,j=g,_=e.purchasePrice&&e.purchasePrice>0?g/e.purchasePrice*100:0,k=_*12;return{propertyId:e.id,propertyName:e.name,period:{month:l,year:c},revenues:{totalRent:u,paidRent:p,pendingRent:x,occupancyRate:y},expenses:{mortgage:b,fixedCharges:N,maintenance:v,other:m,total:h},netProfit:{gross:f,net:g,margin:w},cashFlow:j,roi:{monthly:_,annual:k}}}calculatePortfolioProfit(e,s,n,i,a,l,c){const o=e.map(m=>this.calculatePropertyProfit(m,s,n,i,a,l,c)),d=o.reduce((m,h)=>m+h.revenues.paidRent,0),u=o.reduce((m,h)=>m+h.expenses.total,0),p=d-u,x=d>0?p/d*100:0,y=o.reduce((m,h)=>m+h.cashFlow,0),b=[...o].sort((m,h)=>h.netProfit.margin-m.netProfit.margin),N=b.slice(0,3).filter(m=>m.netProfit.margin>0),v=b.slice(-3).filter(m=>m.netProfit.margin<10);return{period:{month:l,year:c},totalRevenues:d,totalExpenses:u,netProfit:p,averageMargin:x,totalCashFlow:y,properties:o,topPerformers:N,underPerformers:v}}isPaymentForProperty(e,s,n){const i=n.find(a=>a.id===e.tenantId);return(i==null?void 0:i.propertyId)===s.id}calculateOccupancyRate(e,s,n){if(e.type==="entire")return n.filter(a=>a.propertyId===e.id).length>0?100:0;{const i=s.filter(l=>l.propertyId===e.id),a=n.filter(l=>l.propertyId===e.id).length;return i.length>0?a/i.length*100:0}}generateRecommendations(e){const s=[];return e.netProfit.margin<5&&s.push("Marge trs faible - Considrez augmenter le loyer ou rduire les dpenses"),e.revenues.occupancyRate<90&&s.push("Taux d'occupation faible - Amliorez la commercialisation"),e.expenses.maintenance>e.revenues.paidRent*.1&&s.push("Cots de maintenance levs - Planifiez une maintenance prventive"),e.netProfit.margin>20&&s.push("Excellente rentabilit - Considrez l'expansion du portefeuille"),e.revenues.pendingRent>0&&s.push("Paiements en attente - Activez les rappels automatiques"),s}calculateProjections(e,s=12){const n=[],i=new Date(e.period.year,e.period.month);for(let a=1;a<=s;a++){const l=new Date(i);l.setMonth(i.getMonth()+a);const c=e.netProfit.net*(1+e.revenues.occupancyRate/100),o=e.cashFlow*(1+e.revenues.occupancyRate/100);n.push({month:l.getMonth(),year:l.getFullYear(),projectedProfit:c,projectedCashFlow:o})}return n}}const Dr=new Ax;function Rx(){const[t]=L("gestionloc_properties",[]),[e]=L("gestionloc_units",[]),[s]=L("gestionloc_tenants",[]),[n]=L("gestionloc_payments",[]),[i]=L("gestionloc_expenses",[]),[a,l]=$.useState(null),[c,o]=$.useState(!1);$.useEffect(()=>{const v=async()=>{o(!0);try{const m=new Date,h=Dr.calculatePortfolioProfit(t,e,s,n,i,m.getMonth(),m.getFullYear());l(h)}catch(m){console.error("Erreur lors du calcul des profits:",m)}finally{o(!1)}};t.length>0&&v()},[t,e,s,n,i]);const d=(v,m)=>Dr.calculatePortfolioProfit(t,e,s,n,i,v,m),u=(v,m,h)=>{const f=t.find(g=>g.id===v);return f?Dr.calculatePropertyProfit(f,e,s,n,i,m,h):null};return{currentAnalysis:a,isCalculating:c,calculateForPeriod:d,calculateForProperty:u,getRecommendations:v=>{if(!a)return[];const m=a.properties.find(h=>h.propertyId===v);return m?Dr.generateRecommendations(m):[]},getProjections:(v,m=12)=>{if(!a)return[];const h=a.properties.find(f=>f.propertyId===v);return h?Dr.calculateProjections(h,m):[]},getTopPerformers:()=>(a==null?void 0:a.topPerformers)||[],getUnderPerformers:()=>(a==null?void 0:a.underPerformers)||[],calculateTrend:(v,m=6)=>{const h=[],f=new Date;for(let g=m;g>=0;g--){const w=new Date(f);w.setMonth(f.getMonth()-g);const j=u(v,w.getMonth(),w.getFullYear());j&&h.push({month:w.getMonth(),year:w.getFullYear(),netProfit:j.netProfit.net,margin:j.netProfit.margin,cashFlow:j.cashFlow})}return h}}}const _d=({onTabChange:t})=>{const{t:e,formatCurrency:s}=_n(),{currentAnalysis:n,isCalculating:i}=Rx(),[a]=L("gestionloc_properties",[]),[l]=L("gestionloc_tenants",[]),[c]=L("gestionloc_payments",[]),[o]=L("gestionloc_issues",[]),[d]=L("gestionloc_units",[]),[u]=L("gestionloc_requests",[]),p=new Date,x=p.getMonth(),y=p.getFullYear(),b=c.filter(S=>{const P=new Date(S.dueDate);return P.getMonth()===x&&P.getFullYear()===y}),N=b.reduce((S,P)=>S+P.amount,0),v=b.filter(S=>S.status==="paid").reduce((S,P)=>S+P.amount,0),m=b.length>0?b.filter(S=>S.status==="paid").length/b.length*100:0,h=b.filter(S=>S.status==="pending"||S.status==="late"||S.status==="overdue").reduce((S,P)=>S+P.amount,0),f=a.map(S=>{const P=l.filter(C=>C.propertyId===S.id),T=b.filter(C=>P.some(O=>O.id===C.tenantId)),M=T.reduce((C,O)=>C+O.amount,0),q=T.filter(C=>C.status==="paid").reduce((C,O)=>C+O.amount,0),V=T.length>0?T.filter(C=>C.status==="paid").length/T.length*100:0;return{property:S,totalRevenue:M,paidRevenue:q,completionRate:V,tenantsCount:P.length}}),g={totalProperties:a.length,actualRevenue:v,potentialRevenue:N,paymentCompletionRate:m,pendingIssues:o.filter(S=>S.status==="pending").length},w=a.reduce((S,P)=>{if(P.type==="entire")return S+1;{const T=d.filter(M=>M.propertyId===P.id);return S+T.length}},0),j=a.reduce((S,P)=>{if(P.type==="entire"){const T=l.filter(M=>M.propertyId===P.id);return S+(T.length>0?1:0)}else{const T=l.filter(M=>M.propertyId===P.id);return S+T.length}},0),_=w-j,k=w>0?j/w*100:0,E=c.sort((S,P)=>new Date(P.createdAt).getTime()-new Date(S.createdAt).getTime()).slice(0,5),D=o.filter(S=>S.priority==="urgent"&&S.status!=="resolved"),F=c.filter(S=>S.status==="late"||S.status==="overdue"),W=u.filter(S=>S.status==="en_attente"),I=c.filter(S=>S.status==="pending"),A=o.filter(S=>S.status!=="resolved"),B=c.filter(S=>S.status==="overdue"),re=l.filter(S=>{const P=new Date(S.leaseEnd),T=new Date,M=P.getTime()-T.getTime(),q=Math.ceil(M/(1e3*60*60*24));return q<=60&&q>0});return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Tableau de bord"}),r.jsx("p",{className:"text-gray-600",children:"Vue d'ensemble de votre portefeuille immobilier"})]}),(D.length>0||F.length>0||W.length>0)&&r.jsxs("div",{className:"mb-8 space-y-4",children:[W.length>0&&r.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(wt,{className:"w-5 h-5 text-blue-400 mr-3"}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-medium text-blue-800",children:[W.length," nouvelle",W.length>1?"s":""," demande",W.length>1?"s":""," de logement"]}),r.jsx("p",{className:"text-sm text-blue-700",children:"Des candidats souhaitent rejoindre vos proprits"})]})]}),r.jsx("button",{onClick:()=>t("property-requests"),className:"text-blue-600 hover:text-blue-800 font-medium text-sm",children:"Voir les demandes "})]})}),D.length>0&&r.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(he,{className:"w-5 h-5 text-red-400 mr-3"}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-medium text-red-800",children:[D.length," problme",D.length>1?"s":""," urgent",D.length>1?"s":""]}),r.jsx("p",{className:"text-sm text-red-700",children:"Ncessite une attention immdiate"})]})]}),r.jsx("button",{onClick:()=>t("issues"),className:"text-red-600 hover:text-red-800 font-medium text-sm",children:"Voir les problmes "})]})}),F.length>0&&r.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-400 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Pt,{className:"w-5 h-5 text-orange-400 mr-3"}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-medium text-orange-800",children:[F.length," paiement",F.length>1?"s":""," en retard"]}),r.jsx("p",{className:"text-sm text-orange-700",children:"Relances ncessaires"})]})]}),r.jsx("button",{onClick:()=>t("payments"),className:"text-orange-600 hover:text-orange-800 font-medium text-sm",children:"Voir les paiements "})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t("properties"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Proprits"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.totalProperties})]}),r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(Ns,{className:"w-6 h-6 text-blue-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t("tenants"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Units occupes"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[j,"/",w]})]}),r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:r.jsx(wt,{className:"w-6 h-6 text-green-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t("payments"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revenus perus ce mois"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:s(g.actualRevenue)}),r.jsxs("p",{className:"text-xs text-gray-500",children:["sur ",s(g.potentialRevenue)," attendus"]})]}),r.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center",children:r.jsx(Pt,{className:"w-6 h-6 text-emerald-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t("reports"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Taux de paiement"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[g.paymentCompletionRate.toFixed(1),"%"]}),r.jsxs("p",{className:"text-xs text-gray-500",children:[b.filter(S=>S.status==="paid").length,"/",b.length," paiements"]})]}),r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(er,{className:"w-6 h-6 text-blue-600"})})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t("payments"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Paiements en attente"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:I.length})]}),r.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:r.jsx(ze,{className:"w-6 h-6 text-yellow-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t("payments"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Paiements en retard"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:B.length})]}),r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:r.jsx(Ml,{className:"w-6 h-6 text-red-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t("issues"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Problmes ouverts"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:A.length})]}),r.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:r.jsx(he,{className:"w-6 h-6 text-orange-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t("tenants"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Baux expirant"}),r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:re.length})]}),r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:r.jsx(fe,{className:"w-6 h-6 text-purple-600"})})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t("properties"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Units disponibles"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:_})]}),r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:r.jsx(Ei,{className:"w-6 h-6 text-green-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t("payments"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revenus en attente"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:s(h)}),r.jsx("p",{className:"text-xs text-gray-500",children:" percevoir ce mois"})]}),r.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:r.jsx(ze,{className:"w-6 h-6 text-orange-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t("reports"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Taux d'occupation"}),r.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[k.toFixed(1),"%"]}),r.jsxs("p",{className:"text-xs text-gray-500",children:[j,"/",w," units"]})]}),r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:r.jsx(er,{className:"w-6 h-6 text-purple-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t("property-requests"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Demandes en attente"}),r.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:W.length})]}),r.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:r.jsx(wt,{className:"w-6 h-6 text-indigo-600"})})]})})]}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Analyse financire dtaille - ",new Date().toLocaleDateString("fr-FR",{month:"long",year:"numeric"})]}),i&&r.jsxs("div",{className:"flex items-center text-blue-600",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),r.jsx("span",{className:"text-sm",children:"Calcul en cours..."})]})]}),n&&r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200 p-6 mb-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-4",children:" Rsum du portefeuille"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Revenus totaux"}),r.jsx("p",{className:"text-xl font-bold text-green-600",children:s(n.totalRevenues)})]}),r.jsxs("div",{className:"bg-white rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Dpenses totales"}),r.jsx("p",{className:"text-xl font-bold text-red-600",children:s(n.totalExpenses)})]}),r.jsxs("div",{className:"bg-white rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Bnfice net"}),r.jsx("p",{className:`text-xl font-bold ${n.netProfit>=0?"text-green-600":"text-red-600"}`,children:s(n.netProfit)})]}),r.jsxs("div",{className:"bg-white rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Marge moyenne"}),r.jsxs("p",{className:`text-xl font-bold ${n.averageMargin>=0?"text-green-600":"text-red-600"}`,children:[n.averageMargin.toFixed(1),"%"]})]})]})]}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:n?n.properties.map(S=>a.find(T=>T.id===S.propertyId)?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:S.propertyName}),r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.netProfit.margin>=15?"bg-green-100 text-green-800":S.netProfit.margin>=5?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[S.netProfit.margin.toFixed(1),"% marge"]})]}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[r.jsx("h5",{className:"font-medium text-green-900 mb-2",children:" Revenus"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-green-700",children:"Loyers perus"}),r.jsx("span",{className:"font-semibold text-green-800",children:s(S.revenues.paidRent)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-green-600",children:"Taux d'occupation"}),r.jsxs("span",{className:"font-medium text-green-700",children:[S.revenues.occupancyRate.toFixed(1),"%"]})]})]})]}),r.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[r.jsx("h5",{className:"font-medium text-red-900 mb-2",children:" Dpenses"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-red-700",children:"Hypothque"}),r.jsx("span",{className:"font-semibold text-red-800",children:s(S.expenses.mortgage)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-red-700",children:"Charges fixes"}),r.jsx("span",{className:"font-semibold text-red-800",children:s(S.expenses.fixedCharges)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-red-700",children:"Maintenance"}),r.jsx("span",{className:"font-semibold text-red-800",children:s(S.expenses.maintenance)})]}),r.jsxs("div",{className:"flex justify-between border-t border-red-200 pt-1",children:[r.jsx("span",{className:"text-red-800 font-medium",children:"Total"}),r.jsx("span",{className:"font-bold text-red-900",children:s(S.expenses.total)})]})]})]}),r.jsxs("div",{className:`rounded-lg p-3 ${S.netProfit.net>=0?"bg-blue-50":"bg-orange-50"}`,children:[r.jsx("h5",{className:`font-medium mb-2 ${S.netProfit.net>=0?"text-blue-900":"text-orange-900"}`,children:" Bnfice net"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:S.netProfit.net>=0?"text-blue-700":"text-orange-700",children:"Cash-flow mensuel"}),r.jsx("span",{className:`font-bold text-lg ${S.netProfit.net>=0?"text-blue-800":"text-orange-800"}`,children:s(S.cashFlow)})]}),S.roi.monthly>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:S.netProfit.net>=0?"text-blue-600":"text-orange-600",children:"ROI mensuel"}),r.jsxs("span",{className:`font-medium ${S.netProfit.net>=0?"text-blue-700":"text-orange-700"}`,children:[S.roi.monthly.toFixed(2),"%"]})]})]})]})]}),r.jsxs("div",{className:"mt-3",children:[r.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[r.jsx("span",{children:"Performance"}),r.jsx("span",{children:S.netProfit.margin>=15?" Excellente":S.netProfit.margin>=5?" Correcte":"  amliorer"})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${S.netProfit.margin>=15?"bg-green-500":S.netProfit.margin>=5?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(Math.max(S.netProfit.margin,0),100)}%`}})})]})]},S.propertyId):null):f.map(({property:S,totalRevenue:P,paidRevenue:T,completionRate:M,tenantsCount:q})=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:S.name}),r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${M===100?"bg-green-100 text-green-800":M>=75?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[M.toFixed(0),"%"]})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Revenus perus"}),r.jsx("span",{className:"font-semibold text-green-600",children:s(T)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Revenus attendus"}),r.jsx("span",{className:"font-semibold text-gray-900",children:s(P)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Locataires"}),r.jsx("span",{className:"font-medium",children:q})]})]}),r.jsxs("div",{className:"mt-3",children:[r.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[r.jsx("span",{children:"Progression"}),r.jsxs("span",{children:[s(T)," / ",s(P)]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${M===100?"bg-green-500":M>=75?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(M,100)}%`}})})]})]},S.id))})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl border border-purple-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t("ai-agents"),children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center mr-3",children:r.jsx(er,{className:"w-5 h-5 text-white"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Assistant IA - Analyse financire"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Bnfice net total"}),r.jsx("span",{className:`font-semibold ${n&&n.netProfit>=0?"text-green-600":"text-red-600"}`,children:s(n?n.netProfit:v)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Marge moyenne"}),r.jsxs("span",{className:"font-semibold text-blue-600",children:[n?`${n.averageMargin.toFixed(1)}%`:`${m.toFixed(1)}%`,n?`${n.averageMargin.toFixed(1)}%`:`${g.paymentCompletionRate.toFixed(1)}%`]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Cash-flow total"}),r.jsx("span",{className:"font-semibold text-purple-600",children:s(n?n.totalCashFlow:h)})]})]}),r.jsxs("button",{className:"w-full mt-4 bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center",children:[r.jsx(er,{className:"w-4 h-4 mr-2"}),"Voir analyses dtailles"]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Activit rcente"}),r.jsx("div",{className:"space-y-4",children:E.length===0?r.jsx("p",{className:"text-gray-500 text-center py-4",children:"Aucune activit rcente"}):E.map(S=>r.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-50 p-2 rounded-lg transition-colors",onClick:()=>t("payments"),children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${S.status==="paid"?"bg-green-500":S.status==="late"?"bg-orange-500":"bg-red-500"}`}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-900",children:["Paiement ",s(S.amount)]}),r.jsx("p",{className:"text-sm text-gray-500",children:new Date(S.dueDate).toLocaleDateString("fr-FR")})]})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.status==="paid"?"bg-green-100 text-green-800":S.status==="late"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:S.status==="paid"?"Pay":S.status==="late"?"En retard":"En attente"})]},S.id))})]})]}),r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Actions rapides"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("button",{onClick:()=>t("properties"),className:"bg-blue-600 text-white p-4 rounded-xl hover:bg-blue-700 transition-colors",children:[r.jsx(Ns,{className:"w-6 h-6 mb-2"}),r.jsx("span",{className:"font-medium",children:"Ajouter une proprit"})]}),r.jsxs("button",{onClick:()=>t("tenants"),className:"bg-green-600 text-white p-4 rounded-xl hover:bg-green-700 transition-colors",children:[r.jsx(wt,{className:"w-6 h-6 mb-2"}),r.jsx("span",{className:"font-medium",children:"Nouveau locataire"})]}),r.jsxs("button",{onClick:()=>t("expenses"),className:"bg-purple-600 text-white p-4 rounded-xl hover:bg-purple-700 transition-colors",children:[r.jsx(fe,{className:"w-6 h-6 mb-2"}),r.jsx("span",{className:"font-medium",children:"Ajouter une dpense"})]})]})]})]})},Ul={free:{name:"Gratuit",price:0,currency:"CAD",interval:"month",description:"Parfait pour dbuter",features:{maxProperties:1,maxTenants:1,aiEnabled:!1,pdfGeneration:!1,multiUser:!1,advancedReports:!1,extendedAI:!1,priority:"low"}},pro:{name:"Pro",price:19,currency:"CAD",interval:"month",description:"Pour les propritaires actifs",popular:!0,features:{maxProperties:10,maxTenants:50,aiEnabled:!0,pdfGeneration:!0,multiUser:!1,advancedReports:!1,extendedAI:!1,priority:"medium"}},business:{name:"Business",price:49,currency:"CAD",interval:"month",description:"Pour les professionnels",features:{maxProperties:-1,maxTenants:-1,aiEnabled:!0,pdfGeneration:!0,multiUser:!0,advancedReports:!0,extendedAI:!0,priority:"high"}}};function Es(){const{user:t}=oe(),[e,s]=$.useState(null),[n,i]=$.useState(!0);$.useEffect(()=>{t?a():(s(null),i(!1))},[t]);const a=async()=>{if(t)try{const{data:h,error:f}=await ke.from("subscriptions").select("*").eq("user_id",t.id).eq("status","active").order("created_at",{ascending:!1}).limit(1).single();if(f&&f.code!=="PGRST116")throw f;s(h)}catch(h){console.error("Error fetching subscription:",h),s(null)}finally{i(!1)}},l=()=>e?Ul[e.plan]:Ul.free,c=()=>l().features,o=h=>{const f=c();return f.maxProperties===-1||h<f.maxProperties},d=h=>{const f=c();return f.maxTenants===-1||h<f.maxTenants},u=()=>c().aiEnabled,p=()=>c().pdfGeneration,x=()=>c().advancedReports,y=()=>(e==null?void 0:e.status)==="active",b=()=>e?e.status==="past_due":!1,N=()=>{if(!e)return 0;const h=new Date,g=new Date(e.current_period_end).getTime()-h.getTime();return Math.ceil(g/(1e3*60*60*24))},v=async h=>{if(!t||!u())return!1;try{const{data:f,error:g}=await ke.rpc("can_use_ai_agent",{user_id_param:t.id,agent_type_param:h});if(g)throw g;return f}catch(f){return console.error("Error checking AI agent access:",f),!1}},m=async(h,f=0,g=0)=>{if(t)try{await ke.rpc("track_ai_usage",{user_id_param:t.id,agent_type_param:h,tokens_used_param:f,cost_param:g})}catch(w){console.error("Error tracking AI usage:",w)}};return{subscription:e,isLoading:n,currentPlan:l(),features:c(),canAddProperty:o,canAddTenant:d,canUseAI:u,canGeneratePDF:p,canUseAdvancedReports:x,isSubscriptionActive:y,isPaymentOverdue:b,getDaysUntilRenewal:N,canUseAIAgent:v,trackAIUsage:m,refetch:a}}const $x=({onClose:t,property:e})=>{var h,f,g,w,j,_;_n();const{user:s}=oe(),[n,i]=L("gestionloc_properties",[]),[a,l]=L("gestionloc_units",[]),{canAddProperty:c}=Es(),[o,d]=$.useState({name:(e==null?void 0:e.name)||"",address:{street:((h=e==null?void 0:e.address)==null?void 0:h.street)||"",apartment:((f=e==null?void 0:e.address)==null?void 0:f.apartment)||"",postalCode:((g=e==null?void 0:e.address)==null?void 0:g.postalCode)||"",city:((w=e==null?void 0:e.address)==null?void 0:w.city)||"",province:((j=e==null?void 0:e.address)==null?void 0:j.province)||"",country:((_=e==null?void 0:e.address)==null?void 0:_.country)||"Canada"},type:(e==null?void 0:e.type)||"entire",totalRooms:(e==null?void 0:e.totalRooms)||1,totalBathrooms:(e==null?void 0:e.totalBathrooms)||1,totalArea:(e==null?void 0:e.totalArea)||0,description:(e==null?void 0:e.description)||"",rent:(e==null?void 0:e.rent)||0,monthlyMortgage:(e==null?void 0:e.monthlyMortgage)||0,monthlyFixedCharges:(e==null?void 0:e.monthlyFixedCharges)||0,purchasePrice:(e==null?void 0:e.purchasePrice)||0,purchaseDate:e!=null&&e.purchaseDate?new Date(e.purchaseDate).toISOString().split("T")[0]:""}),[u,p]=$.useState([{name:"",area:0,rent:0,status:"available",availabilitySlots:[],equipment:[]}]),[x,y]=$.useState({kitchen:!1,fridge:!1,microwave:!1,oven:!1,dishwasher:!1,bathroom:!1,laundry:!1,livingRoom:!1,wifi:!1,parking:!1,balcony:!1,garden:!1,storage:!1}),b=k=>{if(k.preventDefault(),!e&&!c(n.length)){alert("Vous avez atteint la limite de proprits pour votre plan. Veuillez mettre  niveau votre abonnement.");return}const E={id:(e==null?void 0:e.id)||Date.now().toString(),ownerId:(s==null?void 0:s.id)||"1",name:o.name,address:o.address,type:o.type,totalRooms:o.totalRooms,totalBathrooms:o.totalBathrooms,totalArea:o.totalArea,description:o.description,images:[],status:"libre",rent:o.type==="entire"?o.rent:void 0,equipment:[],commonAreas:o.type==="shared"?x:void 0,monthlyMortgage:o.monthlyMortgage,monthlyFixedCharges:o.monthlyFixedCharges,purchasePrice:o.purchasePrice||void 0,purchaseDate:o.purchaseDate?new Date(o.purchaseDate):void 0,createdAt:(e==null?void 0:e.createdAt)||new Date,updatedAt:new Date};if(e)i(D=>D.map(F=>F.id===e.id?E:F));else if(i(D=>[...D,E]),o.type==="shared"){const D=u.map(F=>({id:Date.now().toString()+Math.random(),propertyId:E.id,name:F.name,area:F.area,rent:F.rent,status:"available",availabilitySlots:[],createdAt:new Date}));l(F=>[...F,...D])}t()},N=()=>{p(k=>[...k,{name:"",area:0,rent:0,status:"available",availabilitySlots:[],equipment:[]}])},v=k=>{p(E=>E.filter((D,F)=>F!==k))},m=(k,E,D)=>{p(F=>F.map((W,I)=>I===k?{...W,[E]:D}:W))};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-semibold",children:e?"Modifier la proprit":"Ajouter une proprit"}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx(He,{className:"w-6 h-6"})})]})}),r.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom de la proprit *"}),r.jsx("input",{type:"text",value:o.name,onChange:k=>d(E=>({...E,name:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Adresse"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse *"}),r.jsx("input",{type:"text",value:o.address.street,onChange:k=>d(E=>({...E,address:{...E.address,street:k.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"123 Rue de la Paix",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appartement"}),r.jsx("input",{type:"text",value:o.address.apartment,onChange:k=>d(E=>({...E,address:{...E.address,apartment:k.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"App 4B"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code postal *"}),r.jsx("input",{type:"text",value:o.address.postalCode,onChange:k=>d(E=>({...E,address:{...E.address,postalCode:k.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"H1A 1A1",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ville *"}),r.jsx("input",{type:"text",value:o.address.city,onChange:k=>d(E=>({...E,address:{...E.address,city:k.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Montral",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Province *"}),r.jsxs("select",{value:o.address.province,onChange:k=>d(E=>({...E,address:{...E.address,province:k.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[r.jsx("option",{value:"",children:"Slectionner une province"}),r.jsx("option",{value:"AB",children:"Alberta"}),r.jsx("option",{value:"BC",children:"Colombie-Britannique"}),r.jsx("option",{value:"MB",children:"Manitoba"}),r.jsx("option",{value:"NB",children:"Nouveau-Brunswick"}),r.jsx("option",{value:"NL",children:"Terre-Neuve-et-Labrador"}),r.jsx("option",{value:"NS",children:"Nouvelle-cosse"}),r.jsx("option",{value:"ON",children:"Ontario"}),r.jsx("option",{value:"PE",children:"le-du-Prince-douard"}),r.jsx("option",{value:"QC",children:"Qubec"}),r.jsx("option",{value:"SK",children:"Saskatchewan"}),r.jsx("option",{value:"NT",children:"Territoires du Nord-Ouest"}),r.jsx("option",{value:"NU",children:"Nunavut"}),r.jsx("option",{value:"YT",children:"Yukon"})]})]})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Type de logement *"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("label",{className:"flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"type",value:"entire",checked:o.type==="entire",onChange:k=>d(E=>({...E,type:k.target.value})),className:"sr-only"}),r.jsxs("div",{className:`flex-1 text-center ${o.type==="entire"?"text-blue-700":"text-gray-700"}`,children:[r.jsx("div",{className:"text-2xl mb-2",children:""}),r.jsx("div",{className:"font-medium",children:"Logement entier"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Un seul locataire"})]})]}),r.jsxs("label",{className:"flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"type",value:"shared",checked:o.type==="shared",onChange:k=>d(E=>({...E,type:k.target.value})),className:"sr-only"}),r.jsxs("div",{className:`flex-1 text-center ${o.type==="shared"?"text-blue-700":"text-gray-700"}`,children:[r.jsx("div",{className:"text-2xl mb-2",children:""}),r.jsx("div",{className:"font-medium",children:"Colocation"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Chambres spares"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.type==="entire"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de pices"}),r.jsxs("select",{value:o.totalRooms,onChange:k=>d(E=>({...E,totalRooms:Number(k.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:1,children:"1"}),r.jsx("option",{value:2,children:"2"}),r.jsx("option",{value:3,children:"3"}),r.jsx("option",{value:4,children:"4"}),r.jsx("option",{value:5,children:"5"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salles de bain"}),r.jsx("input",{type:"number",min:"1",value:o.totalBathrooms,onChange:k=>d(E=>({...E,totalBathrooms:Number(k.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Superficie (m)"}),r.jsx("input",{type:"number",value:o.totalArea,onChange:k=>d(E=>({...E,totalArea:Number(k.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),o.type==="entire"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loyer mensuel ($)"}),r.jsx("input",{type:"number",value:o.rent,onChange:k=>d(E=>({...E,rent:Number(k.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informations financires"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hypothque mensuelle ($)"}),r.jsx("input",{type:"number",value:o.monthlyMortgage,onChange:k=>d(E=>({...E,monthlyMortgage:Number(k.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Charges fixes mensuelles ($)"}),r.jsx("input",{type:"number",value:o.monthlyFixedCharges,onChange:k=>d(E=>({...E,monthlyFixedCharges:Number(k.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Taxes municipales, assurance, frais de coproprit, etc."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix d'achat ($) - optionnel"}),r.jsx("input",{type:"number",value:o.purchasePrice,onChange:k=>d(E=>({...E,purchasePrice:Number(k.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date d'achat - optionnel"}),r.jsx("input",{type:"date",value:o.purchaseDate,onChange:k=>d(E=>({...E,purchaseDate:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),o.type==="shared"&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Chambres"}),r.jsxs("button",{type:"button",onClick:N,className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Et,{className:"w-4 h-4 mr-2"}),"Ajouter une chambre"]})]}),u.map((k,E)=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("h4",{className:"font-medium",children:["Chambre ",E+1]}),u.length>1&&r.jsx("button",{type:"button",onClick:()=>v(E),className:"text-red-600 hover:text-red-800",children:r.jsx(He,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom/Numro"}),r.jsx("input",{type:"text",value:k.name,onChange:D=>m(E,"name",D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ex: Chambre A",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Superficie (m)"}),r.jsx("input",{type:"number",min:"1",value:k.area,onChange:D=>m(E,"area",Number(D.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loyer ($)"}),r.jsx("input",{type:"number",min:"1",value:k.rent,onChange:D=>m(E,"rent",Number(D.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]})]},E)),r.jsxs("div",{className:"mt-6",children:[r.jsx("h4",{className:"font-medium mb-3",children:"Espaces communs"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(x).map(([k,E])=>r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:E,onChange:D=>y(F=>({...F,[k]:D.target.checked})),className:"mr-2 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsxs("span",{className:"text-sm",children:[k==="kitchen"&&"Cuisine",k==="fridge"&&"Frigo",k==="microwave"&&"Micro-ondes",k==="oven"&&"Four",k==="dishwasher"&&"Lave-vaisselle",k==="bathroom"&&"Salle de bain",k==="laundry"&&"Buanderie",k==="livingRoom"&&"Salon",k==="wifi"&&"WiFi",k==="parking"&&"Parking",k==="balcony"&&"Balcon",k==="garden"&&"Jardin",k==="storage"&&"Rangement"]})]},k))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:o.description,onChange:k=>d(E=>({...E,description:k.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Description de la proprit..."})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:e?"Modifier":"Ajouter"})]})]})]})})},Lx=({onTabChange:t})=>{const{t:e,formatCurrency:s}=_n();oe();const[n,i]=L("gestionloc_properties",[]),[a]=L("gestionloc_units",[]),[l]=L("gestionloc_tenants",[]),{canAddProperty:c,currentPlan:o}=Es(),[d,u]=$.useState(!1),[p,x]=$.useState(),y=f=>{x(f),u(!0)},b=f=>{confirm("tes-vous sr de vouloir supprimer cette proprit ?")&&i(g=>g.filter(w=>w.id!==f))},N=f=>a.filter(g=>g.propertyId===f),v=f=>l.filter(g=>g.propertyId===f),m=f=>{if(f.type==="entire"){const g=v(f.id);return{total:1,occupied:g.length>0?1:0,available:g.length>0?0:1,pending:0}}else{const g=N(f.id),j=v(f.id).length,_=g.length-j;return{total:g.length,occupied:j,available:_,pending:0}}},h=()=>{if(!c(n.length)){alert(`Vous avez atteint la limite de ${o.features.maxProperties} proprit${o.features.maxProperties>1?"s":""} pour votre plan ${o.name}. Veuillez mettre  niveau votre abonnement.`);return}x(void 0),u(!0)};return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Proprits"}),r.jsx("p",{className:"text-gray-600",children:"Grez votre portefeuille immobilier"})]}),r.jsxs("button",{onClick:h,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Et,{className:"w-5 h-5 mr-2"}),"Ajouter une proprit"]})]}),n.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ns,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune proprit"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Commencez par ajouter votre premire proprit"}),r.jsxs("button",{onClick:h,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Et,{className:"w-5 h-5 mr-2"}),"Ajouter une proprit"]})]}):r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:n.map(f=>{var E,D,F,W,I;const g=N(f.id),w=v(f.id),j=m(f),_=j.total>0?j.occupied/j.total*100:0,k=f.type==="entire"?f.rent||0:g.reduce((A,B)=>A+B.rent,0);return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"h-48 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:r.jsx(Ns,{className:"w-16 h-16 text-blue-500"})}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[(E=f.address)==null?void 0:E.street,((D=f.address)==null?void 0:D.apartment)&&`, ${f.address.apartment}`,r.jsx("br",{}),(F=f.address)==null?void 0:F.city,", ",(W=f.address)==null?void 0:W.province," ",(I=f.address)==null?void 0:I.postalCode]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>y(f),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:r.jsx(ea,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>b(f.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:r.jsx(ta,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Type"}),r.jsx("span",{className:"text-sm font-medium",children:f.type==="entire"?" Logement entier":" Colocation"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:f.type==="entire"?"Statut":"Chambres"}),r.jsx("span",{className:"text-sm font-medium",children:f.type==="entire"?j.occupied>0?"Occup":"Libre":`${j.total} chambre${j.total>1?"s":""}`})]}),f.type==="shared"&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Occupes"}),r.jsx("span",{className:"text-sm font-medium text-red-600",children:j.occupied})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:f.type==="entire"?"Disponible":"Libres"}),r.jsx("span",{className:"text-sm font-medium text-green-600",children:f.type==="entire"?j.available>0?"Oui":"Non":j.available})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Superficie"}),r.jsxs("span",{className:"text-sm font-medium",children:[f.totalArea," m"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Loyer total"}),r.jsxs("span",{className:"text-sm font-medium text-green-600",children:[s(k),"/mois"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Locataires"}),r.jsxs("button",{onClick:()=>t&&t("tenants"),className:"text-sm font-medium text-blue-600 hover:text-blue-800",children:[w.length," locataire",w.length!==1?"s":""]})]}),f.type==="shared"&&g.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Dtail des chambres"}),g.map(A=>{const re=!!w.find(S=>S.unitId===A.id);return r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-gray-600",children:A.name}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("span",{className:"font-medium",children:[A.rent,"$"]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${re?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:re?"Occupe":"Libre"})]})]},A.id)})]}),r.jsx("hr",{className:"border-gray-200"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Occupation"}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2 mr-2",children:r.jsx("div",{className:`h-2 rounded-full ${_===100?"bg-red-500":_>=75?"bg-orange-500":_>=50?"bg-yellow-500":"bg-green-500"}`,style:{width:`${_}%`}})}),r.jsxs("span",{className:`text-sm font-bold ${_===100?"text-red-600":_>=75?"text-orange-600":_>=50?"text-yellow-600":"text-green-600"}`,children:[_.toFixed(0),"%"]})]})]})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f.status==="libre"?"bg-green-100 text-green-800":f.status==="en_attente_validation"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:f.status==="libre"?"Libre":f.status==="en_attente_validation"?"En attente":"Occup"}),f.status==="en_attente_validation"&&r.jsx("button",{onClick:()=>t&&t("property-requests"),className:"text-xs text-orange-600 hover:text-orange-800 font-medium",children:"Voir demandes "})]})})]})]},f.id)})}),d&&r.jsx($x,{property:p,onClose:()=>{u(!1),x(void 0)}})]})},Ox=({onClose:t,tenant:e})=>{var y,b,N;const{user:s}=oe(),[n,i]=L("gestionloc_tenants",[]),[a]=L("gestionloc_properties",[]),[l]=L("gestionloc_units",[]),{canAddTenant:c}=Es(),[o,d]=$.useState({userId:(e==null?void 0:e.userId)||"",firstName:"",lastName:"",email:"",phone:"",propertyId:(e==null?void 0:e.propertyId)||"",unitId:(e==null?void 0:e.unitId)||"",leaseStart:e!=null&&e.leaseStart?new Date(e.leaseStart).toISOString().split("T")[0]:"",leaseEnd:e!=null&&e.leaseEnd?new Date(e.leaseEnd).toISOString().split("T")[0]:"",monthlyRent:(e==null?void 0:e.monthlyRent)||0,depositPaid:(e==null?void 0:e.depositPaid)||0,paymentDueDate:(e==null?void 0:e.paymentDueDate)||1,emergencyContact:{name:((y=e==null?void 0:e.emergencyContact)==null?void 0:y.name)||"",phone:((b=e==null?void 0:e.emergencyContact)==null?void 0:b.phone)||"",relationship:((N=e==null?void 0:e.emergencyContact)==null?void 0:N.relationship)||""}}),u=a.find(v=>v.id===o.propertyId),p=l.filter(v=>v.propertyId===o.propertyId&&v.status==="available"),x=v=>{if(v.preventDefault(),!o.propertyId){alert("Veuillez slectionner une proprit.");return}if((u==null?void 0:u.type)==="shared"&&!o.unitId){alert("Veuillez slectionner une chambre pour cette colocation.");return}if(new Date(o.leaseEnd)<=new Date(o.leaseStart)){alert("La date de fin du bail doit tre postrieure  la date de dbut.");return}if(!e&&!c(n.length)){alert("Vous avez atteint la limite de locataires pour votre plan. Veuillez mettre  niveau votre abonnement.");return}const m={id:(e==null?void 0:e.id)||Date.now().toString(),userId:(s==null?void 0:s.id)||"1",propertyId:o.propertyId||void 0,unitId:o.unitId||void 0,leaseStart:new Date(o.leaseStart),leaseEnd:new Date(o.leaseEnd),monthlyRent:o.monthlyRent,depositPaid:o.depositPaid,paymentDueDate:o.paymentDueDate,emergencyContact:o.emergencyContact};i(e?h=>h.map(f=>f.id===e.id?m:f):h=>[...h,m]),t()};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-semibold",children:e?"Modifier le locataire":"Ajouter un locataire"}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx(He,{className:"w-6 h-6"})})]})}),r.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informations personnelles"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prnom *"}),r.jsx("input",{type:"text",value:o.firstName,onChange:v=>d(m=>({...m,firstName:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom *"}),r.jsx("input",{type:"text",value:o.lastName,onChange:v=>d(m=>({...m,lastName:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),r.jsx("input",{type:"email",value:o.email,onChange:v=>d(m=>({...m,email:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tlphone"}),r.jsx("input",{type:"tel",value:o.phone,onChange:v=>d(m=>({...m,phone:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Logement"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Proprit *"}),r.jsxs("select",{value:o.propertyId,onChange:v=>d(m=>({...m,propertyId:v.target.value,unitId:""})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[r.jsx("option",{value:"",children:"Slectionner une proprit"}),a.map(v=>{var m,h;return r.jsxs("option",{value:v.id,children:[v.name," - ",(m=v.address)==null?void 0:m.street,", ",(h=v.address)==null?void 0:h.city]},v.id)})]})]}),(u==null?void 0:u.type)==="shared"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chambre *"}),r.jsxs("select",{value:o.unitId,onChange:v=>d(m=>({...m,unitId:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[r.jsx("option",{value:"",children:"Slectionner une chambre"}),p.map(v=>r.jsxs("option",{value:v.id,children:[v.name," - ",v.rent,"/mois"]},v.id))]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Bail"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dbut du bail *"}),r.jsx("input",{type:"date",value:o.leaseStart,onChange:v=>d(m=>({...m,leaseStart:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fin du bail *"}),r.jsx("input",{type:"date",value:o.leaseEnd,onChange:v=>d(m=>({...m,leaseEnd:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loyer mensuel ($) *"}),r.jsx("input",{type:"number",value:o.monthlyRent,onChange:v=>d(m=>({...m,monthlyRent:Number(v.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dpt de garantie ($)"}),r.jsx("input",{type:"number",value:o.depositPaid,onChange:v=>d(m=>({...m,depositPaid:Number(v.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date d'chance mensuelle"}),r.jsx("select",{value:o.paymentDueDate,onChange:v=>d(m=>({...m,paymentDueDate:Number(v.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Array.from({length:28},(v,m)=>m+1).map(v=>r.jsx("option",{value:v,children:v},v))})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contact d'urgence"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom complet"}),r.jsx("input",{type:"text",value:o.emergencyContact.name,onChange:v=>d(m=>({...m,emergencyContact:{...m.emergencyContact,name:v.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tlphone"}),r.jsx("input",{type:"tel",value:o.emergencyContact.phone,onChange:v=>d(m=>({...m,emergencyContact:{...m.emergencyContact,phone:v.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Relation"}),r.jsxs("select",{value:o.emergencyContact.relationship,onChange:v=>d(m=>({...m,emergencyContact:{...m.emergencyContact,relationship:v.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Slectionner"}),r.jsx("option",{value:"parent",children:"Parent"}),r.jsx("option",{value:"conjoint",children:"Conjoint(e)"}),r.jsx("option",{value:"ami",children:"Ami(e)"}),r.jsx("option",{value:"collegue",children:"Collgue"}),r.jsx("option",{value:"autre",children:"Autre"})]})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:e?"Modifier":"Ajouter"})]})]})]})})},Mx=({onTabChange:t})=>{oe();const[e,s]=L("gestionloc_tenants",[]),[n]=L("gestionloc_properties",[]),[i]=L("gestionloc_units",[]),[a]=L("gestionloc_payments",[]),[l]=L("gestionloc_issues",[]),{canAddTenant:c,currentPlan:o}=Es(),[d,u]=$.useState(!1),[p,x]=$.useState(),y=j=>{x(j),u(!0)},b=j=>{confirm("tes-vous sr de vouloir supprimer ce locataire ?")&&s(_=>_.filter(k=>k.id!==j))},N=j=>{if(!j)return"Non assign";const _=n.find(k=>k.id===j);return _?_.name:"Proprit supprime"},v=j=>{if(!j)return"";const _=i.find(k=>k.id===j);return _?` - ${_.name}`:""},m=j=>a.filter(E=>E.tenantId===j).filter(E=>E.status==="late"||E.status==="overdue").length,h=j=>l.filter(_=>_.tenantId===j&&_.status!=="resolved").length,f=j=>{const _=new Date,E=new Date(j).getTime()-_.getTime(),D=Math.ceil(E/(1e3*60*60*24));return D<=30&&D>0},g=j=>{const _=new Date;return new Date(j)<_},w=()=>{if(!c(e.length)){alert(`Vous avez atteint la limite de ${o.features.maxTenants} locataire${o.features.maxTenants>1?"s":""} pour votre plan ${o.name}. Veuillez mettre  niveau votre abonnement.`);return}x(void 0),u(!0)};return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Locataires"}),r.jsx("p",{className:"text-gray-600",children:"Grez vos locataires et leurs baux"})]}),r.jsxs("button",{onClick:w,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Et,{className:"w-5 h-5 mr-2"}),"Ajouter un locataire"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t&&t("dashboard"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total locataires"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]}),r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(wt,{className:"w-6 h-6 text-blue-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t&&t("payments"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revenus mensuels"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[e.reduce((j,_)=>j+_.monthlyRent,0).toLocaleString("fr-CA"),"$"]})]}),r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:r.jsx(Pt,{className:"w-6 h-6 text-green-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Baux expirant"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(j=>f(j.leaseEnd)).length})]}),r.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:r.jsx(fe,{className:"w-6 h-6 text-orange-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Baux expirs"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(j=>g(j.leaseEnd)).length})]}),r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:r.jsx(mn,{className:"w-6 h-6 text-red-600"})})]})})]}),e.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(wt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun locataire"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Commencez par ajouter votre premier locataire"}),r.jsxs("button",{onClick:w,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Et,{className:"w-5 h-5 mr-2"}),"Ajouter un locataire"]})]}):r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Locataire"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Proprit"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bail"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Loyer"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Alertes"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(j=>{const _=m(j.id),k=h(j.id);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:r.jsx(wt,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["Locataire #",j.id.slice(-4)]}),r.jsxs("div",{className:"text-sm text-gray-500",children:["chance le ",j.paymentDueDate]})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:r.jsxs("button",{onClick:()=>t&&t("properties"),className:"text-sm text-blue-600 hover:text-blue-800",children:[N(j.propertyId),v(j.unitId)]})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm text-gray-900",children:[new Date(j.leaseStart).toLocaleDateString("fr-FR")," - ",new Date(j.leaseEnd).toLocaleDateString("fr-FR")]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:r.jsxs("button",{onClick:()=>t&&t("payments"),className:"text-sm font-medium text-green-600 hover:text-green-800",children:[j.monthlyRent.toLocaleString("fr-CA"),"$"]})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex space-x-2",children:[_>0&&r.jsxs("button",{onClick:()=>t&&t("payments"),className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 hover:bg-red-200",children:[_," paiement",_>1?"s":""," en retard"]}),k>0&&r.jsxs("button",{onClick:()=>t&&t("issues"),className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 hover:bg-orange-200",children:[k," problme",k>1?"s":""]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${g(j.leaseEnd)?"bg-red-100 text-red-800":f(j.leaseEnd)?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:g(j.leaseEnd)?"Expir":f(j.leaseEnd)?"Expire bientt":"Actif"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>y(j),className:"text-blue-600 hover:text-blue-900",children:r.jsx(ea,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>b(j.id),className:"text-red-600 hover:text-red-900",children:r.jsx(ta,{className:"w-4 h-4"})})]})})]},j.id)})})]})})}),d&&r.jsx(Ox,{tenant:p,onClose:()=>{u(!1),x(void 0)}})]})};function jr(t){const[e,s]=L("gestionloc_notifications",[]),n=l=>{const c={...l,id:Date.now().toString(),createdAt:new Date};s(o=>[c,...o])},i=l=>{s(c=>c.map(o=>o.id===l?{...o,read:!0}:o))},a=e.filter(l=>!l.read&&l.userId===t).length;return{notifications:e.filter(l=>l.userId===t),addNotification:n,markAsRead:i,unreadCount:a}}function Is(){const{user:t}=oe(),[e,s]=L("gestionloc_tenant_history",[]),n=o=>{if(!(t!=null&&t.id))return;const d={...o,id:Date.now().toString()+Math.random(),tenantId:t.id,createdAt:new Date};return s(u=>[d,...u]),d},i=()=>e.filter(o=>o.tenantId===(t==null?void 0:t.id)),a=o=>i().filter(d=>d.type===o),l=o=>i().filter(d=>d.propertyId===o),c=(o=10)=>i().slice(0,o);return{history:i(),addHistoryEntry:n,getHistoryByType:a,getHistoryByProperty:l,getRecentHistory:c}}const Ux="https://ptugkaewwrhzhadvdkoi.supabase.co",Fx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0dWdrYWV3d3JoemhhZHZka29pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5MTk5NjUsImV4cCI6MjA3MTQ5NTk2NX0.Wf5MhI-HFCZtEMdtYj854Zl3ENnNewsI-hD1PrzkkMc";class zx{async makeRequest(e,s){const n=await fetch(`${Ux}/functions/v1/${e}`,{method:"POST",headers:{Authorization:`Bearer ${Fx}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const i=await n.json();throw new Error(i.error||"AI service error")}return n.json()}async analyzePayments(e,s,n){return this.makeRequest("ai-payment-assistant",{userId:e,payments:s,tenants:n})}async generateFiscalReport(e,s,n,i,a){return this.makeRequest("ai-fiscal-assistant",{userId:e,year:s,properties:n,revenues:i,expenses:a})}async generateCommunication(e,s,n,i){return this.makeRequest("ai-communication-assistant",{userId:e,type:s,context:n,customInstructions:i})}async diagnoseProblem(e,s,n){return this.makeRequest("ai-problem-diagnostic",{userId:e,issue:s,propertyInfo:n})}async generateContract(e,s,n,i,a){return this.makeRequest("ai-contract-generator",{userId:e,propertyInfo:s,landlordInfo:n,tenantInfo:i,leaseTerms:a})}async generateMonthlySummary(e,s,n){return this.makeRequest("ai-monthly-summary",{userId:e,month:s,data:n})}}const Bx=new zx;class Vx{constructor(){Bo(this,"defaultConfig",{daysBefore:[2,0],enabled:!0})}async checkAndSendReminders(e,s,n){const i=new Date;i.setHours(0,0,0,0);for(const a of e){if(a.status!=="pending")continue;const l=new Date(a.dueDate);l.setHours(0,0,0,0);const c=Math.ceil((l.getTime()-i.getTime())/(1e3*60*60*24));this.defaultConfig.daysBefore.includes(c)&&await this.sendPaymentReminder(a,s,n,c)}}async sendPaymentReminder(e,s,n,i){const a=s.find(d=>d.id===e.tenantId);if(!a)return;const l=n.find(d=>d.id===a.userId);if(!l)return;const c=i===0?"same_day":"advance",o={tenantName:`${l.firstName} ${l.lastName}`,tenantProfile:{paymentHistory:this.getPaymentHistory(e.tenantId,[]),communicationStyle:"friendly",language:l.preferences.language||"fr"},situation:this.buildSituationText(e,i),urgency:i===0?"high":"medium",communicationPreference:l.preferences.aiCommunication||"email"};try{const d=await Bx.generateCommunication(l.id,"payment_reminder",o,this.getCustomInstructions(c,l.preferences.language||"fr"));await this.sendMessage(l,d.message,d.subject,o.communicationPreference),console.log(` Rappel de paiement envoy  ${l.email} via ${o.communicationPreference}`)}catch(d){console.error("Erreur lors de l'envoi du rappel:",d),await this.sendFallbackReminder(l,e,i)}}getCustomInstructions(e,s){var i;const n={fr:{advance:`
          Gnre un rappel de paiement amical et professionnel pour dans 2 jours.
          - Ton bienveillant et courtois
          - Rappeler les dtails du paiement
          - Proposer les moyens de paiement disponibles
          - Inclure les coordonnes en cas de question
          - Mentionner l'importance du respect des chances
        `,same_day:`
          Gnre un rappel urgent mais respectueux pour le jour mme.
          - Ton plus direct mais toujours professionnel
          - Souligner que c'est le jour d'chance
          - Proposer des solutions rapides de paiement
          - Mentionner les consquences d'un retard
          - Offrir de l'aide en cas de difficult
        `},en:{advance:`
          Generate a friendly and professional payment reminder for 2 days ahead.
          - Kind and courteous tone
          - Remind payment details
          - Suggest available payment methods
          - Include contact information for questions
          - Mention the importance of meeting deadlines
        `,same_day:`
          Generate an urgent but respectful same-day reminder.
          - More direct but still professional tone
          - Emphasize it's the due date
          - Suggest quick payment solutions
          - Mention consequences of late payment
          - Offer help in case of difficulty
        `}};return((i=n[s])==null?void 0:i[e])||n.fr[e]}buildSituationText(e,s){const n=new Date(e.dueDate).toLocaleDateString("fr-FR");return s===0?`Le loyer de ${e.amount}$ est d aujourd'hui (${n}). Merci de procder au paiement dans les plus brefs dlais.`:`Le loyer de ${e.amount}$ sera d dans ${s} jour${s>1?"s":""} (${n}). Pensez  prparer votre paiement.`}getPaymentHistory(e,s){const n=s.filter(l=>l.tenantId===e),i=n.filter(l=>l.status==="paid").length,a=n.length;return a===0?"new":i/a>.9?"excellent":i/a>.7?"good":"average"}async sendMessage(e,s,n,i){i==="email"?await this.sendEmail(e.email,n,s):i==="sms"&&e.phone&&await this.sendSMS(e.phone,s)}async sendEmail(e,s,n){console.log(` EMAIL envoy  ${e}`),console.log(` Sujet: ${s}`),console.log(` Message: ${n}`)}async sendSMS(e,s){console.log(` SMS envoy au ${e}`),console.log(` Message: ${s}`)}async sendFallbackReminder(e,s,n){const i=new Date(s.dueDate).toLocaleDateString("fr-FR"),a=n===0?"aujourd'hui":`dans ${n} jour${n>1?"s":""}`,l=`
Bonjour ${e.firstName},

Rappel de paiement de loyer :
 Montant : ${s.amount}$ CAD
 chance : ${a} (${i})

Merci de procder au paiement selon les modalits convenues.

En cas de question, n'hsitez pas  nous contacter.

Cordialement,
GestionLoc Pro
    `.trim();await this.sendMessage(e,l,`Rappel de loyer - ${s.amount}$ d ${a}`,e.preferences.aiCommunication||"email")}setReminderConfig(e){this.defaultConfig={...this.defaultConfig,...e}}getReminderConfig(){return{...this.defaultConfig}}}const Ms=new Vx;function qx(){const{user:t}=oe(),[e]=L("gestionloc_payments",[]),[s]=L("gestionloc_tenants",[]),[n]=L("gestionloc_users",[]);return $.useEffect(()=>{if(!t||t.role!=="owner")return;const a=async()=>{try{await Ms.checkAndSendReminders(e,s,n)}catch(c){console.error("Erreur lors de la vrification des rappels:",c)}};a();const l=setInterval(a,60*60*1e3);return()=>clearInterval(l)},[e,s,n,t]),{sendManualReminder:async(a,l)=>{const c=e.find(u=>u.id===a);if(!c)return;const o=s.find(u=>u.id===c.tenantId);if(!(!o||!n.find(u=>u.id===o.userId)))try{l&&Ms.setReminderConfig({enabled:!0,customMessage:l});const u=new Date,p=new Date(c.dueDate),x=Math.ceil((p.getTime()-u.getTime())/(1e3*60*60*24));return await Ms.sendPaymentReminder(c,s,n,x),{success:!0,message:"Rappel envoy avec succs"}}catch(u){return console.error("Erreur lors de l'envoi du rappel manuel:",u),{success:!1,message:"Erreur lors de l'envoi"}}},reminderConfig:Ms.getReminderConfig(),setReminderConfig:Ms.setReminderConfig.bind(Ms)}}const Hx=({payment:t,className:e=""})=>{var m;const{sendManualReminder:s}=qx(),[n]=L("gestionloc_tenants",[]),[i]=L("gestionloc_users",[]),[a,l]=$.useState(!1),[c,o]=$.useState(""),[d,u]=$.useState(!1),p=n.find(h=>h.id===t.tenantId),x=i.find(h=>h.id===(p==null?void 0:p.userId)),y=async()=>{u(!0);try{(await s(t.id,c||void 0)).success?(alert(" Rappel envoy avec succs !"),l(!1),o("")):alert(" Erreur lors de l'envoi du rappel")}catch{alert(" Erreur lors de l'envoi du rappel")}finally{u(!1)}},b=()=>{const h=new Date,f=new Date(t.dueDate);return Math.ceil((f.getTime()-h.getTime())/(1e3*60*60*24))},N=()=>{const h=b();return h<0?"text-red-600":h===0?"text-orange-600":h<=2?"text-yellow-600":"text-blue-600"},v=()=>{var f;return(((f=x==null?void 0:x.preferences)==null?void 0:f.aiCommunication)||"email")==="sms"?r.jsx(Nx,{className:"w-4 h-4"}):r.jsx(Zt,{className:"w-4 h-4"})};return t.status==="paid"?null:r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>l(!0),className:`inline-flex items-center px-3 py-1 rounded-lg text-sm font-medium transition-colors ${N()} hover:bg-gray-100 ${e}`,title:"Envoyer un rappel de paiement",children:[r.jsx(bd,{className:"w-4 h-4 mr-1"}),"Rappel"]}),a&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Envoyer un rappel de paiement"}),r.jsxs("p",{className:"text-sm text-gray-600",children:[" ",x==null?void 0:x.firstName," ",x==null?void 0:x.lastName," pour ",t.amount,"$ CAD"]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-blue-900",children:"chance"}),r.jsx("span",{className:"text-sm text-blue-800",children:new Date(t.dueDate).toLocaleDateString("fr-FR")})]}),r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Jours restants"}),r.jsx("span",{className:`text-sm font-bold ${N()}`,children:b()===0?"Aujourd'hui":b()<0?`${Math.abs(b())} jour(s) de retard`:`${b()} jour(s)`})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Envoi via"}),r.jsxs("div",{className:"flex items-center text-sm text-blue-800",children:[v(),r.jsx("span",{className:"ml-1",children:((m=x==null?void 0:x.preferences)==null?void 0:m.aiCommunication)==="sms"?"SMS":"Email"})]})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message personnalis (optionnel)"}),r.jsx("textarea",{value:c,onChange:h=>o(h.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"L'IA gnrera un message professionnel automatiquement, ou ajoutez vos instructions spciales ici..."}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" L'IA adaptera automatiquement le ton selon l'urgence et l'historique du locataire"})]}),r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 mb-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Type de rappel automatique"}),r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(ze,{className:"w-4 h-4 mr-2"}),b()===0?r.jsx("span",{className:"text-orange-700 font-medium",children:"Rappel urgent - Jour d'chance"}):b()<0?r.jsx("span",{className:"text-red-700 font-medium",children:"Rappel de retard - Paiement en souffrance"}):r.jsxs("span",{className:"text-blue-700 font-medium",children:["Rappel prventif - ",b()," jour(s) avant chance"]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",disabled:d,children:"Annuler"}),r.jsx("button",{onClick:y,disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center",children:d?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Envoi..."]}):r.jsxs(r.Fragment,{children:[r.jsx(bd,{className:"w-4 h-4 mr-2"}),"Envoyer le rappel"]})})]})]})})]})},Wx=({onTabChange:t})=>{const{user:e}=oe(),[s,n]=L("gestionloc_payments",[]),[i]=L("gestionloc_tenants",[]),[a]=L("gestionloc_properties",[]),[l]=L("gestionloc_units",[]),{addNotification:c}=jr("1"),[o,d]=$.useState("all"),{addHistoryEntry:u}=Is();$.useEffect(()=>{(()=>{if((e==null?void 0:e.role)!=="owner")return;const w=new Date,j=w.getMonth(),_=w.getFullYear();i.forEach(k=>{const E=new Date(_,j,k.paymentDueDate);if(!s.find(F=>F.tenantId===k.id&&new Date(F.dueDate).getMonth()===j&&new Date(F.dueDate).getFullYear()===_)){const F={id:Date.now().toString()+Math.random(),tenantId:k.id,amount:k.monthlyRent,dueDate:E,status:w>E?"late":"pending",createdAt:new Date};n(I=>[...I,F]);const W=new Date(E);W.setDate(W.getDate()-5),w>=W&&w<=E&&c({userId:k.userId,type:"payment_reminder",title:"Rappel de paiement",message:`Votre loyer de ${k.monthlyRent} est d le ${E.toLocaleDateString("fr-FR")}`,read:!1})}})})()},[i,s,n,c]);const p=g=>{const w=i.find(k=>k.id===g);if(!w)return{name:"Locataire supprim",property:""};const j=a.find(k=>k.id===w.propertyId),_=l.find(k=>k.id===w.unitId);return{name:`Locataire #${w.id.slice(-4)}`,property:j?`${j.name}${_?` - ${_.name}`:""}`:"Proprit supprime"}},x=g=>{const w=s.find(_=>_.id===g);if(!w)return;n(_=>_.map(k=>k.id===g?{...k,status:"paid",paidDate:new Date}:k));const j=i.find(_=>_.id===w.tenantId);j&&u({type:"payment",title:`Paiement effectu - ${w.amount}$`,description:`Paiement de loyer de ${w.amount}$ effectu`,propertyId:j.propertyId,unitId:j.unitId,relatedId:w.id,metadata:{amount:w.amount,status:"paid",dueDate:w.dueDate.toISOString()}})},y=g=>{n(w=>w.map(j=>j.id===g?{...j,status:"late"}:j))},b=(()=>{const g=i.find(w=>w.userId===(e==null?void 0:e.id));return g?s.filter(w=>w.tenantId===g.id):[]})(),N=b.filter(g=>o==="all"||g.status===o),v={total:b.length,paid:b.filter(g=>g.status==="paid").length,pending:b.filter(g=>g.status==="pending").length,late:b.filter(g=>g.status==="late").length,overdue:b.filter(g=>g.status==="overdue").length,totalAmount:b.reduce((g,w)=>g+w.amount,0),paidAmount:b.filter(g=>g.status==="paid").reduce((g,w)=>g+w.amount,0)},m=g=>{switch(g){case"paid":return r.jsx(Bt,{className:"w-4 h-4 text-green-600"});case"pending":return r.jsx(ze,{className:"w-4 h-4 text-yellow-600"});case"late":return r.jsx(he,{className:"w-4 h-4 text-orange-600"});case"overdue":return r.jsx(He,{className:"w-4 h-4 text-red-600"});default:return r.jsx(ze,{className:"w-4 h-4 text-gray-600"})}},h=g=>{switch(g){case"paid":return"Pay";case"pending":return"En attente";case"late":return"En retard";case"overdue":return"Impay";default:return"Inconnu"}},f=g=>{switch(g){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"late":return"bg-orange-100 text-orange-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Paiements"}),r.jsx("p",{className:"text-gray-600",children:"Suivez les paiements de vos locataires"})]}),r.jsx("div",{className:"flex space-x-3",children:r.jsxs("button",{className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[r.jsx(fn,{className:"w-5 h-5 mr-2"}),"Exporter"]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total paiements"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.total})]}),r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(xs,{className:"w-6 h-6 text-blue-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Montant total"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[v.totalAmount.toLocaleString("fr-CA"),"$"]})]}),r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:r.jsx(Bt,{className:"w-6 h-6 text-green-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pays"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[v.paidAmount.toLocaleString("fr-CA"),"$"]})]}),r.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center",children:r.jsx(Bt,{className:"w-6 h-6 text-emerald-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"En retard"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.late+v.overdue})]}),r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:r.jsx(he,{className:"w-6 h-6 text-red-600"})})]})})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(zo,{className:"w-5 h-5 text-gray-400"}),r.jsx("div",{className:"flex space-x-2",children:["all","pending","paid","late","overdue"].map(g=>r.jsx("button",{onClick:()=>d(g),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${o===g?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:g==="all"?"Tous":h(g)},g))})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Locataire"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Proprit"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"chance"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center",children:[r.jsx(xs,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun paiement"}),r.jsx("p",{className:"text-gray-500",children:"Les paiements apparatront ici automatiquement"})]})}):N.map(g=>{const w=p(g.tenantId);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:r.jsx(xs,{className:"w-5 h-5 text-blue-600"})}),r.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.name})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:w.property})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[g.amount.toLocaleString("fr-CA"),"$"]})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm text-gray-900",children:new Date(g.dueDate).toLocaleDateString("fr-FR")}),g.paidDate&&r.jsxs("div",{className:"text-xs text-gray-500",children:["Pay le ",new Date(g.paidDate).toLocaleDateString("fr-FR")]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f(g.status)}`,children:[m(g.status),r.jsx("span",{className:"ml-1",children:h(g.status)})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex space-x-2",children:[(e==null?void 0:e.role)==="owner"&&g.status!=="paid"&&r.jsx("button",{onClick:()=>x(g.id),className:"text-green-600 hover:text-green-900",title:"Marquer comme pay",children:r.jsx(Bt,{className:"w-4 h-4"})}),(e==null?void 0:e.role)==="owner"&&g.status==="pending"&&r.jsx("button",{onClick:()=>y(g.id),className:"text-orange-600 hover:text-orange-900",title:"Marquer en retard",children:r.jsx(he,{className:"w-4 h-4"})}),(e==null?void 0:e.role)==="tenant"&&g.status!=="paid"&&r.jsx("button",{onClick:()=>{confirm("Confirmer le paiement de "+g.amount+"$ ?")&&(x(g.id),alert(" Paiement effectu avec succs !"))},className:"text-blue-600 hover:text-blue-900 text-sm font-medium",children:"Payer"}),(e==null?void 0:e.role)==="owner"&&g.status!=="paid"&&r.jsx(Hx,{payment:g})]})})]},g.id)})})]})})})]})},Gx=({onClose:t,expense:e,linkedIssue:s})=>{const[n,i]=L("gestionloc_expenses",[]),[a,l]=L("gestionloc_issues",[]),[c]=L("gestionloc_properties",[]),[o]=L("gestionloc_units",[]),[d]=L("gestionloc_tenants",[]),[u,p]=$.useState({description:(e==null?void 0:e.description)||(s==null?void 0:s.title)||"",amount:(e==null?void 0:e.amount)||0,type:(e==null?void 0:e.type)||"maintenance",propertyId:(e==null?void 0:e.propertyId)||(s==null?void 0:s.propertyId)||"",unitId:(e==null?void 0:e.unitId)||(s==null?void 0:s.unitId)||"",issueId:(e==null?void 0:e.issueId)||(s==null?void 0:s.id)||"",date:e!=null&&e.date?new Date(e.date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],receiptFile:null,markIssueStatus:"no_change"}),x=c.find(g=>g.id===u.propertyId),y=o.filter(g=>g.propertyId===u.propertyId),b=a.filter(g=>g.status!=="resolved"),N=a.find(g=>g.id===u.issueId),v=g=>{const w=d.find(j=>j.id===g);return w?`Locataire #${w.id.slice(-4)}`:"Locataire inconnu"},m=g=>{g.preventDefault();const w={id:(e==null?void 0:e.id)||Date.now().toString(),ownerId:"1",description:u.description,amount:u.amount,type:u.type,propertyId:u.propertyId||void 0,unitId:u.unitId||void 0,issueId:u.issueId||void 0,date:new Date(u.date),receiptUrl:u.receiptFile?URL.createObjectURL(u.receiptFile):e==null?void 0:e.receiptUrl,createdAt:(e==null?void 0:e.createdAt)||new Date};i(e?j=>j.map(_=>_.id===e.id?w:_):j=>[...j,w]),u.issueId&&u.markIssueStatus!=="no_change"&&l(j=>j.map(_=>_.id===u.issueId?{..._,status:u.markIssueStatus,resolvedAt:u.markIssueStatus==="resolved"?new Date:_.resolvedAt}:_)),t()},h=g=>{var j;const w=(j=g.target.files)==null?void 0:j[0];w&&p(_=>({..._,receiptFile:w}))},f=[{value:"maintenance",label:"Maintenance"},{value:"renovation",label:"Rnovation"},{value:"utilities",label:"Services publics"},{value:"insurance",label:"Assurance"},{value:"taxes",label:"Taxes"},{value:"other",label:"Autre"}];return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-semibold",children:e?"Modifier la dpense":"Ajouter une dpense"}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx(He,{className:"w-6 h-6"})})]})}),r.jsxs("form",{onSubmit:m,className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),r.jsx("input",{type:"text",value:u.description,onChange:g=>p(w=>({...w,description:g.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ex: Rparation plomberie",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant ($) *"}),r.jsx("input",{type:"number",step:"0.01",value:u.amount,onChange:g=>p(w=>({...w,amount:Number(g.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de dpense *"}),r.jsx("select",{value:u.type,onChange:g=>p(w=>({...w,type:g.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:f.map(g=>r.jsx("option",{value:g.value,children:g.label},g.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date *"}),r.jsx("input",{type:"date",value:u.date,onChange:g=>p(w=>({...w,date:g.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Association (optionnel)"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Proprit"}),r.jsxs("select",{value:u.propertyId,onChange:g=>p(w=>({...w,propertyId:g.target.value,unitId:""})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Aucune proprit spcifique"}),c.map(g=>r.jsxs("option",{value:g.id,children:[g.name," - ",g.address.street,", ",g.address.city]},g.id))]})]}),(x==null?void 0:x.type)==="shared"&&y.length>0&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chambre"}),r.jsxs("select",{value:u.unitId,onChange:g=>p(w=>({...w,unitId:g.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Toute la proprit"}),y.map(g=>r.jsx("option",{value:g.id,children:g.name},g.id))]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Association avec un problme (optionnel)"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Problme signal"}),r.jsxs("select",{value:u.issueId,onChange:g=>{const w=g.target.value,j=a.find(_=>_.id===w);p(_=>({..._,issueId:w,propertyId:(j==null?void 0:j.propertyId)||_.propertyId,unitId:(j==null?void 0:j.unitId)||_.unitId,description:(j==null?void 0:j.title)||_.description}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Aucun problme associ"}),b.map(g=>{const w=c.find(_=>_.id===g.propertyId),j=o.find(_=>_.id===g.unitId);return r.jsxs("option",{value:g.id,children:[g.title," - ",w==null?void 0:w.name,j?` (${j.name})`:""," - ",v(g.tenantId)]},g.id)})]})]}),N&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(he,{className:"w-5 h-5 text-blue-600 mr-3 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium text-blue-900",children:N.title}),r.jsx("p",{className:"text-sm text-blue-800 mt-1",children:N.description}),r.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-blue-700",children:[r.jsx("span",{className:`px-2 py-1 rounded-full ${N.priority==="urgent"?"bg-red-100 text-red-800":N.priority==="high"?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:N.priority==="urgent"?"Urgent":N.priority==="high"?"leve":N.priority==="medium"?"Moyenne":"Faible"}),r.jsxs("span",{children:["Signal le ",new Date(N.createdAt).toLocaleDateString("fr-FR")]})]})]})]})}),u.issueId&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mettre  jour le statut du problme"}),r.jsxs("select",{value:u.markIssueStatus,onChange:g=>p(w=>({...w,markIssueStatus:g.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"no_change",children:"Ne pas modifier"}),r.jsx("option",{value:"in_progress",children:"Marquer en cours"}),r.jsx("option",{value:"resolved",children:"Marquer comme rsolu"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Justificatif"}),r.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-gray-400 transition-colors",children:r.jsxs("div",{className:"space-y-1 text-center",children:[r.jsx(ds,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsxs("div",{className:"flex text-sm text-gray-600",children:[r.jsxs("label",{className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[r.jsx("span",{children:"Tlcharger un fichier"}),r.jsx("input",{type:"file",className:"sr-only",accept:"image/*,.pdf",onChange:h})]}),r.jsx("p",{className:"pl-1",children:"ou glisser-dposer"})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, PDF jusqu' 10MB"}),u.receiptFile&&r.jsxs("p",{className:"text-sm text-green-600 mt-2",children:["Fichier slectionn: ",u.receiptFile.name]}),(e==null?void 0:e.receiptUrl)&&!u.receiptFile&&r.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"Justificatif existant disponible"})]})})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:e?"Modifier":"Ajouter"})]})]})]})})},Kx=({onTabChange:t})=>{const[e,s]=L("gestionloc_expenses",[]),[n,i]=L("gestionloc_issues",[]),[a]=L("gestionloc_properties",[]),[l]=L("gestionloc_units",[]),[c,o]=$.useState(!1),[d,u]=$.useState(),[p,x]=$.useState(),[y,b]=$.useState({type:"all",propertyId:"all",month:new Date().getMonth(),year:new Date().getFullYear()}),N=I=>{u(I),o(!0)},v=I=>{confirm("tes-vous sr de vouloir supprimer cette dpense ?")&&s(A=>A.filter(B=>B.id!==I))},m=I=>{if(!I)return"Gnral";const A=a.find(B=>B.id===I);return A?A.name:"Proprit supprime"},h=I=>{if(!I)return"";const A=l.find(B=>B.id===I);return A?` - ${A.name}`:""},f=I=>{if(!I)return"";const A=n.find(B=>B.id===I);return A?A.title:"Problme supprim"},g=I=>({maintenance:"Maintenance",renovation:"Rnovation",utilities:"Services publics",insurance:"Assurance",taxes:"Taxes",other:"Autre"})[I],w=I=>({maintenance:"bg-blue-100 text-blue-800",renovation:"bg-purple-100 text-purple-800",utilities:"bg-green-100 text-green-800",insurance:"bg-orange-100 text-orange-800",taxes:"bg-red-100 text-red-800",other:"bg-gray-100 text-gray-800"})[I],j=e.filter(I=>{const A=new Date(I.date),B=y.type==="all"||I.type===y.type,re=y.propertyId==="all"||I.propertyId===y.propertyId,S=A.getMonth()===y.month,P=A.getFullYear()===y.year;return B&&re&&S&&P}),_={total:j.length,totalAmount:j.reduce((I,A)=>I+A.amount,0),byType:e.reduce((I,A)=>(I[A.type]=(I[A.type]||0)+A.amount,I),{})},k=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],E=new Date().getFullYear(),D=Array.from({length:5},(I,A)=>E-A),F=I=>{if(I.status==="resolved"){alert("Impossible d'ajouter une dpense  un problme dj rsolu.");return}x(I),u(void 0),o(!0)},W=n.filter(I=>I.status==="pending"||I.status==="in_progress");return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dpenses"}),r.jsx("p",{className:"text-gray-600",children:"Suivez et grez vos dpenses immobilires"})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs("button",{className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[r.jsx(fn,{className:"w-5 h-5 mr-2"}),"Exporter"]}),r.jsxs("button",{onClick:()=>{u(void 0),x(void 0),o(!0)},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Et,{className:"w-5 h-5 mr-2"}),"Ajouter une dpense"]})]})]}),W.length>0&&r.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-6 mb-8",children:[r.jsxs("h3",{className:"text-lg font-semibold text-orange-900 mb-4 flex items-center",children:[r.jsx(he,{className:"w-5 h-5 mr-2"}),"Problmes en attente de rsolution (",W.length,")"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:W.map(I=>{const A=a.find(S=>S.id===I.propertyId),B=l.find(S=>S.id===I.unitId),re=e.some(S=>S.issueId===I.id);return r.jsxs("div",{className:"bg-white border border-orange-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:I.title}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I.priority==="urgent"?"bg-red-100 text-red-800":I.priority==="high"?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:I.priority==="urgent"?"Urgent":I.priority==="high"?"leve":I.priority==="medium"?"Moyenne":"Faible"})]}),r.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:I.description}),r.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:[" ",A==null?void 0:A.name,B?` - ${B.name}`:""]}),r.jsxs("div",{className:"flex items-center justify-between",children:[re?r.jsx("span",{className:"text-xs text-green-600 font-medium",children:" Dpense associe"}):r.jsx("button",{onClick:()=>F(I),className:"text-xs px-3 py-1 bg-orange-600 text-white rounded hover:bg-orange-700 transition-colors",children:"Crer dpense"}),r.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${I.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:I.status==="pending"?"En attente":"En cours"})]})]},I.id)})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total dpenses"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.total})]}),r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(ds,{className:"w-6 h-6 text-blue-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Montant total"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[_.totalAmount.toLocaleString("fr-CA"),"$"]})]}),r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:r.jsx(Pt,{className:"w-6 h-6 text-red-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Maintenance"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(_.byType.maintenance||0).toLocaleString("fr-CA"),"$"]})]}),r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(ds,{className:"w-6 h-6 text-blue-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Rnovation"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(_.byType.renovation||0).toLocaleString("fr-CA"),"$"]})]}),r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:r.jsx(ds,{className:"w-6 h-6 text-purple-600"})})]})})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),r.jsxs("select",{value:y.type,onChange:I=>b(A=>({...A,type:I.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Tous les types"}),r.jsx("option",{value:"maintenance",children:"Maintenance"}),r.jsx("option",{value:"renovation",children:"Rnovation"}),r.jsx("option",{value:"utilities",children:"Services publics"}),r.jsx("option",{value:"insurance",children:"Assurance"}),r.jsx("option",{value:"taxes",children:"Taxes"}),r.jsx("option",{value:"other",children:"Autre"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Proprit"}),r.jsxs("select",{value:y.propertyId,onChange:I=>b(A=>({...A,propertyId:I.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Toutes les proprits"}),a.map(I=>r.jsx("option",{value:I.id,children:I.name},I.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mois"}),r.jsx("select",{value:y.month,onChange:I=>b(A=>({...A,month:Number(I.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:k.map((I,A)=>r.jsx("option",{value:A,children:I},A))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Anne"}),r.jsx("select",{value:y.year,onChange:I=>b(A=>({...A,year:Number(I.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:D.map(I=>r.jsx("option",{value:I,children:I},I))})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Proprit"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center",children:[r.jsx(ds,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune dpense"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Commencez par ajouter votre premire dpense"}),r.jsxs("button",{onClick:()=>{u(void 0),x(void 0),o(!0)},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Et,{className:"w-5 h-5 mr-2"}),"Ajouter une dpense"]})]})}):j.map(I=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center mr-4",children:r.jsx(ds,{className:"w-5 h-5 text-gray-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:I.description}),I.issueId&&r.jsxs("div",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(mm,{className:"w-3 h-3 mr-1"}),r.jsxs("button",{onClick:()=>t&&t("issues"),className:"hover:underline",children:["Li au problme: ",f(I.issueId)]})]}),I.receiptUrl&&r.jsx("div",{className:"text-xs text-blue-600",children:"Justificatif disponible"})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(I.type)}`,children:g(I.type)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm text-gray-900",children:[m(I.propertyId),h(I.unitId)]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[I.amount.toLocaleString("fr-CA"),"$"]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:new Date(I.date).toLocaleDateString("fr-FR")})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>N(I),className:"text-blue-600 hover:text-blue-900",children:r.jsx(ea,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>v(I.id),className:"text-red-600 hover:text-red-900",children:r.jsx(ta,{className:"w-4 h-4"})}),I.receiptUrl&&r.jsx("button",{onClick:()=>window.open(I.receiptUrl,"_blank"),className:"text-green-600 hover:text-green-900",children:r.jsx(fn,{className:"w-4 h-4"})})]})})]},I.id))})]})})}),c&&r.jsx(Gx,{expense:d,linkedIssue:p,onClose:()=>{o(!1),u(void 0),x(void 0)}})]})},pm=({onClose:t,issue:e,isOwner:s=!0})=>{var f;const[n,i]=L("gestionloc_issues",[]),[a]=L("gestionloc_properties",[]),[l]=L("gestionloc_units",[]),[c]=L("gestionloc_tenants",[]),{user:o}=oe(),{addHistoryEntry:d}=Is(),u=c.find(g=>g.userId===(o==null?void 0:o.id)),[p,x]=$.useState({title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",priority:(e==null?void 0:e.priority)||"medium",propertyId:(e==null?void 0:e.propertyId)||(u==null?void 0:u.propertyId)||"",unitId:(e==null?void 0:e.unitId)||(u==null?void 0:u.unitId)||"",ownerNotes:(e==null?void 0:e.ownerNotes)||"",photos:[]}),y=a.find(g=>g.id===p.propertyId),b=l.filter(g=>g.propertyId===p.propertyId),N=g=>{g.preventDefault();const w=p.photos.map(E=>URL.createObjectURL(E)),j=c.find(E=>E.userId===(o==null?void 0:o.id)),_=s?(e==null?void 0:e.tenantId)||(j==null?void 0:j.id)||"1":(j==null?void 0:j.id)||(o==null?void 0:o.id)||"1",k={id:(e==null?void 0:e.id)||Date.now().toString(),tenantId:_,propertyId:p.propertyId||void 0,unitId:p.unitId||void 0,title:p.title,description:p.description,priority:p.priority,status:(e==null?void 0:e.status)||"pending",photos:[...(e==null?void 0:e.photos)||[],...w],createdAt:(e==null?void 0:e.createdAt)||new Date,resolvedAt:e==null?void 0:e.resolvedAt,ownerNotes:p.ownerNotes};e?i(E=>E.map(D=>D.id===e.id?k:D)):(i(E=>[...E,k]),s||d({type:"issue_reported",title:`Problme signal - ${p.title}`,description:p.description,propertyId:p.propertyId,unitId:p.unitId,relatedId:k.id,metadata:{priority:p.priority,status:"pending"}})),t()},v=g=>{const w=Array.from(g.target.files||[]);x(j=>({...j,photos:[...j.photos,...w]}))},m=g=>{x(w=>({...w,photos:w.photos.filter((j,_)=>_!==g)}))},h=[{value:"low",label:"Faible",color:"text-green-600"},{value:"medium",label:"Moyenne",color:"text-yellow-600"},{value:"high",label:"leve",color:"text-orange-600"},{value:"urgent",label:"Urgente",color:"text-red-600"}];return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-semibold",children:e?"Modifier le problme":"Signaler un problme"}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx(He,{className:"w-6 h-6"})})]})}),r.jsxs("form",{onSubmit:N,className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre du problme *"}),r.jsx("input",{type:"text",value:p.title,onChange:g=>x(w=>({...w,title:g.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ex: Fuite d'eau dans la salle de bain",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description dtaille *"}),r.jsx("textarea",{value:p.description,onChange:g=>x(w=>({...w,description:g.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Dcrivez le problme en dtail...",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Priorit *"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:h.map(g=>r.jsxs("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer transition-all ${p.priority===g.value?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:[r.jsx("input",{type:"radio",name:"priority",value:g.value,checked:p.priority===g.value,onChange:w=>x(j=>({...j,priority:w.target.value})),className:"sr-only"}),r.jsx(he,{className:`w-5 h-5 mr-2 ${g.color}`}),r.jsx("span",{className:"text-sm font-medium",children:g.label})]},g.value))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Localisation"}),s?r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Proprit"}),r.jsxs("select",{value:p.propertyId,onChange:g=>x(w=>({...w,propertyId:g.target.value,unitId:""})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Slectionner une proprit"}),a.map(g=>r.jsxs("option",{value:g.id,children:[g.name," - ",g.address.street,", ",g.address.city]},g.id))]})]}),(y==null?void 0:y.type)==="shared"&&b.length>0&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chambre"}),r.jsxs("select",{value:p.unitId,onChange:g=>x(w=>({...w,unitId:g.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Espaces communs"}),b.map(g=>r.jsx("option",{value:g.id,children:g.name},g.id))]})]})]}):u?r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ve,{className:"w-5 h-5 text-blue-600 mr-3"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-900",children:"Votre logement"}),r.jsxs("p",{className:"text-sm text-blue-800",children:[y==null?void 0:y.name,(y==null?void 0:y.type)==="shared"&&b.find(g=>g.id===u.unitId)&&` - ${(f=b.find(g=>g.id===u.unitId))==null?void 0:f.name}`]})]})]})}):r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-yellow-800",children:"Vous devez tre assign  un logement pour signaler un problme."})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Photos du problme"}),r.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-gray-400 transition-colors",children:r.jsxs("div",{className:"space-y-1 text-center",children:[r.jsx(fm,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsxs("div",{className:"flex text-sm text-gray-600",children:[r.jsxs("label",{className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[r.jsx("span",{children:"Tlcharger des photos"}),r.jsx("input",{type:"file",className:"sr-only",accept:"image/*",multiple:!0,onChange:v})]}),r.jsx("p",{className:"pl-1",children:"ou glisser-dposer"})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG jusqu' 10MB chacune"})]})}),p.photos.length>0&&r.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:p.photos.map((g,w)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:URL.createObjectURL(g),alt:`Photo ${w+1}`,className:"w-full h-24 object-cover rounded-lg"}),r.jsx("button",{type:"button",onClick:()=>m(w),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600",children:r.jsx(He,{className:"w-3 h-3"})})]},w))})]}),s&&e&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes du propritaire"}),r.jsx("textarea",{value:p.ownerNotes,onChange:g=>x(w=>({...w,ownerNotes:g.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Notes internes, actions prises, etc."})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:e?"Modifier":"Signaler"})]})]})]})})},Jx=({onTabChange:t})=>{const{user:e}=oe(),[s,n]=L("gestionloc_issues",[]),[i,a]=L("gestionloc_expenses",[]),[l]=L("gestionloc_properties",[]),[c]=L("gestionloc_units",[]),[o]=L("gestionloc_tenants",[]),[d,u]=$.useState(!1),[p,x]=$.useState(),[y,b]=$.useState(!1),[N,v]=$.useState(),[m,h]=$.useState("all"),f=(e==null?void 0:e.role)==="owner",g=o.find(C=>C.userId===(e==null?void 0:e.id)),w=f||g,j=f?s:s.filter(C=>C.tenantId===(g==null?void 0:g.id)||C.tenantId===(e==null?void 0:e.id)),_=C=>{x(C),u(!0)},k=C=>{confirm("tes-vous sr de vouloir supprimer ce problme ?")&&n(O=>O.filter(Y=>Y.id!==C))},E=C=>{v(C),b(!0)},D=C=>{N&&(n(O=>O.map(Y=>Y.id===N.id?{...Y,status:C,resolvedAt:C==="resolved"?new Date:void 0}:Y)),b(!1),v(void 0))},F=C=>{const O=o.find(Y=>Y.id===C);return O?`Locataire #${O.id.slice(-4)}`:"Locataire inconnu"},W=C=>{if(!C)return"Non spcifi";const O=l.find(Y=>Y.id===C);return O?O.name:"Proprit supprime"},I=C=>{if(!C)return"";const O=c.find(Y=>Y.id===C);return O?` - ${O.name}`:""},A=C=>i.filter(O=>O.issueId===C),B=C=>A(C).reduce((O,Y)=>O+Y.amount,0),re=C=>{switch(C){case"low":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-orange-100 text-orange-800";case"urgent":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=C=>{switch(C){case"low":return"Faible";case"medium":return"Moyenne";case"high":return"leve";case"urgent":return"Urgente";default:return"Inconnue"}},P=C=>{switch(C){case"pending":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"resolved":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},T=C=>{switch(C){case"pending":return"En attente";case"in_progress":return"En cours";case"resolved":return"Rsolu";default:return"Inconnu"}},M=C=>{switch(C){case"pending":return r.jsx(ze,{className:"w-4 h-4"});case"in_progress":return r.jsx(he,{className:"w-4 h-4"});case"resolved":return r.jsx(Bt,{className:"w-4 h-4"});default:return r.jsx(ze,{className:"w-4 h-4"})}};s.filter(C=>m==="all"||C.status===m);const q=j.filter(C=>m==="all"||C.status===m),V={total:j.length,pending:j.filter(C=>C.status==="pending").length,inProgress:j.filter(C=>C.status==="in_progress").length,resolved:j.filter(C=>C.status==="resolved").length,urgent:j.filter(C=>C.priority==="urgent").length};return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:f?"Problmes signals":"Signaler un problme"}),r.jsx("p",{className:"text-gray-600",children:f?"Grez les problmes signals par vos locataires":"Signalez les problmes dans votre logement"})]}),r.jsxs("button",{onClick:()=>{if(!w){alert("Vous devez tre assign  un logement pour signaler un problme. Recherchez et rejoignez d'abord un logement.");return}x(void 0),u(!0)},className:`flex items-center px-4 py-2 rounded-lg transition-colors ${w?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-400 text-white cursor-not-allowed"}`,disabled:!w,children:[r.jsx(Et,{className:"w-5 h-5 mr-2"}),f?"Ajouter un problme":"Signaler un problme"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total problmes"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:V.total})]}),r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(he,{className:"w-6 h-6 text-blue-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"En attente"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:V.pending})]}),r.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:r.jsx(ze,{className:"w-6 h-6 text-yellow-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"En cours"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:V.inProgress})]}),r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(he,{className:"w-6 h-6 text-blue-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Urgents"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:V.urgent})]}),r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:r.jsx(he,{className:"w-6 h-6 text-red-600"})})]})})]}),(f||j.length>0)&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(zo,{className:"w-5 h-5 text-gray-400"}),r.jsx("div",{className:"flex space-x-2",children:["all","pending","in_progress","resolved"].map(C=>r.jsx("button",{onClick:()=>h(C),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${m===C?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:C==="all"?"Tous":T(C)},C))})]})}),r.jsx("div",{className:"space-y-4",children:q.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(he,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun problme"}),r.jsx("p",{className:"text-gray-500 mb-4",children:f?"Aucun problme signal pour le moment":w?"Vous n'avez encore signal aucun problme":"Vous devez tre assign  un logement pour signaler des problmes"}),w?r.jsxs("button",{onClick:()=>{x(void 0),u(!0)},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Et,{className:"w-5 h-5 mr-2"}),f?"Ajouter un problme":"Signaler un problme"]}):r.jsxs("button",{onClick:()=>t==null?void 0:t("search"),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Ve,{className:"w-5 h-5 mr-2"}),"Rechercher un logement"]})]}):q.map(C=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:C.title}),r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${re(C.priority)}`,children:S(C.priority)}),r.jsxs("button",{onClick:()=>f?E(C):null,className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium transition-colors ${P(C.status)} ${f?"hover:opacity-80 cursor-pointer":""}`,disabled:!f,children:[M(C.status),r.jsx("span",{className:"ml-1",children:T(C.status)})]})]}),r.jsx("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:r.jsxs("span",{className:"flex items-center",children:[r.jsx(pt,{className:"w-4 h-4 mr-1"}),"Signal par: ",F(C.tenantId)]})}),r.jsx("p",{className:"text-gray-600 mb-3",children:C.description}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[r.jsxs("span",{children:[" ",W(C.propertyId),I(C.unitId)]}),r.jsxs("span",{children:[" ",new Date(C.createdAt).toLocaleDateString("fr-FR")]}),C.resolvedAt&&r.jsxs("span",{children:[" Rsolu le ",new Date(C.resolvedAt).toLocaleDateString("fr-FR")]})]}),A(C.id).length>0&&r.jsxs("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Pt,{className:"w-4 h-4 text-green-600 mr-2"}),r.jsxs("span",{className:"text-sm font-medium text-green-800",children:["Dpenses associes (",A(C.id).length,")"]})]}),r.jsxs("span",{className:"text-sm font-bold text-green-800",children:[B(C.id).toLocaleString("fr-CA"),"$"]})]}),r.jsx("div",{className:"mt-2 space-y-1",children:A(C.id).map(O=>r.jsxs("div",{className:"flex items-center justify-between text-xs text-green-700",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(mm,{className:"w-3 h-3 mr-1"}),O.description]}),r.jsxs("span",{className:"font-medium",children:[O.amount.toLocaleString("fr-CA"),"$"]})]},O.id))})]})]}),(f||C.tenantId===(e==null?void 0:e.id)||C.tenantId===(g==null?void 0:g.id))&&r.jsxs("div",{className:"flex space-x-2 ml-4",children:[f&&r.jsx("button",{onClick:()=>E(C),className:"p-2 text-purple-600 hover:text-purple-800",title:"Changer le statut",children:r.jsx(ze,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>f?_(C):null,className:"p-2 text-gray-600 hover:text-gray-800",disabled:!f,children:r.jsx(ea,{className:"w-4 h-4"})}),f&&r.jsx("button",{onClick:()=>k(C.id),className:"p-2 text-red-600 hover:text-red-800",children:r.jsx(ta,{className:"w-4 h-4"})})]})]}),C.photos.length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[r.jsx(gx,{className:"w-4 h-4 mr-1"}),"Photos (",C.photos.length,")"]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[C.photos.slice(0,4).map((O,Y)=>r.jsx("img",{src:O,alt:`Photo ${Y+1}`,className:"w-full h-20 object-cover rounded-lg cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>window.open(O,"_blank")},Y)),C.photos.length>4&&r.jsxs("div",{className:"w-full h-20 bg-gray-100 rounded-lg flex items-center justify-center text-gray-500 text-sm",children:["+",C.photos.length-4," autres"]})]})]}),C.ownerNotes&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:"Notes du propritaire"}),r.jsx("p",{className:"text-sm text-blue-800",children:C.ownerNotes})]}),!f&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Statut actuel :"}),r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${P(C.status)}`,children:[M(C.status),r.jsx("span",{className:"ml-1",children:T(C.status)})]})]}),C.status==="resolved"&&C.resolvedAt&&r.jsxs("div",{className:"mt-2 text-sm text-green-600",children:[" Rsolu le ",new Date(C.resolvedAt).toLocaleDateString("fr-FR")]})]})]},C.id))}),y&&N&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Changer le statut"}),r.jsx("p",{className:"text-sm text-gray-600",children:N.title})]}),r.jsx("div",{className:"space-y-3",children:["pending","in_progress","resolved"].map(C=>r.jsxs("button",{onClick:()=>D(C),className:`w-full flex items-center p-3 rounded-lg border-2 transition-all ${N.status===C?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-3 ${P(C)}`,children:M(C)}),r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium",children:T(C)}),r.jsxs("div",{className:"text-xs text-gray-500",children:[C==="pending"&&"En attente de traitement",C==="in_progress"&&"Travaux en cours",C==="resolved"&&"Problme rsolu"]})]})]},C))}),r.jsx("div",{className:"flex justify-end space-x-3 mt-6",children:r.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"})})]})}),d&&r.jsx(pm,{issue:p,isOwner:f,onClose:()=>{u(!1),x(void 0)}})]})},Qx=({onTabChange:t})=>{const[e]=L("gestionloc_properties",[]),[s]=L("gestionloc_tenants",[]),[n]=L("gestionloc_payments",[]),[i]=L("gestionloc_expenses",[]),{canUseAdvancedReports:a,canGeneratePDF:l}=Es(),[c,o]=$.useState("month"),[d,u]=$.useState(new Date().getFullYear()),[p,x]=$.useState(new Date().getMonth()),y=c==="month"?new Date(d,p,1):new Date(d,0,1),b=c==="month"?new Date(d,p+1,0):new Date(d,11,31),N=n.filter(A=>{const B=new Date(A.dueDate);return B>=y&&B<=b}),v=i.filter(A=>{const B=new Date(A.date);return B>=y&&B<=b}),m=N.filter(A=>A.status==="paid").reduce((A,B)=>A+B.amount,0),h=v.reduce((A,B)=>A+B.amount,0),f=m-h,g=m>0?f/m*100:0,w={total:N.length,paid:N.filter(A=>A.status==="paid").length,late:N.filter(A=>A.status==="late").length,pending:N.filter(A=>A.status==="pending").length},j=v.reduce((A,B)=>(A[B.type]=(A[B.type]||0)+B.amount,A),{}),_=e.reduce((A,B)=>A+(B.type==="entire"?1:0),0),k=s.length,E=_>0?k/_*100:0,D=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],F=new Date().getFullYear(),W=Array.from({length:5},(A,B)=>F-B),I=()=>{if(!l()){alert("La gnration de PDF n'est pas disponible avec votre plan actuel. Veuillez mettre  niveau vers le plan Pro ou Business.");return}alert("Rapport PDF gnr avec succs ! (Fonctionnalit simule)")};return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Rapports"}),r.jsx("p",{className:"text-gray-600",children:"Analysez les performances de votre portefeuille"})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs("button",{onClick:I,className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[r.jsx(_s,{className:"w-5 h-5 mr-2"}),"Gnrer PDF"]}),r.jsxs("button",{className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(fn,{className:"w-5 h-5 mr-2"}),"Exporter donnes"]})]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-8",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priode"}),r.jsxs("select",{value:c,onChange:A=>o(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"month",children:"Mensuel"}),r.jsx("option",{value:"year",children:"Annuel"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Anne"}),r.jsx("select",{value:d,onChange:A=>u(Number(A.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:W.map(A=>r.jsx("option",{value:A,children:A},A))})]}),c==="month"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mois"}),r.jsx("select",{value:p,onChange:A=>x(Number(A.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:D.map((A,B)=>r.jsx("option",{value:B,children:A},B))})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revenus"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[m.toLocaleString("fr-CA"),"$ CAD"]})]}),r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:r.jsx(er,{className:"w-6 h-6 text-green-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Dpenses"}),r.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[h.toLocaleString("fr-CA"),"$ CAD"]})]}),r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:r.jsx(kx,{className:"w-6 h-6 text-red-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Bnfice net"}),r.jsxs("p",{className:`text-2xl font-bold ${f>=0?"text-green-600":"text-red-600"}`,children:[f.toLocaleString("fr-CA"),"$"]})]}),r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(Pt,{className:"w-6 h-6 text-blue-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Taux d'occupation"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[E.toFixed(1),"%"]})]}),r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(Zs,{className:"w-6 h-6 text-blue-600"})})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Zs,{className:"w-5 h-5 mr-2"}),"Analyse des paiements"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Total paiements"}),r.jsx("span",{className:"font-semibold",children:w.total})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Pays"}),r.jsx("span",{className:"font-semibold text-green-600",children:w.paid})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"En retard"}),r.jsx("span",{className:"font-semibold text-orange-600",children:w.late})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"En attente"}),r.jsx("span",{className:"font-semibold text-yellow-600",children:w.pending})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[r.jsx("span",{children:"Taux de paiement"}),r.jsxs("span",{children:[w.total>0?(w.paid/w.total*100).toFixed(1):0,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${w.total>0?w.paid/w.total*100:0}%`}})})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(vd,{className:"w-5 h-5 mr-2"}),"Rpartition des dpenses"]}),r.jsx("div",{className:"space-y-3",children:Object.entries(j).map(([A,B])=>{const re=h>0?B/h*100:0,S={maintenance:"Maintenance",renovation:"Rnovation",utilities:"Services publics",insurance:"Assurance",taxes:"Taxes",other:"Autre"};return r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:S[A]}),r.jsxs("span",{className:"font-semibold",children:[B.toLocaleString("fr-CA"),"$"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${re}%`}})}),r.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[re.toFixed(1),"%"]})]},A)})}),Object.keys(j).length===0&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(vd,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),r.jsx("p",{children:"Aucune dpense pour cette priode"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(er,{className:"w-5 h-5 mr-2"}),"Analyse de rentabilit"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Revenus bruts"}),r.jsxs("span",{className:"font-semibold text-green-600",children:[m.toLocaleString("fr-CA"),"$"]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Dpenses totales"}),r.jsxs("span",{className:"font-semibold text-red-600",children:["-",h.toLocaleString("fr-CA"),"$"]})]}),r.jsx("hr",{className:"border-gray-200"}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-900 font-medium",children:"Bnfice net"}),r.jsxs("span",{className:`font-bold text-lg ${f>=0?"text-green-600":"text-red-600"}`,children:[f.toLocaleString("fr-CA"),"$"]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Marge bnficiaire"}),r.jsxs("span",{className:`font-semibold ${g>=0?"text-green-600":"text-red-600"}`,children:[g.toFixed(1),"%"]})]})]}),r.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Recommandations"}),r.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[g<10&&r.jsx("li",{children:" Considrez augmenter les loyers ou rduire les dpenses"}),w.late>0&&r.jsx("li",{children:" Mettez en place un systme de rappel automatique"}),E<90&&r.jsx("li",{children:" Amliorez la commercialisation de vos biens vacants"}),g>=20&&r.jsx("li",{children:" Excellente rentabilit ! Considrez l'expansion"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Zs,{className:"w-5 h-5 mr-2"}),"Rapports avancs"]}),a()?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("button",{className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"font-medium text-gray-900",children:"Analyse de cash-flow"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Prvisions de trsorerie sur 12 mois"})]}),r.jsxs("button",{className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"font-medium text-gray-900",children:"Comparaison de performance"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Benchmarking par proprit"})]}),r.jsxs("button",{className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"font-medium text-gray-900",children:"Analyse fiscale"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Optimisation des dductions"})]})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Zs,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Rapports avancs"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Accdez  des analyses approfondies avec le plan Business"}),r.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Mettre  niveau"})]})]})]})]})},kd=[{id:"communication",name:"Assistant Communication",description:"Gnre des messages professionnels pour vos locataires",icon:Nn,category:"communication",requiredPlan:"pro"},{id:"payment",name:"Assistant Paiements",description:"Aide  la gestion et au suivi des paiements",icon:bx,category:"financial",requiredPlan:"pro"},{id:"fiscal",name:"Assistant Fiscal",description:"Conseils fiscaux et optimisation des dclarations",icon:mx,category:"financial",requiredPlan:"pro"},{id:"summary",name:"Rsum Mensuel",description:"Gnre des rapports mensuels automatiques",icon:Zs,category:"analysis",requiredPlan:"pro"},{id:"diagnostic",name:"Diagnostic Problmes",description:"Analyse et propose des solutions aux problmes techniques",icon:Sx,category:"maintenance",requiredPlan:"business"},{id:"contract",name:"Gnrateur de Contrats",description:"Cre des contrats de location personnaliss",icon:_s,category:"analysis",requiredPlan:"business"}],Yx=()=>{const{user:t}=oe(),{subscription:e,isLoading:s,canUseAIAgent:n,trackAIUsage:i}=Es(),[a,l]=$.useState({}),[c,o]=$.useState(!0);$.useEffect(()=>{t&&d()},[t]);const d=async()=>{if(t)try{const v=new Date().toISOString().slice(0,7),{data:m,error:h}=await ke.from("ai_usage_tracking").select("agent_type, usage_count").eq("user_id",t.id).eq("usage_month",v);if(h)throw h;const f={},{data:g}=await ke.from("ai_plan_features").select("agent_type, monthly_limit").eq("plan",(e==null?void 0:e.plan)||"free").eq("enabled",!0);kd.forEach(w=>{const j=m==null?void 0:m.find(k=>k.agent_type===w.id),_=g==null?void 0:g.find(k=>k.agent_type===w.id);f[w.id]={count:(j==null?void 0:j.usage_count)||0,max:(_==null?void 0:_.monthly_limit)||0}}),l(f)}catch(v){console.error("Erreur lors du chargement des donnes d'usage:",v)}finally{o(!1)}},u=async v=>t?await n(v.id):!1,p=v=>{const m=a[v];if(!m||m.max===0)return{status:"unlimited",percentage:0};const h=m.count/m.max*100;return h>=100?{status:"exhausted",percentage:100}:h>=80?{status:"warning",percentage:h}:{status:"available",percentage:h}},x=async v=>{if(!await u(v)){alert(`Cette fonctionnalit ncessite un abonnement ${v.requiredPlan.toUpperCase()}`);return}if(p(v.id).status==="exhausted"){alert("Limite d'utilisation atteinte pour ce mois. Passez  un plan suprieur pour plus d'utilisations.");return}await i(v.id,0,0),d(),alert(`Lancement de ${v.name}... (Fonctionnalit en cours de dveloppement)`)},y=v=>{switch(v){case"available":return"text-green-600";case"warning":return"text-yellow-600";case"exhausted":return"text-red-600";case"unlimited":return"text-blue-600";default:return"text-gray-600"}},b=v=>{switch(v){case"available":return Ei;case"warning":return mn;case"exhausted":return mn;case"unlimited":return Ei;default:return ze}};if(s||c)return r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(v=>r.jsx("div",{className:"h-48 bg-gray-200 rounded-lg"},v))})]})});const N=(e==null?void 0:e.plan)||"free";return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Agents IA"}),r.jsx("p",{className:"text-gray-600",children:"Automatisez vos tches de gestion locative avec nos assistants intelligents"}),r.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Cx,{className:"w-5 h-5 text-blue-600 mr-2"}),r.jsxs("span",{className:"text-sm font-medium text-blue-900",children:["Plan actuel: ",N.toUpperCase()]})]}),N==="free"&&r.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Passez au plan PRO pour accder aux agents IA"})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:kd.map(v=>{var g,w;const m=v.icon,h=p(v.id),f=b(h.status);return r.jsxs("div",{className:`bg-white rounded-lg shadow-md p-6 transition-all duration-200 ${h.status!=="exhausted"?"hover:shadow-lg cursor-pointer border-l-4 border-blue-500":"opacity-60 border-l-4 border-gray-300"}`,onClick:()=>x(v),children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:r.jsx(m,{className:"w-6 h-6 text-blue-600"})})}),r.jsx("div",{className:"flex items-center",children:r.jsx(f,{className:`w-4 h-4 ${y(h.status)}`})})]}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:v.name}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:v.description}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsxs("span",{className:"text-gray-500",children:["Plan requis: ",v.requiredPlan.toUpperCase()]}),h.status!=="unlimited"&&r.jsxs("span",{className:y(h.status),children:[((g=a[v.id])==null?void 0:g.count)||0,"/",((w=a[v.id])==null?void 0:w.max)||0]})]}),h.status!=="unlimited"&&r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${h.status==="available"?"bg-green-500":h.status==="warning"?"bg-yellow-500":"bg-red-500"}`,style:{width:`${h.percentage}%`}})})]}),N==="free"&&r.jsx("div",{className:"mt-4 text-center",children:r.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:"Mise  niveau requise"})})]},v.id)})}),N==="free"&&r.jsxs("div",{className:"mt-8 text-center p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg",children:[r.jsx(hm,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Dbloquez le potentiel de l'IA"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Passez au plan PRO pour accder  tous nos assistants intelligents"}),r.jsx("button",{className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Voir les plans"})]})]})},Xx=()=>{const{user:t}=oe(),[e,s]=$.useState(null),[n,i]=$.useState(!0),[a,l]=$.useState(!1),[c,o]=$.useState(null),[d,u]=$.useState({first_name:"",last_name:"",phone:"",address:{street:"",city:"",postal_code:"",country:""},preferences:{notifications:{email:!0,push:!0,sms:!1},language:"fr",theme:"light",aiCommunication:"email"}});$.useEffect(()=>{t&&p()},[t]);const p=async()=>{var v;try{const{data:m,error:h}=await ke.from("profiles").select("*").eq("id",t==null?void 0:t.id).single();if(h)throw h;s(m),u({first_name:m.first_name||"",last_name:m.last_name||"",phone:m.phone||"",address:m.address||{street:"",city:"",postal_code:"",country:""},preferences:{...m.preferences,aiCommunication:((v=m.preferences)==null?void 0:v.aiCommunication)||"email"}})}catch(m){console.error("Erreur lors du chargement du profil:",m),o({type:"error",text:"Erreur lors du chargement du profil"})}finally{i(!1)}},x=async v=>{v.preventDefault(),l(!0),o(null);try{const{error:m}=await ke.from("profiles").update({first_name:d.first_name,last_name:d.last_name,phone:d.phone,address:d.address,preferences:d.preferences,updated_at:new Date().toISOString()}).eq("id",t==null?void 0:t.id);if(m)throw m;o({type:"success",text:"Profil mis  jour avec succs"}),p()}catch(m){console.error("Erreur lors de la mise  jour:",m),o({type:"error",text:"Erreur lors de la mise  jour du profil"})}finally{l(!1)}},y=(v,m)=>{u(h=>({...h,[v]:m}))},b=(v,m)=>{u(h=>({...h,address:{...h.address,[v]:m}}))},N=(v,m,h)=>{u(f=>({...f,preferences:{...f.preferences,[v]:typeof f.preferences[v]=="object"?{...f.preferences[v],[m]:h}:h}}))};return n?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):r.jsx("div",{className:"max-w-4xl mx-auto p-6",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[r.jsx(pt,{className:"w-5 h-5 mr-2"}),"Paramtres du Profil"]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Grez vos informations personnelles et prfrences"})]}),c&&r.jsx("div",{className:`mx-6 mt-4 p-3 rounded-md ${c.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:c.text}),r.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[r.jsx(pt,{className:"w-4 h-4 mr-2"}),"Informations personnelles"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prnom"}),r.jsx("input",{type:"text",value:d.first_name,onChange:v=>y("first_name",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom"}),r.jsx("input",{type:"text",value:d.last_name,onChange:v=>y("last_name",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[r.jsx(Zt,{className:"w-4 h-4 mr-1"}),"Email"]}),r.jsx("input",{type:"email",value:(e==null?void 0:e.email)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[r.jsx(ks,{className:"w-4 h-4 mr-1"}),"Tlphone"]}),r.jsx("input",{type:"tel",value:d.phone,onChange:v=>y("phone",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[r.jsx(Zi,{className:"w-4 h-4 mr-2"}),"Adresse"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rue"}),r.jsx("input",{type:"text",value:d.address.street,onChange:v=>b("street",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ville"}),r.jsx("input",{type:"text",value:d.address.city,onChange:v=>b("city",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code postal"}),r.jsx("input",{type:"text",value:d.address.postal_code,onChange:v=>b("postal_code",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[r.jsx(um,{className:"w-4 h-4 mr-2"}),"Notifications"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:d.preferences.notifications.email,onChange:v=>N("notifications","email",v.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),r.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Notifications par email"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:d.preferences.notifications.push,onChange:v=>N("notifications","push",v.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),r.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Notifications push"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:d.preferences.notifications.sms,onChange:v=>N("notifications","sms",v.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),r.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Notifications SMS"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Prfrence de communication IA"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer transition-all ${d.preferences.aiCommunication==="email"?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:[r.jsx("input",{type:"radio",name:"aiCommunication",value:"email",checked:d.preferences.aiCommunication==="email",onChange:v=>N("","aiCommunication",v.target.value),className:"sr-only"}),r.jsx(Zt,{className:"w-5 h-5 mr-2 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium",children:"Email"})]}),r.jsxs("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer transition-all ${d.preferences.aiCommunication==="sms"?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:[r.jsx("input",{type:"radio",name:"aiCommunication",value:"sms",checked:d.preferences.aiCommunication==="sms",onChange:v=>N("","aiCommunication",v.target.value),className:"sr-only"}),r.jsx(ks,{className:"w-5 h-5 mr-2 text-green-600"}),r.jsx("span",{className:"text-sm font-medium",children:"SMS"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[r.jsx(px,{className:"w-4 h-4 mr-2"}),"Langue"]}),r.jsxs("select",{value:d.preferences.language,onChange:v=>N("","language",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"fr",children:"Franais"}),r.jsx("option",{value:"en",children:"English"})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[r.jsx(vx,{className:"w-4 h-4 mr-2"}),"Thme"]}),r.jsxs("select",{value:d.preferences.theme,onChange:v=>N("","theme",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"light",children:"Clair"}),r.jsx("option",{value:"dark",children:"Sombre"}),r.jsx("option",{value:"auto",children:"Automatique"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[r.jsx(wx,{className:"w-4 h-4 mr-2"}),"Rle"]}),r.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(e==null?void 0:e.role)==="owner"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:(e==null?void 0:e.role)==="owner"?"Propritaire":"Locataire"})})]}),r.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:r.jsxs("button",{type:"submit",disabled:a,className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(jx,{className:"w-4 h-4 mr-2"}),a?"Sauvegarde...":"Sauvegarder"]})})]})]})})},Zx=({plan:t,isCurrentPlan:e,onSelectPlan:s,disabled:n})=>{const i=Ul[t],{t:a,formatCurrency:l}=_n(),c=[{text:i.features.maxProperties===-1?"Proprits illimites":`${i.features.maxProperties} proprit${i.features.maxProperties>1?"s":""}`,included:!0},{text:i.features.maxTenants===-1?"Locataires illimits":`${i.features.maxTenants} locataire${i.features.maxTenants>1?"s":""}`,included:!0},{text:"Assistants IA",included:i.features.aiEnabled},{text:"Gnration PDF",included:i.features.pdfGeneration},{text:"Utilisateurs multiples",included:i.features.multiUser},{text:"Rapports avancs",included:i.features.advancedReports},{text:"IA tendue",included:i.features.extendedAI}];return r.jsxs("div",{className:`relative bg-white rounded-2xl shadow-sm border-2 transition-all duration-200 ${e?"border-blue-500 ring-2 ring-blue-200":i.popular?"border-orange-200 hover:border-orange-300":"border-gray-200 hover:border-gray-300"} ${n?"opacity-50":""}`,children:[i.popular&&r.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:r.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[r.jsx(_x,{className:"w-3 h-3 mr-1"}),"Populaire"]})}),r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:i.name}),r.jsx("p",{className:"text-gray-500 mb-4",children:i.description}),r.jsxs("div",{className:"flex items-baseline justify-center",children:[r.jsx("span",{className:"text-4xl font-bold text-gray-900",children:l(i.price)}),r.jsx("span",{className:"text-gray-500 ml-1",children:"/mois"})]})]}),r.jsx("ul",{className:"space-y-4 mb-8",children:c.map((o,d)=>r.jsxs("li",{className:"flex items-center",children:[r.jsx("div",{className:`flex-shrink-0 w-5 h-5 rounded-full flex items-center justify-center ${o.included?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"}`,children:r.jsx(Bt,{className:"w-3 h-3"})}),r.jsx("span",{className:`ml-3 text-sm ${o.included?"text-gray-900":"text-gray-400"}`,children:o.text})]},d))}),r.jsx("button",{onClick:()=>s(t),disabled:n||e,className:`w-full py-3 px-4 rounded-lg font-medium transition-colors ${e?"bg-gray-100 text-gray-500 cursor-not-allowed":i.popular?"bg-orange-600 text-white hover:bg-orange-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:e?"Plan actuel":`Choisir ${i.name}`})]})]})},ey=()=>{var F,W,I,A,B,re,S,P,T,M,q,V;const{user:t,subscription:e,updateSubscription:s}=oe(),{currentPlan:n,getDaysUntilRenewal:i,isPaymentOverdue:a}=Es(),{t:l,formatCurrency:c}=_n(),[o]=L("gestionloc_invoices",[{id:"inv_1",userId:"1",subscriptionId:"sub_1",amount:19,currency:"CAD",status:"paid",invoiceNumber:"INV-2024-001",invoiceDate:new Date("2024-01-01"),dueDate:new Date("2024-01-01"),paidDate:new Date("2024-01-01"),createdAt:new Date("2024-01-01")},{id:"inv_2",userId:"1",subscriptionId:"sub_1",amount:19,currency:"CAD",status:"paid",invoiceNumber:"INV-2024-002",invoiceDate:new Date("2024-02-01"),dueDate:new Date("2024-02-01"),paidDate:new Date("2024-02-01"),createdAt:new Date("2024-02-01")}]),[d,u]=$.useState(!1),[p,x]=$.useState(!1),[y,b]=$.useState({cardNumber:"",expiryMonth:"",expiryYear:"",cvv:"",cardholderName:""}),[N,v]=$.useState({firstName:(t==null?void 0:t.firstName)||"",lastName:(t==null?void 0:t.lastName)||"",street:((F=t==null?void 0:t.address)==null?void 0:F.street)||"",apartment:((W=t==null?void 0:t.address)==null?void 0:W.apartment)||"",city:((I=t==null?void 0:t.address)==null?void 0:I.city)||"",province:((A=t==null?void 0:t.address)==null?void 0:A.province)||"",postalCode:((B=t==null?void 0:t.address)==null?void 0:B.postalCode)||"",country:((re=t==null?void 0:t.address)==null?void 0:re.country)||"Canada"}),[m,h]=$.useState(!1),[f,g]=$.useState(!1),w=async C=>{if(!t)return;const O={...t,...C};setUser(O)},j=()=>{alert("Mthode de paiement mise  jour avec succs !"),u(!1),b({cardNumber:"",expiryMonth:"",expiryYear:"",cvv:"",cardholderName:""})},_=()=>{w({firstName:N.firstName,lastName:N.lastName,address:{street:N.street,apartment:N.apartment,city:N.city,province:N.province,postalCode:N.postalCode,country:N.country}}),alert("Adresse de facturation mise  jour avec succs !"),x(!1)},k=async C=>{g(!0);try{if(await new Promise(O=>setTimeout(O,2e3)),e){const O={...e,plan:C,updatedAt:new Date};s(O)}h(!1)}catch(O){console.error("Error updating subscription:",O)}finally{g(!1)}},E=()=>{if(confirm("tes-vous sr de vouloir annuler votre abonnement ?")&&e){const C={...e,cancelAtPeriodEnd:!0,updatedAt:new Date};s(C)}},D=()=>{if(!e)return"Aucun abonnement";switch(e.status){case"active":return"Actif";case"past_due":return"Paiement en retard";case"pending":return"En attente";case"suspended":return"Suspendu";case"canceled":return"Annul";default:return"Inconnu"}};return(t==null?void 0:t.role)!=="owner"?r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(xs,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Accs restreint"}),r.jsx("p",{className:"text-gray-500",children:"La gestion d'abonnement est rserve aux propritaires"})]})}):m?r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Choisir un plan"}),r.jsx("p",{className:"text-gray-600",children:"Slectionnez le plan qui correspond  vos besoins"})]}),r.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Retour"})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl",children:["free","pro","business"].map(C=>r.jsx(Zx,{plan:C,isCurrentPlan:(e==null?void 0:e.plan)===C,onSelectPlan:k,disabled:f},C))}),f&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Traitement en cours"}),r.jsx("p",{className:"text-gray-500",children:"Redirection vers Stripe..."})]})})})]}):r.jsxs("div",{className:"p-6 max-w-4xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Mon abonnement"}),r.jsx("p",{className:"text-gray-600",children:"Grez votre abonnement et votre facturation"})]}),a()&&r.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(mn,{className:"w-5 h-5 text-red-400 mr-3"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Paiement en retard"}),r.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Votre paiement est en retard. Certaines fonctionnalits sont dsactives."})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Plan actuel"})}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-xl font-bold text-gray-900",children:n.name}),r.jsx("p",{className:"text-gray-500",children:n.description})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[n.price,"$ CAD"]}),r.jsx("div",{className:"text-sm text-gray-500",children:"par mois"})]})]}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Statut"}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:c(n.price)}),r.jsx("span",{className:"ml-2 text-sm font-medium",children:D()})]})]}),e&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Prochain prlvement"}),r.jsx("span",{className:"text-sm font-medium",children:new Date(e.currentPeriodEnd).toLocaleDateString("fr-FR")})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Jours restants"}),r.jsxs("span",{className:"text-sm font-medium",children:[i()," jours"]})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>h(!0),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Changer de plan"}),(e==null?void 0:e.plan)!=="free"&&!(e!=null&&e.cancelAtPeriodEnd)&&r.jsx("button",{onClick:E,className:"w-full border border-red-300 text-red-700 py-2 px-4 rounded-lg hover:bg-red-50 transition-colors",children:"Annuler l'abonnement"}),(e==null?void 0:e.cancelAtPeriodEnd)&&r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:r.jsxs("p",{className:"text-sm text-yellow-800",children:["Votre abonnement sera annul le ",new Date(e.currentPeriodEnd).toLocaleDateString("fr-FR")]})})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Informations de facturation"})}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(xs,{className:"w-5 h-5 text-gray-400 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"   4242"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Expire 12/25"})]})]}),r.jsx("button",{onClick:()=>u(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Modifier"})]}),r.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Adresse de facturation"}),r.jsxs("p",{className:"text-sm text-gray-600",children:[t==null?void 0:t.firstName," ",t==null?void 0:t.lastName,r.jsx("br",{}),(S=t==null?void 0:t.address)==null?void 0:S.street,((P=t==null?void 0:t.address)==null?void 0:P.apartment)&&`, ${t.address.apartment}`,r.jsx("br",{}),(T=t==null?void 0:t.address)==null?void 0:T.city,", ",(M=t==null?void 0:t.address)==null?void 0:M.province," ",(q=t==null?void 0:t.address)==null?void 0:q.postalCode,r.jsx("br",{}),(V=t==null?void 0:t.address)==null?void 0:V.country]}),r.jsx("button",{onClick:()=>x(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium mt-2",children:"Modifier"})]})]})})]})]}),r.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Historique des factures"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facture"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(C=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:C.invoiceNumber}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.invoiceDate.toLocaleDateString("fr-FR")}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c(C.amount)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${C.status==="paid"?"bg-green-100 text-green-800":C.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:C.status==="paid"?"Paye":C.status==="pending"?"En attente":"chec"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsxs("button",{className:"text-blue-600 hover:text-blue-800 flex items-center",children:[r.jsx(fn,{className:"w-4 h-4 mr-1"}),"Tlcharger"]})})]},C.id))})]})})]}),d&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Modifier la mthode de paiement"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Mettez  jour vos informations de carte"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom du titulaire"}),r.jsx("input",{type:"text",value:y.cardholderName,onChange:C=>b(O=>({...O,cardholderName:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Jean Dupont"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Numro de carte"}),r.jsx("input",{type:"text",value:y.cardNumber,onChange:C=>b(O=>({...O,cardNumber:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"1234 5678 9012 3456",maxLength:19})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mois"}),r.jsxs("select",{value:y.expiryMonth,onChange:C=>b(O=>({...O,expiryMonth:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"MM"}),Array.from({length:12},(C,O)=>r.jsx("option",{value:String(O+1).padStart(2,"0"),children:String(O+1).padStart(2,"0")},O+1))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Anne"}),r.jsxs("select",{value:y.expiryYear,onChange:C=>b(O=>({...O,expiryYear:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"AAAA"}),Array.from({length:10},(C,O)=>{const Y=new Date().getFullYear()+O;return r.jsx("option",{value:Y,children:Y},Y)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVV"}),r.jsx("input",{type:"text",value:y.cvv,onChange:C=>b(O=>({...O,cvv:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"123",maxLength:4})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"}),r.jsx("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Sauvegarder"})]})]})}),p&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full p-6",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Modifier l'adresse de facturation"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Mettez  jour votre adresse de facturation"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prnom"}),r.jsx("input",{type:"text",value:N.firstName,onChange:C=>v(O=>({...O,firstName:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom"}),r.jsx("input",{type:"text",value:N.lastName,onChange:C=>v(O=>({...O,lastName:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse"}),r.jsx("input",{type:"text",value:N.street,onChange:C=>v(O=>({...O,street:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"123 Rue de la Paix"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appartement"}),r.jsx("input",{type:"text",value:N.apartment,onChange:C=>v(O=>({...O,apartment:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"App 4B"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ville"}),r.jsx("input",{type:"text",value:N.city,onChange:C=>v(O=>({...O,city:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Montral"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Province"}),r.jsxs("select",{value:N.province,onChange:C=>v(O=>({...O,province:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Slectionner une province"}),r.jsx("option",{value:"AB",children:"Alberta"}),r.jsx("option",{value:"BC",children:"Colombie-Britannique"}),r.jsx("option",{value:"MB",children:"Manitoba"}),r.jsx("option",{value:"NB",children:"Nouveau-Brunswick"}),r.jsx("option",{value:"NL",children:"Terre-Neuve-et-Labrador"}),r.jsx("option",{value:"NS",children:"Nouvelle-cosse"}),r.jsx("option",{value:"ON",children:"Ontario"}),r.jsx("option",{value:"PE",children:"le-du-Prince-douard"}),r.jsx("option",{value:"QC",children:"Qubec"}),r.jsx("option",{value:"SK",children:"Saskatchewan"}),r.jsx("option",{value:"NT",children:"Territoires du Nord-Ouest"}),r.jsx("option",{value:"NU",children:"Nunavut"}),r.jsx("option",{value:"YT",children:"Yukon"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code postal"}),r.jsx("input",{type:"text",value:N.postalCode,onChange:C=>v(O=>({...O,postalCode:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"H1A 1A1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pays"}),r.jsxs("select",{value:N.country,onChange:C=>v(O=>({...O,country:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"Canada",children:"Canada"}),r.jsx("option",{value:"tats-Unis",children:"tats-Unis"}),r.jsx("option",{value:"France",children:"France"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"}),r.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Sauvegarder"})]})]})})]})},ty=({property:t,unit:e,onClose:s})=>{var m;const{user:n}=oe(),[i,a]=L("gestionloc_requests",[]),[l]=L("gestionloc_visit_requests",[]),[c,o]=L("gestionloc_properties",[]),[d,u]=L("gestionloc_units",[]),{addNotification:p}=jr(t.ownerId),{addHistoryEntry:x}=Is(),[y,b]=$.useState({firstName:(n==null?void 0:n.firstName)||"",lastName:(n==null?void 0:n.lastName)||"",email:(n==null?void 0:n.email)||"",phone:(n==null?void 0:n.phone)||"",message:"",idDocument:null,communicationPreference:((m=n==null?void 0:n.preferences)==null?void 0:m.aiCommunication)||"email"}),N=h=>{if(h.preventDefault(),!y.firstName||!y.lastName||!y.email||!y.phone){alert("Veuillez remplir tous les champs obligatoires.");return}const f=l.find(w=>w.tenantId===(n==null?void 0:n.id)&&w.propertyId===t.id&&(e?w.unitId===e.id:!w.unitId)&&(w.status==="confirmed"||w.status==="completed")),g={id:Date.now().toString(),propertyId:e?void 0:t.id,unitId:e==null?void 0:e.id,tenantId:(n==null?void 0:n.id)||"",status:"en_attente",requestDate:new Date,visitRequestId:f==null?void 0:f.id,tenantInfo:{firstName:y.firstName,lastName:y.lastName,email:y.email,phone:y.phone,message:y.message,idDocument:y.idDocument?URL.createObjectURL(y.idDocument):void 0,communicationPreference:y.communicationPreference}};a(w=>[...w,g]),e?u(w=>w.map(j=>j.id===e.id?{...j,status:"en_attente_validation"}:j)):o(w=>w.map(j=>j.id===t.id?{...j,status:"en_attente_validation"}:j)),p({userId:t.ownerId,type:"general",title:"Nouvelle demande de logement",message:`${y.firstName} ${y.lastName} souhaite ${e?`rejoindre la chambre ${e.name}`:"louer votre logement"} - ${t.name}`,read:!1}),x({type:"property_request",title:`Demande de logement - ${t.name}`,description:`Demande pour ${e?`la chambre ${e.name}`:"le logement entier"}`,propertyId:t.id,unitId:e==null?void 0:e.id,relatedId:g.id,metadata:{status:"pending"}}),alert(" Votre demande a t envoye avec succs au propritaire ! Vous recevrez une notification de sa rponse."),s()},v=h=>{var g;const f=(g=h.target.files)==null?void 0:g[0];f&&b(w=>({...w,idDocument:f}))};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-semibold",children:e?`Demande pour la chambre ${e.name}`:"Demande de logement"}),r.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:r.jsx(He,{className:"w-6 h-6"})})]})}),r.jsxs("div",{className:"p-6 bg-blue-50 border-b border-gray-200",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:t.name}),r.jsxs("p",{className:"text-sm text-gray-600",children:[t.address.street,", ",t.address.city]}),e&&r.jsxs("div",{className:"mt-2 p-3 bg-white rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mt-1",children:[r.jsxs("span",{children:[e.area," m"]}),r.jsxs("span",{className:"font-semibold text-green-600",children:[e.rent,"$/mois"]})]})]})]}),r.jsxs("form",{onSubmit:N,className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[r.jsx(pt,{className:"w-5 h-5 mr-2"}),"Informations personnelles"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prnom *"}),r.jsx("input",{type:"text",value:y.firstName,onChange:h=>b(f=>({...f,firstName:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom *"}),r.jsx("input",{type:"text",value:y.lastName,onChange:h=>b(f=>({...f,lastName:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),r.jsx("input",{type:"email",value:y.email,onChange:h=>b(f=>({...f,email:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tlphone *"}),r.jsx("input",{type:"tel",value:y.phone,onChange:h=>b(f=>({...f,phone:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[r.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Message au propritaire (optionnel)"]}),r.jsx("textarea",{value:y.message,onChange:h=>b(f=>({...f,message:h.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Prsentez-vous et expliquez pourquoi vous souhaitez ce logement..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Prfrence de communication pour les messages IA"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer transition-all ${y.communicationPreference==="email"?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:[r.jsx("input",{type:"radio",name:"communicationPreference",value:"email",checked:y.communicationPreference==="email",onChange:h=>b(f=>({...f,communicationPreference:h.target.value})),className:"sr-only"}),r.jsx(Zt,{className:"w-5 h-5 mr-2 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium",children:"Email"})]}),r.jsxs("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer transition-all ${y.communicationPreference==="sms"?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:[r.jsx("input",{type:"radio",name:"communicationPreference",value:"sms",checked:y.communicationPreference==="sms",onChange:h=>b(f=>({...f,communicationPreference:h.target.value})),className:"sr-only"}),r.jsx(ks,{className:"w-5 h-5 mr-2 text-green-600"}),r.jsx("span",{className:"text-sm font-medium",children:"SMS"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[r.jsx(_s,{className:"w-4 h-4 mr-2"}),"Pice d'identit (optionnel)"]}),r.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-gray-400 transition-colors",children:r.jsxs("div",{className:"space-y-1 text-center",children:[r.jsx(fm,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsxs("div",{className:"flex text-sm text-gray-600",children:[r.jsxs("label",{className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[r.jsx("span",{children:"Tlcharger un fichier"}),r.jsx("input",{type:"file",className:"sr-only",accept:"image/*,.pdf",onChange:v})]}),r.jsx("p",{className:"pl-1",children:"ou glisser-dposer"})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, PDF jusqu' 10MB"}),y.idDocument&&r.jsxs("p",{className:"text-sm text-green-600 mt-2",children:["Fichier slectionn: ",y.idDocument.name]})]})})]}),r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Important"}),r.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[r.jsx("li",{children:" Votre demande sera envoye au propritaire pour validation"}),r.jsx("li",{children:" Le propritaire peut accepter ou refuser votre demande"}),r.jsx("li",{children:" Vous recevrez une notification de sa dcision"}),r.jsx("li",{children:" En cas d'acceptation, vous pourrez accder  votre espace locataire"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Envoyer la demande"})]})]})]})})},gm=({property:t,unit:e,onClose:s})=>{var b;const{user:n}=oe(),[i,a]=L("gestionloc_visit_requests",[]),{addNotification:l}=jr(t.ownerId),{addHistoryEntry:c}=Is(),[o,d]=$.useState({firstName:(n==null?void 0:n.firstName)||"",lastName:(n==null?void 0:n.lastName)||"",email:(n==null?void 0:n.email)||"",phone:(n==null?void 0:n.phone)||"",message:"",selectedDate:"",selectedTime:"",communicationPreference:((b=n==null?void 0:n.preferences)==null?void 0:b.aiCommunication)||"email"}),[u]=$.useState(()=>{const N=[],v=new Date;for(let m=1;m<=14;m++){const h=new Date(v);if(h.setDate(v.getDate()+m),h.getDay()===0||h.getDay()===6)continue;const f=h.toISOString().split("T")[0];["09:00","11:00","14:00","16:00","18:00"].forEach(w=>{const j=`${f}-${w}`;i.some(k=>k.propertyId===t.id&&k.visitDate===f&&k.visitTime===w&&k.status!=="cancelled")||N.push({id:j,date:f,time:w,available:!0})})}return N}),p=N=>{if(N.preventDefault(),!o.selectedDate||!o.selectedTime){alert("Veuillez slectionner une date et une heure pour la visite.");return}const v=`${o.selectedDate}-${o.selectedTime}`,m={id:Date.now().toString(),propertyId:t.id,unitId:e==null?void 0:e.id,tenantId:(n==null?void 0:n.id)||"",slotId:v,status:"pending",tenantInfo:{firstName:o.firstName,lastName:o.lastName,email:o.email,phone:o.phone,message:o.message,communicationPreference:o.communicationPreference},requestDate:new Date,visitDate:o.selectedDate,visitTime:o.selectedTime};a(h=>[...h,m]),l({userId:t.ownerId,type:"general",title:"Demande de visite",message:`${o.firstName} ${o.lastName} souhaite visiter ${e?`la chambre ${e.name}`:"votre logement"} - ${t.name} le ${new Date(o.selectedDate).toLocaleDateString("fr-FR")}  ${o.selectedTime}`,read:!1}),c({type:"visit_request",title:`Demande de visite - ${t.name}`,description:`Demande de visite pour ${e?`la chambre ${e.name}`:"le logement entier"} le ${new Date(o.selectedDate).toLocaleDateString("fr-FR")}  ${o.selectedTime}`,propertyId:t.id,unitId:e==null?void 0:e.id,relatedId:m.id,metadata:{visitDate:o.selectedDate,visitTime:o.selectedTime,status:"pending"}}),alert("Votre demande de visite a t envoye au propritaire !"),s()},x=N=>new Date(N).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"}),y=u.reduce((N,v)=>(N[v.date]||(N[v.date]=[]),N[v.date].push(v),N),{});return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h2",{className:"text-xl font-semibold",children:["Demande de visite",e&&` - ${e.name}`]}),r.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:r.jsx(He,{className:"w-6 h-6"})})]})}),r.jsxs("div",{className:"p-6 bg-blue-50 border-b border-gray-200",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:t.name}),r.jsxs("p",{className:"text-sm text-gray-600",children:[t.address.street,", ",t.address.city]}),e&&r.jsxs("div",{className:"mt-2 p-3 bg-white rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mt-1",children:[r.jsxs("span",{children:[e.area," m"]}),r.jsxs("span",{className:"font-semibold text-green-600",children:[e.rent,"$/mois"]})]})]})]}),r.jsxs("form",{onSubmit:p,className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[r.jsx(pt,{className:"w-5 h-5 mr-2"}),"Informations personnelles"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prnom *"}),r.jsx("input",{type:"text",value:o.firstName,onChange:N=>d(v=>({...v,firstName:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom *"}),r.jsx("input",{type:"text",value:o.lastName,onChange:N=>d(v=>({...v,lastName:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),r.jsx("input",{type:"email",value:o.email,onChange:N=>d(v=>({...v,email:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tlphone *"}),r.jsx("input",{type:"tel",value:o.phone,onChange:N=>d(v=>({...v,phone:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[r.jsx(fe,{className:"w-5 h-5 mr-2"}),"Planifier la visite"]}),r.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:Object.entries(y).map(([N,v])=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:x(N)}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:v.map(m=>r.jsxs("button",{type:"button",onClick:()=>{d(h=>({...h,selectedDate:m.date,selectedTime:m.time}))},className:`p-2 rounded-lg text-sm font-medium transition-colors ${o.selectedDate===m.date&&o.selectedTime===m.time?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[r.jsx(ze,{className:"w-4 h-4 mx-auto mb-1"}),m.time]},m.id))})]},N))}),o.selectedDate&&o.selectedTime&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:[r.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:"Crneau slectionn :"}),r.jsxs("p",{className:"text-blue-800",children:[x(o.selectedDate),"  ",o.selectedTime]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[r.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Message (optionnel)"]}),r.jsx("textarea",{value:o.message,onChange:N=>d(v=>({...v,message:N.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Questions ou informations supplmentaires..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Prfrence de communication pour les messages IA"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer transition-all ${o.communicationPreference==="email"?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:[r.jsx("input",{type:"radio",name:"communicationPreference",value:"email",checked:o.communicationPreference==="email",onChange:N=>d(v=>({...v,communicationPreference:N.target.value})),className:"sr-only"}),r.jsx(Zt,{className:"w-5 h-5 mr-2 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium",children:"Email"})]}),r.jsxs("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer transition-all ${o.communicationPreference==="sms"?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:[r.jsx("input",{type:"radio",name:"communicationPreference",value:"sms",checked:o.communicationPreference==="sms",onChange:N=>d(v=>({...v,communicationPreference:N.target.value})),className:"sr-only"}),r.jsx(ks,{className:"w-5 h-5 mr-2 text-green-600"}),r.jsx("span",{className:"text-sm font-medium",children:"SMS"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Envoyer la demande"})]})]})]})})},sy=({property:t,units:e,onClose:s,onJoinProperty:n})=>{const{user:i}=oe(),[a,l]=L("gestionloc_visit_requests",[]);jr(t.ownerId);const[c]=L("gestionloc_requests",[]),[o]=L("gestionloc_tenants",[]),[d,u]=$.useState(!1),[p,x]=$.useState(null),y=e.filter(j=>j.status==="available"),b=j=>{x(j||null),u(!0)},N=(j,_)=>a.some(k=>k.tenantId===(i==null?void 0:i.id)&&k.propertyId===j.id&&(_?k.unitId===_.id:!k.unitId)&&(k.status==="confirmed"||k.status==="completed")),v=(j,_)=>c.some(k=>k.tenantId===(i==null?void 0:i.id)&&(_&&k.unitId===_.id||!_&&k.propertyId===j.id)),m=(j,_)=>o.some(k=>k.userId===(i==null?void 0:i.id)&&k.propertyId===j.id&&(_?k.unitId===_.id:!k.unitId)),h=(j,_)=>{const k=N(j,_),E=!v(j,_),D=!m(j,_);return k&&E&&D},f=(j,_)=>{const k=c.find(E=>E.tenantId===(i==null?void 0:i.id)&&(_&&E.unitId===_.id||!_&&E.propertyId===j.id));return k==null?void 0:k.status},g=(j,_)=>f(j,_)==="acceptee",w=(j,_)=>f(j,_)==="rejetee";return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:t.name}),r.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:r.jsx(He,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"flex items-center text-gray-500 mt-2",children:[r.jsx(Zi,{className:"w-4 h-4 mr-1"}),r.jsxs("span",{children:[t.address.street,", ",t.address.city]})]})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"h-64 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl flex items-center justify-center mb-6",children:r.jsx("div",{className:"text-8xl",children:t.type==="entire"?"":""})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dtails du logement"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Type"}),r.jsx("span",{className:"font-medium",children:t.type==="entire"?"Logement entier":"Colocation"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Superficie totale"}),r.jsxs("span",{className:"font-medium flex items-center",children:[r.jsx(wd,{className:"w-4 h-4 mr-1"}),t.totalArea," m"]})]}),t.type==="entire"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Pices"}),r.jsxs("span",{className:"font-medium flex items-center",children:[r.jsx(hx,{className:"w-4 h-4 mr-1"}),t.totalRooms,""]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Salles de bain"}),r.jsxs("span",{className:"font-medium flex items-center",children:[r.jsx(ux,{className:"w-4 h-4 mr-1"}),t.totalBathrooms]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Loyer mensuel"}),r.jsxs("span",{className:"text-xl font-bold text-green-600",children:[t.rent,"$/mois"]})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Description"}),r.jsx("p",{className:"text-gray-600",children:t.description||"Aucune description disponible."})]})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"quipements et commodits"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.equipment&&t.equipment.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"quipements du logement"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.equipment.map((j,_)=>r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),j]},_))})]}),t.type==="shared"&&t.commonAreas&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Espaces communs"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(t.commonAreas).map(([j,_])=>{if(!_)return null;const k={kitchen:"Cuisine",fridge:"Rfrigrateur",microwave:"Micro-ondes",oven:"Four",dishwasher:"Lave-vaisselle",bathroom:"Salle de bain",laundry:"Buanderie",livingRoom:"Salon",wifi:"WiFi",parking:"Parking",balcony:"Balcon",garden:"Jardin",storage:"Rangement"};return r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),k[j]]},j)})})]})]})]}),t.type==="shared"&&r.jsxs("div",{className:"mb-8",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Chambres disponibles (",y.length,")"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map(j=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:j.name}),r.jsxs("span",{className:"text-lg font-bold text-green-600",children:[j.rent,"$/mois"]})]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-3",children:[r.jsx(wd,{className:"w-4 h-4 mr-1"}),j.area," m"]}),r.jsx("div",{className:"flex space-x-2",children:m(t,j)?r.jsx("button",{disabled:!0,className:"flex-1 bg-green-400 text-white py-2 px-3 rounded-lg cursor-not-allowed text-sm",children:"Votre chambre"}):g(t,j)?r.jsx("button",{disabled:!0,className:"flex-1 bg-green-400 text-white py-2 px-3 rounded-lg cursor-not-allowed text-sm",children:"Demande accepte"}):w(t,j)?r.jsx("button",{disabled:!0,className:"flex-1 bg-red-400 text-white py-2 px-3 rounded-lg cursor-not-allowed text-sm",children:"Demande refuse"}):v(t,j)?r.jsx("button",{disabled:!0,className:"flex-1 bg-gray-400 text-white py-2 px-3 rounded-lg cursor-not-allowed text-sm",children:"Demande envoye"}):h(t,j)?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>b(j),className:"flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Programmer visite"}),r.jsx("button",{onClick:()=>n(t,j),className:"flex-1 bg-green-600 text-white py-2 px-3 rounded-lg hover:bg-green-700 transition-colors text-sm",children:"Rejoindre"})]}):r.jsx("button",{onClick:()=>b(j),className:"flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Programmer une visite"})})]},j.id))})]}),t.type==="entire"&&r.jsx("div",{className:"flex space-x-4",children:m(t)?r.jsxs("button",{disabled:!0,className:"flex-1 bg-green-400 text-white py-3 px-6 rounded-lg cursor-not-allowed flex items-center justify-center",children:[r.jsx(Ve,{className:"w-5 h-5 mr-2"}),"Votre logement"]}):g(t)?r.jsx("button",{disabled:!0,className:"flex-1 bg-green-400 text-white py-3 px-6 rounded-lg cursor-not-allowed flex items-center justify-center",children:"Demande accepte"}):w(t)?r.jsx("button",{disabled:!0,className:"flex-1 bg-red-400 text-white py-3 px-6 rounded-lg cursor-not-allowed flex items-center justify-center",children:"Demande refuse"}):v(t)?r.jsxs("button",{disabled:!0,className:"flex-1 bg-gray-400 text-white py-3 px-6 rounded-lg cursor-not-allowed flex items-center justify-center",children:[r.jsx(fe,{className:"w-5 h-5 mr-2"}),"Demande envoye"]}):h(t)?r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>b(),className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[r.jsx(fe,{className:"w-5 h-5 mr-2"}),"Programmer une visite"]}),r.jsxs("button",{onClick:()=>n(t),className:"flex-1 bg-green-600 text-white py-3 px-6 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",children:[r.jsx(pt,{className:"w-5 h-5 mr-2"}),"Rejoindre ce logement"]})]}):r.jsxs("button",{onClick:()=>b(),className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[r.jsx(fe,{className:"w-5 h-5 mr-2"}),"Programmer une visite"]})})]}),d&&r.jsx(gm,{property:t,unit:p,onClose:()=>{u(!1),x(null)}})]})})},ry=()=>new Promise((t,e)=>{if(window.google&&window.google.maps){t();return}if(document.querySelector('script[src*="maps.googleapis.com"]')){const s=()=>{window.google&&window.google.maps?t():setTimeout(s,100)};s();return}{console.warn("Google Maps API key not found. Please add VITE_GOOGLE_MAPS_API_KEY to your .env file"),e(new Error("Google Maps API key not configured"));return}}),ny=({properties:t,center:e={lat:45.5017,lng:-73.5673},zoom:s=12,height:n="400px"})=>{const i=$.useRef(null),a=$.useRef(null),l=$.useRef([]),[c,o]=us.useState(!1),d=async u=>new Promise(p=>{new google.maps.Geocoder().geocode({address:u},(y,b)=>{if(b==="OK"&&y&&y[0]){const N=y[0].geometry.location;p({lat:N.lat(),lng:N.lng()})}else console.warn("Geocoding failed for address:",u),p(null)})});return $.useEffect(()=>{(async()=>{if(i.current)try{await ry(),o(!0),a.current=new google.maps.Map(i.current,{center:e,zoom:s,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]}),console.log(" Google Map initialized")}catch{console.warn("Google Maps not available in demo mode")}})()},[e.lat,e.lng,s]),$.useEffect(()=>{if(!a.current||!c)return;l.current.forEach(p=>p.setMap(null)),l.current=[];const u=async()=>{for(const p of t){const x=`${p.address.street}, ${p.address.city}, ${p.address.province}, Canada`,y=await d(x);if(y&&a.current){const b=new google.maps.Marker({position:y,map:a.current,title:p.name,icon:{url:p.type==="entire"?"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="16" cy="16" r="12" fill="#3B82F6" stroke="white" stroke-width="2"/>
                  <text x="16" y="20" text-anchor="middle" fill="white" font-size="16"></text>
                </svg>
              `):"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="16" cy="16" r="12" fill="#10B981" stroke="white" stroke-width="2"/>
                  <text x="16" y="20" text-anchor="middle" fill="white" font-size="16"></text>
                </svg>
              `),scaledSize:new google.maps.Size(32,32)}}),N=new google.maps.InfoWindow({content:`
            <div style="padding: 8px; max-width: 250px;">
              <h3 style="margin: 0 0 8px 0; color: #1F2937; font-size: 16px; font-weight: 600;">
                ${p.name}
              </h3>
              <p style="margin: 0 0 8px 0; color: #6B7280; font-size: 14px;">
                ${p.address.street}<br>
                ${p.address.city}, ${p.address.province}
              </p>
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                <span style="color: #6B7280; font-size: 12px;">
                  ${p.type==="entire"?"Logement entier":"Colocation"}
                </span>
                <span style="color: #059669; font-weight: 600; font-size: 14px;">
                  ${p.rent?`${p.rent}$/mois`:" partir de 500$/mois"}
                </span>
              </div>
              <div style="display: flex; gap: 4px; margin-bottom: 8px;">
                <span style="background: #EFF6FF; color: #1D4ED8; padding: 2px 6px; border-radius: 4px; font-size: 11px;">
                  ${p.totalArea} m
                </span>
                <span style="background: ${p.status==="libre"?"#ECFDF5":"#FEF3C7"}; 
                             color: ${p.status==="libre"?"#065F46":"#92400E"}; 
                             padding: 2px 6px; border-radius: 4px; font-size: 11px;">
                  ${p.status==="libre"?"Disponible":p.status==="en_attente_validation"?"En attente":"Occup"}
                </span>
              </div>
              ${p.description?`
                <p style="margin: 0; color: #6B7280; font-size: 12px; line-height: 1.4;">
                  ${p.description.substring(0,100)}${p.description.length>100?"...":""}
                </p>
              `:""}
            </div>
          `});b.addListener("click",()=>{N.open(a.current,b)}),l.current.push(b)}}};t.length>0&&u()},[t,c]),c?r.jsx("div",{ref:i,style:{width:"100%",height:n,borderRadius:"12px",overflow:"hidden"},className:"border border-gray-200"}):r.jsx("div",{style:{width:"100%",height:n,borderRadius:"12px",overflow:"hidden"},className:"border border-gray-200 flex items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"Chargement de la carte..."})]})})},$a=()=>{const{user:t}=oe(),[e]=L("gestionloc_properties",[]),[s]=L("gestionloc_units",[]),[n]=L("gestionloc_requests",[]),[i]=L("gestionloc_visit_requests",[]),[a]=L("gestionloc_tenants",[]),[l,c]=$.useState(""),[o,d]=$.useState(!1),[u,p]=$.useState(null),[x,y]=$.useState(null),[b,N]=$.useState(!1),[v,m]=$.useState(!1),[h,f]=$.useState({minPrice:"",maxPrice:"",type:"all",minArea:""}),w=e.filter(S=>S.type==="entire"?S.status==="libre":s.filter(T=>T.propertyId===S.id).some(T=>T.status==="available")).filter(S=>{var T,M,q,V;if(!(S.name.toLowerCase().includes(l.toLowerCase())||((M=(T=S.address)==null?void 0:T.street)==null?void 0:M.toLowerCase().includes(l.toLowerCase()))||((V=(q=S.address)==null?void 0:q.city)==null?void 0:V.toLowerCase().includes(l.toLowerCase())))||h.type!=="all"&&S.type!==h.type||h.minArea&&S.totalArea<Number(h.minArea))return!1;if(S.type==="entire"){const C=S.rent||0;if(h.minPrice&&C<Number(h.minPrice)||h.maxPrice&&C>Number(h.maxPrice))return!1}else{const C=s.filter(je=>je.propertyId===S.id&&je.status==="available");if(C.length===0)return!1;const O=Math.min(...C.map(je=>je.rent)),Y=Math.max(...C.map(je=>je.rent));if(h.minPrice&&Y<Number(h.minPrice)||h.maxPrice&&O>Number(h.maxPrice))return!1}return!0}),j=(S,P)=>{p(S),y(P||null),d(!0)},_=(S,P)=>{p(S),y(null),m(!0)},k=S=>{p(S),N(!0)},E=S=>{if(S.type==="entire")return S.status;const P=s.filter(q=>q.propertyId===S.id),T=P.filter(q=>q.status==="available"),M=P.filter(q=>q.status==="occupied");return T.length===0?"occupe":M.length>0?"en_attente_validation":"libre"},D=(S,P)=>n.some(T=>T.tenantId===(t==null?void 0:t.id)&&T.status==="en_attente"&&(P&&T.unitId===P.id||!P&&T.propertyId===S.id)),F=(S,P)=>i.some(T=>T.tenantId===(t==null?void 0:t.id)&&T.propertyId===S.id&&(P?T.unitId===P.id:!T.unitId)&&(T.status==="confirmed"||T.status==="completed")),W=(S,P)=>a.some(T=>T.userId===(t==null?void 0:t.id)&&T.propertyId===S.id&&(P?T.unitId===P.id:!T.unitId)),I=(S,P)=>{const T=n.find(M=>M.tenantId===(t==null?void 0:t.id)&&(P&&M.unitId===P.id||!P&&M.propertyId===S.id));return T==null?void 0:T.status},A=(S,P)=>I(S,P)==="acceptee",B=(S,P)=>I(S,P)==="rejetee",re=(S,P)=>{const T=F(S,P),M=!D(S,P),q=!W(S,P),V=!A(S,P)&&!B(S,P);return T&&M&&q&&V};return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Recherche de logement"}),r.jsx("p",{className:"text-gray-600",children:"Trouvez votre prochain logement"})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"relative",children:[r.jsx(Ol,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",value:l,onChange:S=>c(S.target.value),placeholder:"Rechercher par nom ou adresse...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),r.jsx("div",{children:r.jsxs("select",{value:h.type,onChange:S=>f(P=>({...P,type:S.target.value})),className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Tous les types"}),r.jsx("option",{value:"entire",children:"Logement entier"}),r.jsx("option",{value:"shared",children:"Colocation"})]})}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"number",value:h.minPrice,onChange:S=>f(P=>({...P,minPrice:S.target.value})),placeholder:"Prix min",className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("input",{type:"number",value:h.maxPrice,onChange:S=>f(P=>({...P,maxPrice:S.target.value})),placeholder:"Prix max",className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:w.length===0?r.jsxs("div",{className:"lg:col-span-3 text-center py-12",children:[r.jsx(Ol,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun logement trouv"}),r.jsx("p",{className:"text-gray-500",children:"Essayez de modifier vos critres de recherche"})]}):w.map(S=>{var M,q;const P=s.filter(V=>V.propertyId===S.id&&V.status==="available"),T=s.filter(V=>V.propertyId===S.id);return E(S),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"h-48 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:r.jsx("div",{className:"text-6xl",children:S.type==="entire"?"":""})}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:S.name}),r.jsxs("div",{className:"flex items-center text-gray-500",children:[r.jsx(Zi,{className:"w-4 h-4 mr-1"}),r.jsxs("span",{className:"text-sm",children:[(M=S.address)==null?void 0:M.street,", ",(q=S.address)==null?void 0:q.city]})]})]}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Type"}),r.jsx("span",{className:"text-sm font-medium",children:S.type==="entire"?"Logement entier":"Colocation"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Superficie"}),r.jsxs("span",{className:"text-sm font-medium",children:[S.totalArea," m"]})]}),S.type==="entire"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Pices"}),r.jsxs("span",{className:"text-sm font-medium",children:[S.totalRooms,""]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Loyer"}),r.jsxs("span",{className:"text-lg font-bold text-green-600",children:[S.rent,"$/mois"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Statut"}),r.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded-full ${S.status==="libre"?"bg-green-100 text-green-800":S.status==="en_attente_validation"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:S.status==="libre"?"Libre":S.status==="en_attente_validation"?"En attente":"Occup"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Total chambres"}),r.jsx("span",{className:"text-sm font-medium",children:T.length})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Libres"}),r.jsx("span",{className:"text-sm font-medium",children:P.length})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:" partir de"}),r.jsxs("span",{className:"text-lg font-bold text-green-600",children:[Math.min(...P.map(V=>V.rent)),"$/mois"]})]})]})]}),S.description&&r.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:S.description}),r.jsx("div",{className:"flex space-x-3",children:S.type==="entire"?r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsxs("button",{onClick:()=>k(S),className:"w-full bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center",children:[r.jsx(pr,{className:"w-4 h-4 mr-2"}),"Voir dtails"]}),r.jsxs("button",{onClick:()=>_(S),className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center",children:[r.jsx(fe,{className:"w-4 h-4 mr-2"}),"Programmer visite"]}),W(S)?r.jsxs("button",{disabled:!0,className:"w-full bg-green-400 text-white py-2 px-4 rounded-lg cursor-not-allowed",children:[r.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Votre logement"]}):A(S)?r.jsx("button",{disabled:!0,className:"w-full bg-green-400 text-white py-2 px-4 rounded-lg cursor-not-allowed",children:"Demande accepte"}):B(S)?r.jsx("button",{disabled:!0,className:"w-full bg-red-400 text-white py-2 px-4 rounded-lg cursor-not-allowed",children:"Demande refuse"}):D(S)?r.jsxs("button",{disabled:!0,className:"w-full bg-gray-400 text-white py-2 px-4 rounded-lg cursor-not-allowed",children:[r.jsx(ze,{className:"w-4 h-4 mr-2"}),"Demande envoye"]}):re(S)?r.jsxs("button",{onClick:()=>j(S),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[r.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Rejoindre"]}):S.status==="libre"?r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:r.jsx("p",{className:"text-xs text-yellow-800 text-center",children:"Programmez d'abord une visite pour pouvoir rejoindre ce logement"})}):r.jsx("button",{disabled:!0,className:"w-full bg-gray-400 text-white py-2 px-4 rounded-lg cursor-not-allowed",children:S.status==="en_attente_validation"?"En attente":"Occup"})]}):r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsxs("button",{onClick:()=>k(S),className:"w-full bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center",children:[r.jsx(pr,{className:"w-4 h-4 mr-2"}),"Voir dtails"]}),r.jsxs("button",{onClick:()=>_(S),className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center",children:[r.jsx(fe,{className:"w-4 h-4 mr-2"}),"Programmer visite"]}),P.length>0?P.slice(0,2).map(V=>{const C=W(S,V);I(S,V);const O=re(S,V),Y=D(S,V),je=A(S,V),Ds=B(S,V);return r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-sm font-medium",children:[V.name," - ",V.rent,"$"]}),C?r.jsx("button",{disabled:!0,className:"px-3 py-1 bg-green-400 text-white text-xs rounded cursor-not-allowed",children:"Votre chambre"}):je?r.jsx("button",{disabled:!0,className:"px-3 py-1 bg-green-400 text-white text-xs rounded cursor-not-allowed",children:"Accept"}):Ds?r.jsx("button",{disabled:!0,className:"px-3 py-1 bg-red-400 text-white text-xs rounded cursor-not-allowed",children:"Refus"}):Y?r.jsx("button",{disabled:!0,className:"px-3 py-1 bg-gray-400 text-white text-xs rounded cursor-not-allowed",children:"Demand"}):O?r.jsx("button",{onClick:()=>j(S,V),className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors",children:"Rejoindre"}):r.jsx("div",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded",children:"Visite requise"})]},V.id)}):r.jsx("span",{className:"text-sm text-gray-500",children:"Aucune chambre libre"}),P.length>2&&r.jsxs("p",{className:"text-xs text-gray-500",children:["+",P.length-2," autres chambres"]})]})})]})]},S.id)})}),b&&u&&r.jsx(sy,{property:u,units:s.filter(S=>S.propertyId===u.id),onClose:()=>{N(!1),p(null)},onJoinProperty:j}),v&&u&&r.jsx(gm,{property:u,unit:x,onClose:()=>{m(!1),p(null),y(null)}}),r.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Carte interactive"}),r.jsx(ny,{properties:w,height:"400px"})]}),o&&u&&r.jsx(ty,{property:u,unit:x,onClose:()=>{d(!1),p(null),y(null)}})]})},iy=({onTabChange:t})=>{const{user:e}=oe();Is();const[s]=L("gestionloc_tenants",[]),[n]=L("gestionloc_properties",[]),[i]=L("gestionloc_units",[]),[a]=L("gestionloc_payments",[]),[l]=L("gestionloc_issues",[]),[c,o]=us.useState(!1),d=s.find(h=>h.userId===(e==null?void 0:e.id));if(!d)return r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ve,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun logement"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Vous n'avez pas encore de logement assign. Recherchez un logement, programmez une visite, puis faites une demande pour le rejoindre."}),r.jsxs("button",{onClick:()=>t==null?void 0:t("search"),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Ve,{className:"w-5 h-5 mr-2"}),"Rechercher un logement"]})]})});const u=n.find(h=>h.id===d.propertyId),p=i.find(h=>h.id===d.unitId),x=a.filter(h=>h.tenantId===d.id),y=l.filter(h=>h.tenantId===d.id),b=x.filter(h=>h.status==="pending").sort((h,f)=>new Date(h.dueDate).getTime()-new Date(f.dueDate).getTime())[0],N=x.sort((h,f)=>new Date(f.dueDate).getTime()-new Date(h.dueDate).getTime()).slice(0,5),v=y.filter(h=>h.status!=="resolved"),m=()=>{const h=new Date,g=new Date(d.leaseEnd).getTime()-h.getTime(),w=Math.ceil(g/(1e3*60*60*24));return w<=60&&w>0};return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Mon logement"}),r.jsx("p",{className:"text-gray-600",children:"Informations sur votre location actuelle"})]}),m()&&r.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-400 p-4 mb-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(he,{className:"w-5 h-5 text-orange-400 mr-3"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-orange-800",children:"Bail expirant bientt"}),r.jsxs("p",{className:"text-sm text-orange-700 mt-1",children:["Votre bail expire le ",new Date(d.leaseEnd).toLocaleDateString("fr-FR"),". Contactez votre propritaire pour le renouvellement."]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Ve,{className:"w-5 h-5 mr-2"}),"Informations du logement"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Adresse"}),r.jsx("p",{className:"text-gray-600",children:u==null?void 0:u.name}),r.jsxs("p",{className:"text-gray-600",children:[u==null?void 0:u.address.street,", ",u==null?void 0:u.address.city]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Dtails"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Type"}),r.jsx("span",{children:(u==null?void 0:u.type)==="entire"?"Logement entier":"Colocation"})]}),p&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Chambre"}),r.jsx("span",{children:p.name})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Superficie"}),r.jsxs("span",{children:[(p==null?void 0:p.area)||(u==null?void 0:u.totalArea)," m"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Loyer mensuel"}),r.jsxs("span",{className:"font-semibold text-green-600",children:[d.monthlyRent,"$"]})]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(_s,{className:"w-5 h-5 mr-2"}),"Informations du bail"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Dbut du bail"}),r.jsx("p",{className:"font-medium",children:new Date(d.leaseStart).toLocaleDateString("fr-FR")})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Fin du bail"}),r.jsx("p",{className:"font-medium",children:new Date(d.leaseEnd).toLocaleDateString("fr-FR")})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Dpt de garantie"}),r.jsxs("p",{className:"font-medium",children:[d.depositPaid,"$"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Date d'chance"}),r.jsxs("p",{className:"font-medium",children:["Le ",d.paymentDueDate," de chaque mois"]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Pt,{className:"w-5 h-5 mr-2"}),"Historique des paiements"]}),r.jsx("div",{className:"space-y-3",children:N.length===0?r.jsx("p",{className:"text-gray-500 text-center py-4",children:"Aucun paiement enregistr"}):N.map(h=>r.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium",children:[h.amount,"$"]}),r.jsxs("p",{className:"text-sm text-gray-500",children:["chance: ",new Date(h.dueDate).toLocaleDateString("fr-FR")]})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h.status==="paid"?"bg-green-100 text-green-800":h.status==="late"?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:h.status==="paid"?"Pay":h.status==="late"?"En retard":"En attente"})]},h.id))})]})]}),r.jsxs("div",{className:"space-y-6",children:[b&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(fe,{className:"w-5 h-5 mr-2"}),"Prochain paiement"]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:[b.amount,"$"]}),r.jsxs("div",{className:"text-gray-600 mb-4",children:["chance: ",new Date(b.dueDate).toLocaleDateString("fr-FR")]}),r.jsx("button",{onClick:()=>{confirm("Confirmer le paiement de "+b.amount+"$ ?")&&(t==null||t("payments"))},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Aller aux paiements"})]})]}),d.emergencyContact.name&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(pt,{className:"w-5 h-5 mr-2"}),"Contact d'urgence"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"font-medium",children:d.emergencyContact.name}),r.jsx("p",{className:"text-sm text-gray-600",children:d.emergencyContact.relationship}),d.emergencyContact.phone&&r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),d.emergencyContact.phone]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(he,{className:"w-5 h-5 mr-2"}),"Problmes en cours"]}),v.length===0?r.jsx("p",{className:"text-gray-500 text-center py-4",children:"Aucun problme signal"}):r.jsx("div",{className:"space-y-3",children:v.map(h=>r.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[r.jsx("p",{className:"font-medium text-sm",children:h.title}),r.jsxs("div",{className:"flex items-center justify-between mt-2",children:[r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h.priority==="urgent"?"bg-red-100 text-red-800":h.priority==="high"?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:h.priority==="urgent"?"Urgent":h.priority==="high"?"leve":"Normale"}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:h.status==="pending"?"En attente":"En cours"})]})]},h.id))})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Actions rapides"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{onClick:()=>o(!0),className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"font-medium text-gray-900",children:"Signaler un problme"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Maintenance, rparations..."})]}),r.jsxs("button",{onClick:()=>alert("Fonctionnalit de contact  venir..."),className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"font-medium text-gray-900",children:"Contacter le propritaire"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Questions, demandes..."})]}),r.jsxs("button",{onClick:()=>alert("Tlchargement du bail en cours..."),className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"font-medium text-gray-900",children:"Tlcharger le bail"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Document PDF"})]})]})]})]})]}),c&&r.jsx(pm,{isOwner:!1,onClose:()=>o(!1)})]})},ay=()=>{const{history:t,getHistoryByType:e}=Is(),[s]=L("gestionloc_properties",[]),[n]=L("gestionloc_units",[]),[i,a]=$.useState("all"),l=(x,y)=>{const b=x?s.find(v=>v.id===x):null,N=y?n.find(v=>v.id===y):null;return{property:b,unit:N}},c=x=>{switch(x){case"visit_request":return r.jsx(pr,{className:"w-5 h-5"});case"property_request":return r.jsx(Ve,{className:"w-5 h-5"});case"lease_signed":return r.jsx(_s,{className:"w-5 h-5"});case"lease_ended":return r.jsx(Ml,{className:"w-5 h-5"});case"payment":return r.jsx(Pt,{className:"w-5 h-5"});case"issue_reported":return r.jsx(he,{className:"w-5 h-5"});case"issue_resolved":return r.jsx(Ei,{className:"w-5 h-5"});case"move_in":return r.jsx(Ve,{className:"w-5 h-5"});case"move_out":return r.jsx(Ml,{className:"w-5 h-5"});default:return r.jsx(fe,{className:"w-5 h-5"})}},o=x=>{switch(x){case"visit_request":return"bg-blue-100 text-blue-800";case"property_request":return"bg-purple-100 text-purple-800";case"lease_signed":return"bg-green-100 text-green-800";case"lease_ended":return"bg-red-100 text-red-800";case"payment":return"bg-emerald-100 text-emerald-800";case"issue_reported":return"bg-orange-100 text-orange-800";case"issue_resolved":return"bg-green-100 text-green-800";case"move_in":return"bg-indigo-100 text-indigo-800";case"move_out":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},d=x=>{switch(x){case"visit_request":return"Demande de visite";case"property_request":return"Demande de logement";case"lease_signed":return"Bail sign";case"lease_ended":return"Fin de bail";case"payment":return"Paiement";case"issue_reported":return"Problme signal";case"issue_resolved":return"Problme rsolu";case"move_in":return"Emmnagement";case"move_out":return"Dmnagement";default:return"Activit"}},u=i==="all"?t:e(i),p={totalActivities:t.length,visitRequests:e("visit_request").length,propertyRequests:e("property_request").length,leaseSigned:e("lease_signed").length,payments:e("payment").length,issuesReported:e("issue_reported").length};return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Mon historique"}),r.jsx("p",{className:"text-gray-600",children:"Toutes vos activits et interactions passes"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total activits"}),r.jsx("p",{className:"text-xl font-bold text-gray-900",children:p.totalActivities})]}),r.jsx(fe,{className:"w-6 h-6 text-gray-400"})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Visites"}),r.jsx("p",{className:"text-xl font-bold text-blue-600",children:p.visitRequests})]}),r.jsx(pr,{className:"w-6 h-6 text-blue-400"})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Demandes"}),r.jsx("p",{className:"text-xl font-bold text-purple-600",children:p.propertyRequests})]}),r.jsx(Ve,{className:"w-6 h-6 text-purple-400"})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Baux signs"}),r.jsx("p",{className:"text-xl font-bold text-green-600",children:p.leaseSigned})]}),r.jsx(_s,{className:"w-6 h-6 text-green-400"})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Paiements"}),r.jsx("p",{className:"text-xl font-bold text-emerald-600",children:p.payments})]}),r.jsx(Pt,{className:"w-6 h-6 text-emerald-400"})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Problmes"}),r.jsx("p",{className:"text-xl font-bold text-orange-600",children:p.issuesReported})]}),r.jsx(he,{className:"w-6 h-6 text-orange-400"})]})})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(zo,{className:"w-5 h-5 text-gray-400"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:["all","visit_request","property_request","lease_signed","payment","issue_reported"].map(x=>r.jsx("button",{onClick:()=>a(x),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${i===x?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:x==="all"?"Toutes":d(x)},x))})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Chronologie des activits"})}),r.jsx("div",{className:"p-6",children:u.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(fe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune activit"}),r.jsx("p",{className:"text-gray-500",children:i==="all"?"Votre historique apparatra ici au fur et  mesure de vos activits":`Aucune activit de type "${d(i)}"`})]}):r.jsx("div",{className:"space-y-4",children:u.map((x,y)=>{const{property:b,unit:N}=l(x.propertyId,x.unitId);return r.jsxs("div",{className:"flex items-start space-x-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${o(x.type)}`,children:c(x.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:x.title}),r.jsx("span",{className:"text-xs text-gray-500",children:x.createdAt.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:x.description}),b&&r.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[r.jsx(Zi,{className:"w-3 h-3 mr-1"}),r.jsxs("span",{children:[b.name,N&&` - ${N.name}`,"  ",b.address.street,", ",b.address.city]})]}),x.metadata&&Object.keys(x.metadata).length>0&&r.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[x.metadata.amount&&r.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 rounded-full mr-2",children:[x.metadata.amount,"$ CAD"]}),x.metadata.status&&r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full mr-2 ${x.metadata.status==="accepted"?"bg-green-100 text-green-800":x.metadata.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:x.metadata.status==="accepted"?"Accept":x.metadata.status==="rejected"?"Refus":"En attente"}),x.metadata.priority&&r.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full ${x.metadata.priority==="urgent"?"bg-red-100 text-red-800":x.metadata.priority==="high"?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:["Priorit ",x.metadata.priority==="urgent"?"urgente":x.metadata.priority==="high"?"leve":"normale"]})]})]})]},x.id)})})})]})]})},ly=()=>{const[t,e]=L("gestionloc_requests",[]),[s,n]=L("gestionloc_properties",[]),[i,a]=L("gestionloc_units",[]),[l,c]=L("gestionloc_tenants",[]),{addNotification:o}=jr("1"),{addHistoryEntry:d}=Is(),[u,p]=$.useState("en_attente"),x=t.filter(m=>m.status==="en_attente"),y=t.filter(m=>u==="all"||m.status===u),b=m=>{const h=s.find(g=>g.id===m.propertyId),f=m.unitId?i.find(g=>g.id===m.unitId):null;return{property:h,unit:f}},N=m=>{const{property:h,unit:f}=b(m);if(!h||!confirm("tes-vous sr de vouloir accepter cette demande de logement ?"))return;e(j=>j.map(_=>_.id===m.id?{..._,status:"acceptee",responseDate:new Date}:_));const g={id:Date.now().toString(),userId:m.tenantId,propertyId:h.id,unitId:f==null?void 0:f.id,leaseStart:new Date,leaseEnd:new Date(Date.now()+365*24*60*60*1e3),monthlyRent:(f==null?void 0:f.rent)||h.rent||0,depositPaid:0,paymentDueDate:1,emergencyContact:{name:"",phone:"",relationship:""}};c(j=>[...j,g]),f?a(j=>j.map(_=>_.id===f.id?{..._,status:"occupied"}:_)):n(j=>j.map(_=>_.id===h.id?{..._,status:"occupe"}:_));const w=`
Cher(e) ${m.tenantInfo.firstName} ${m.tenantInfo.lastName},

 Flicitations ! Nous avons le grand plaisir de vous informer que votre demande de logement a t ACCEPTE.

 Votre nouveau logement :
${f?`Chambre ${f.name}`:"Logement entier"} - ${h.name}
 ${h.address.street}, ${h.address.city}
 Loyer mensuel : ${g.monthlyRent}$ CAD
 Dbut du bail : ${g.leaseStart.toLocaleDateString("fr-FR")}
 Fin du bail : ${g.leaseEnd.toLocaleDateString("fr-FR")}

 Prochaines tapes :
1.  Votre espace locataire est maintenant activ
2.  Vous pouvez accder  "Mon logement" dans votre tableau de bord
3.  Les paiements mensuels seront gnrs automatiquement
4.  Vous pouvez signaler des problmes directement via l'application
5.  Contactez-nous pour toute question

 Informations de contact :
 Application : Section "Mon logement"
 Support : Via l'onglet "Mes signalements"

Nous vous souhaitons la bienvenue dans votre nouveau logement et esprons que vous vous y plairez !

Cordialement,
L'quipe GestionLoc Pro
    `.trim();o({userId:m.tenantId,type:"general",title:" DEMANDE ACCEPTE - Bienvenue chez vous !",message:w,read:!1}),d({type:"lease_signed",title:`Bail sign - ${h.name}`,description:`Votre demande pour ${f?`la chambre ${f.name}`:"le logement entier"} a t accepte et un bail a t cr`,propertyId:h.id,unitId:f==null?void 0:f.id,relatedId:g.id,metadata:{status:"accepted",monthlyRent:g.monthlyRent,leaseStart:g.leaseStart.toISOString(),leaseEnd:g.leaseEnd.toISOString()}}),d({type:"move_in",title:`Emmnagement - ${h.name}`,description:`Emmnagement dans ${f?`la chambre ${f.name}`:"le logement entier"}`,propertyId:h.id,unitId:f==null?void 0:f.id,relatedId:g.id,metadata:{moveInDate:g.leaseStart.toISOString(),monthlyRent:g.monthlyRent}}),console.log(" Notification sent to tenant"),alert(" Demande accepte ! Un message de bienvenue dtaill a t envoy au locataire.")},v=m=>{const{property:h,unit:f}=b(m);if(!h||!confirm("tes-vous sr de vouloir refuser cette demande de logement ?"))return;e(w=>w.map(j=>j.id===m.id?{...j,status:"rejetee",responseDate:new Date}:j)),f?a(w=>w.map(j=>j.id===f.id?{...j,status:"available"}:j)):n(w=>w.map(j=>j.id===h.id?{...j,status:"libre"}:j));const g=`
Cher(e) ${m.tenantInfo.firstName} ${m.tenantInfo.lastName},

Nous vous remercions de l'intrt que vous avez port  ${f?`la chambre ${f.name}`:"notre logement"} situ au ${h.name}.

Aprs examen attentif de votre dossier, nous regrettons de vous informer que nous ne pouvons pas donner suite favorable  votre demande pour ce logement spcifique.

Cette dcision peut tre due  :
 Un grand nombre de candidatures reues
 Des critres spcifiques pour ce logement
 Une slection base sur l'ordre d'arrive des dossiers complets

 Nous vous encourageons vivement  :
 Consulter nos autres logements disponibles
 Programmer de nouvelles visites
 Soumettre de nouvelles demandes

Votre profil reste actif dans notre systme et vous pouvez continuer  rechercher d'autres opportunits via l'application GestionLoc Pro.

Nous vous souhaitons bonne chance dans vos recherches et esprons pouvoir vous accompagner prochainement.

Cordialement,
L'quipe GestionLoc Pro
    `.trim();o({userId:m.tenantId,type:"general",title:" Rponse  votre demande de logement",message:g,read:!1}),d({type:"property_request",title:`Demande refuse - ${h.name}`,description:`Votre demande pour ${f?`la chambre ${f.name}`:"le logement entier"} a t refuse`,propertyId:h.id,unitId:f==null?void 0:f.id,relatedId:m.id,metadata:{status:"rejected"}}),console.log(" Notification sent to tenant"),alert(" Demande refuse. Un message professionnel a t envoy au locataire.")};return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Demandes de logement"}),r.jsx("p",{className:"text-gray-600",children:"Grez les demandes de vos locataires potentiels"})]}),x.length>0&&r.jsxs("div",{className:"flex items-center px-3 py-2 bg-orange-100 text-orange-800 rounded-lg",children:[r.jsx(mn,{className:"w-5 h-5 mr-2"}),x.length," demande",x.length>1?"s":""," en attente"]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:r.jsx("div",{className:"flex space-x-2",children:["all","en_attente","acceptee","rejetee"].map(m=>r.jsx("button",{onClick:()=>p(m),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${u===m?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:m==="all"?"Toutes":m==="en_attente"?"En attente":m==="acceptee"?"Acceptes":"Refuses"},m))})}),r.jsx("div",{className:"space-y-4",children:y.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(pt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune demande"}),r.jsx("p",{className:"text-gray-500",children:u==="en_attente"?"Aucune demande en attente":"Aucune demande trouve"})]}):y.map(m=>{const{property:h,unit:f}=b(m);return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[m.tenantInfo.firstName," ",m.tenantInfo.lastName]}),r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m.status==="en_attente"?"bg-orange-100 text-orange-800":m.status==="acceptee"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.status==="en_attente"?"En attente":m.status==="acceptee"?"Accepte":"Refuse"})]}),r.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),m.tenantInfo.email]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),m.tenantInfo.phone]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(fe,{className:"w-4 h-4 mr-2"}),"Demande envoye le ",new Date(m.requestDate).toLocaleDateString("fr-FR")]})]})]}),m.status==="en_attente"&&r.jsxs("div",{className:"flex space-x-2 ml-4",children:[r.jsxs("button",{onClick:g=>{g.preventDefault(),g.stopPropagation(),console.log(" Accept button clicked for request:",m.id),N(m)},className:"flex items-center px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[r.jsx(Bt,{className:"w-4 h-4 mr-1"}),"Accepter"]}),r.jsxs("button",{onClick:g=>{g.preventDefault(),g.stopPropagation(),console.log(" Reject button clicked for request:",m.id),v(m)},className:"flex items-center px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[r.jsx(He,{className:"w-4 h-4 mr-1"}),"Refuser"]})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[r.jsxs("h4",{className:"font-medium text-blue-900 mb-2",children:[f?`Chambre ${f.name}`:"Logement entier"," - ",h==null?void 0:h.name]}),r.jsxs("p",{className:"text-sm text-blue-800",children:[h==null?void 0:h.address.street,", ",h==null?void 0:h.address.city]}),f&&r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-blue-700 mt-2",children:[r.jsxs("span",{children:[f.area," m"]}),r.jsxs("span",{className:"font-semibold",children:[f.rent,"$/mois"]})]})]}),m.tenantInfo.message&&r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[r.jsxs("h4",{className:"font-medium text-gray-900 mb-2 flex items-center",children:[r.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Message du candidat"]}),r.jsx("p",{className:"text-sm text-gray-700",children:m.tenantInfo.message})]}),m.tenantInfo.idDocument&&r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(_s,{className:"w-4 h-4 mr-2"}),r.jsx("button",{onClick:()=>window.open(m.tenantInfo.idDocument,"_blank"),className:"text-blue-600 hover:text-blue-800",children:"Voir la pice d'identit"})]}),m.responseDate&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 text-sm text-gray-500",children:["Rponse envoye le ",new Date(m.responseDate).toLocaleDateString("fr-FR")]})]},m.id)})})]})},oy=()=>{const[t,e]=L("gestionloc_visit_requests",[]),[s]=L("gestionloc_properties",[]),[n]=L("gestionloc_units",[]),{addNotification:i}=jr("1"),[a,l]=$.useState("pending"),c=t.filter(y=>y.status==="pending"),o=t.filter(y=>a==="all"||y.status===a),d=y=>{const b=s.find(v=>v.id===y.propertyId),N=y.unitId?n.find(v=>v.id===y.unitId):null;return{property:b,unit:N}},u=y=>{if(!confirm("tes-vous sr de vouloir confirmer cette visite ?"))return;e(m=>m.map(h=>h.id===y.id?{...h,status:"confirmed"}:h));const{property:b,unit:N}=d(y),v=`
Cher(e) ${y.tenantInfo.firstName} ${y.tenantInfo.lastName},

Nous avons le plaisir de vous confirmer votre demande de visite pour ${N?`la chambre ${N.name}`:"notre logement"} situ au ${b==null?void 0:b.name}, ${b==null?void 0:b.address.street}, ${b==null?void 0:b.address.city}.

 Date et heure confirmes :
${x(y.visitDate)}  ${y.visitTime}

 Adresse de la visite :
${b==null?void 0:b.address.street}${b!=null&&b.address.apartment?`, ${b.address.apartment}`:""}
${b==null?void 0:b.address.city}, ${b==null?void 0:b.address.province} ${b==null?void 0:b.address.postalCode}

 Informations importantes :
 Veuillez arriver  l'heure convenue
 Munissez-vous d'une pice d'identit
 N'hsitez pas  poser toutes vos questions
 Suite  cette visite, vous pourrez faire une demande de logement

En cas d'empchement, merci de nous prvenir au plus tt.

Nous nous rjouissons de vous rencontrer !

Cordialement,
L'quipe GestionLoc Pro
    `.trim();i({userId:y.tenantId,type:"general",title:" Visite confirme - Dtails importants",message:v,read:!1}),alert(" Visite confirme ! Un message de confirmation dtaill a t envoy au locataire.")},p=y=>{confirm("tes-vous sr de vouloir annuler cette visite ?")&&(e(b=>b.map(N=>N.id===y.id?{...N,status:"cancelled"}:N)),i({userId:y.tenantId,type:"general",title:"Visite annule",message:`Votre visite du ${new Date(y.visitDate).toLocaleDateString("fr-FR")}  ${y.visitTime} a t annule.`,read:!1}),alert("Visite annule. Le locataire a t notifi."))},x=y=>new Date(y).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"});return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Demandes de visite"}),r.jsx("p",{className:"text-gray-600",children:"Grez les demandes de visite de vos proprits"})]}),c.length>0&&r.jsxs("div",{className:"flex items-center px-3 py-2 bg-blue-100 text-blue-800 rounded-lg",children:[r.jsx(fe,{className:"w-5 h-5 mr-2"}),c.length," demande",c.length>1?"s":""," en attente"]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:r.jsx("div",{className:"flex space-x-2",children:["all","pending","confirmed","cancelled"].map(y=>r.jsx("button",{onClick:()=>l(y),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${a===y?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:y==="all"?"Toutes":y==="pending"?"En attente":y==="confirmed"?"Confirmes":"Annules"},y))})}),r.jsx("div",{className:"space-y-4",children:o.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(fe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune demande de visite"}),r.jsx("p",{className:"text-gray-500",children:a==="pending"?"Aucune demande en attente":"Aucune demande trouve"})]}):o.map(y=>{const{property:b,unit:N}=d(y);return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[y.tenantInfo.firstName," ",y.tenantInfo.lastName]}),r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${y.status==="pending"?"bg-orange-100 text-orange-800":y.status==="confirmed"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:y.status==="pending"?"En attente":y.status==="confirmed"?"Confirme":"Annule"})]}),r.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),y.tenantInfo.email]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),y.tenantInfo.phone]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(fe,{className:"w-4 h-4 mr-2"}),x(y.visitDate),"  ",y.visitTime]})]})]}),y.status==="pending"&&r.jsxs("div",{className:"flex space-x-2 ml-4",children:[r.jsxs("button",{onClick:v=>{v.preventDefault(),v.stopPropagation(),u(y)},className:"flex items-center px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[r.jsx(Bt,{className:"w-4 h-4 mr-1"}),"Confirmer"]}),r.jsxs("button",{onClick:v=>{v.preventDefault(),v.stopPropagation(),p(y)},className:"flex items-center px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[r.jsx(He,{className:"w-4 h-4 mr-1"}),"Annuler"]})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[r.jsxs("h4",{className:"font-medium text-blue-900 mb-2",children:[N?`Chambre ${N.name}`:"Logement entier"," - ",b==null?void 0:b.name]}),r.jsxs("p",{className:"text-sm text-blue-800",children:[b==null?void 0:b.address.street,", ",b==null?void 0:b.address.city]}),N&&r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-blue-700 mt-2",children:[r.jsxs("span",{children:[N.area," m"]}),r.jsxs("span",{className:"font-semibold",children:[N.rent,"$/mois"]})]})]}),y.tenantInfo.message&&r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[r.jsxs("h4",{className:"font-medium text-gray-900 mb-2 flex items-center",children:[r.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Message du visiteur"]}),r.jsx("p",{className:"text-sm text-gray-700",children:y.tenantInfo.message})]}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(ze,{className:"w-5 h-5 text-yellow-600 mr-3"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-yellow-900",children:"Dtails de la visite"}),r.jsxs("p",{className:"text-sm text-yellow-800",children:[x(y.visitDate),"  ",y.visitTime]}),r.jsxs("p",{className:"text-xs text-yellow-700 mt-1",children:["Demande envoye le ",new Date(y.requestDate).toLocaleDateString("fr-FR")]})]})]})})]},y.id)})})]})},cy=()=>{const{user:t,loading:e}=oe(),[s,n]=us.useState("dashboard"),[i,a]=us.useState(!1),[l,c]=us.useState(!1);if(us.useEffect(()=>{(async()=>{console.log(" Dmarrage de l'application GestionLoc Pro");try{const u=await lx();u.connected?console.log(" Application prte - Connexion Supabase active"):(console.error(" Erreur de connexion Supabase:",u.error),console.log(" Vrifiez votre configuration dans le fichier .env"))}catch(u){console.error(" Erreur lors du test de connexion:",u)}c(!0)})()},[]),e)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:l?"Chargement...":"Initialisation..."})]})});if(!t)return r.jsx(Px,{});const o=()=>{switch(s){case"dashboard":return t.role==="owner"?r.jsx(_d,{}):r.jsx($a,{});case"properties":return r.jsx(Lx,{});case"tenants":return r.jsx(Mx,{});case"payments":return r.jsx(Wx,{});case"expenses":return r.jsx(Kx,{});case"issues":return r.jsx(Jx,{});case"reports":return r.jsx(Qx,{});case"ai-agents":return r.jsx(Yx,{});case"settings":return r.jsx(Xx,{});case"subscription":return r.jsx(ey,{});case"search":return r.jsx($a,{});case"my-rental":return r.jsx(iy,{});case"history":return r.jsx(ay,{});case"property-requests":return r.jsx(ly,{});case"visit-requests":return r.jsx(oy,{});default:return t.role==="owner"?r.jsx(_d,{}):r.jsx($a,{})}};return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(Ex,{onMenuClick:()=>a(!i),user:t}),r.jsxs("div",{className:"flex",children:[r.jsx(Ix,{isOpen:i,onClose:()=>a(!1),activeTab:s,onTabChange:n,userRole:t.role}),r.jsx("main",{className:"flex-1 lg:ml-64",children:r.jsx("div",{className:"p-4 lg:p-8",children:o()})})]})]})},dy=()=>r.jsx(ox,{children:r.jsx(cy,{})});Mh(document.getElementById("root")).render(r.jsx($.StrictMode,{children:r.jsx(dy,{})}));
